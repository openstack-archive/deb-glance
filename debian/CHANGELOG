commit a9f0a4c4dbac0c92c431150161915bd5459a42d0
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Tue Sep 25 22:13:56 2012 +0100

    Change type of rabbit_durable_queues to boolean.
    
    Fixes bug 1056465
    
    The rabbit_durable_queues config option should be of type boolean
    instead of string, otherwise it does not have the expected effect on
    the durability of rabbitmq exchanges and queues.
    
    Change-Id: I9b3dc7d763b109c1bf10f78ebe725d71ed10791a

commit 2e6a725e38b81708e77a81142bdb137af8f5fdbf
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Mon Sep 24 13:56:17 2012 -0700

    Document api deployment configuration
    
    This documents how to disable the v1 and v2 APIs. It also makes a note
    about sql configuration on the glance-api node when the v2 API is
    enabled.
    
    Fixes bug 1054168
    
    Change-Id: I4faa29f1b05d8831347febc261f7e47e49dfa09a

commit 32311d61ee5ed7a9f87efdc420bdc262e17d6198
Merge: 5268d6b b46b884
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Sep 24 19:40:17 2012 +0000

    Merge "Ensure workers set to 0 for all functional tests" into milestone-proposed

commit b46b884d4fd94cda230867274a01b9b8c3856819
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Sat Sep 22 21:52:45 2012 +0100

    Ensure workers set to 0 for all functional tests
    
    Fixes bug 1054388
    
    Clear up a couple of cases where a functional test fired up a
    wsgi.Server without explicitly setting the workers config option
    to zero.
    
    Change-Id: I5e2e8fe3c5d6e0c017d27074d35fd79b7dd7d79d

commit 5268d6b1a71d1132a05cf989c322f44ec4445fb5
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Fri Sep 21 15:32:49 2012 +0000

    Add rabbit_durable_queues config option.
    
    Fixes bug 1054183
    
    Avoid AMQPChannelException: (406, "PRECONDITION_FAILED...") failures
    due to a mismatch between the durability of rabbitmq exchange/queue
    declared by glance and ceilometer.
    
    Change-Id: I4e25986a1f503782e701aa1168c4eb231ff25d06

commit 7b84172830b99514e87c817d13fbe54dac4395a7
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Thu Sep 20 20:57:54 2012 +0100

    Update docs with modified workers default value.
    
    The default value for the worker config option is now 1,
    as opposed to 0.
    
    Change-Id: I49f05b31415b3c641abe582f915fc9ead63e84ff

commit cb04797f936273f38b62c846deb9b4b9b0fe03fd
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Wed Sep 19 13:06:43 2012 +0100

    Enable multi-processing by default.
    
    In realistic production environments, multi-processing is likely
    to be enabled.
    
    A default setting of one worker would allow the multi-processing
    codepath to be followed by default, without changing the number
    of processes actually servicing API requests (i.e. the single
    parent process will just wait on the child).
    
    For most functional tests, we continue to explicitly configure
    zero workers, so as to avoid spawning twice as many glance-api
    processes during a test run.
    
    Change-Id: I1c327805f8fb975a3175e9a8b40aeddd21d5ef91

commit 4af4bf9da8e35b480aec267eb20c5b81f3890def
Merge: 235c5a3 c417382
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Sep 20 13:32:37 2012 +0000

    Merge "Fix scrubber start & not scrubbing when not daemon" into milestone-proposed

commit 235c5a3b573333b826705e2c5115f0485f28acf6
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Wed Sep 19 11:37:28 2012 +0100

    Ensure glance-api application is "greened"
    
    Fixes bug 1052640
    
    Avoid unresponsiveness during long-lived I/O-bound operations by
    ensuring that the standard socket libraries are monkey-patched in
    all code-paths.
    
    Change-Id: If672c26f2b462d1abcfc86e20256957f73f98fde

commit c4173820b0e5836e1af99a428b140647c1db70af
Author: Paul Bourke <paul-david.bourke@hp.com>
Date:   Tue Sep 18 12:40:40 2012 +0100

    Fix scrubber start & not scrubbing when not daemon
    
    1) Scrubber not starting
    When the scrubber is run from the command line or via cron, it would try
    to call it's app object which resulted in a TypeError.
    
    2) Scrubber not scrubbing
    In the same usage scenario as above, the delete jobs added to the
    starmap are never started.  A slight delay is enough to start these.
    
    Also add a functional test designed to excercise the scrubber when run
    in "regular mode", which covers both these cases.  I've run the test
    successfully with 1000 images, which should be enough to prove the
    sleep(0.1) does the trick.
    
    Fixes bug 1052537.
    
    Change-Id: If29704d8a425194085b59b7dfd265ffaef16302c

commit b0df8973e58761cd0d43d6eceea80f660a5df3eb
Merge: c54c92e d6e19d3
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Sep 19 10:22:50 2012 +0000

    Merge "Don't WARN if trying to add a scheme which exists." into milestone-proposed

commit d6e19d35ef99d887ad053b2c63e58ca2ff160020
Author: Dan Prince <dprince@redhat.com>
Date:   Thu Sep 13 22:48:58 2012 -0400

    Don't WARN if trying to add a scheme which exists.
    
    Updates the register_scheme_map function in store/location.py so that
    it registers new scheme maps only if they don't already exist.
    Also, removes the warning message that was previously logged if
    a duplicate entry was found. Since both Glance v1 and v2 controllers
    attempt to register scheme's this seems reasonable and shouldn't cause
    any problems with how things work.
    
    This fixes an issue where Glance API logs always had warning messages
    stating it was 'Overwriting scheme' information even though everything
    is configured correctly.
    
    Fixes LP Bug #1050711.
    
    Change-Id: Ief539187f9c64a3b2de6d431b1e2ffc9e07e5c90

commit c54c92e87aa89ceae97453af73007c5523818abb
Author: Russell Bryant <rbryant@redhat.com>
Date:   Fri Sep 14 15:08:11 2012 -0400

    Change qpid_heartbeat default.
    
    The default value of qpid_heartbeat of 5 seconds is unnecessarily
    aggressive.  Change it to 60 seconds to reduce the possibility of
    getting disconnected from qpidd under normal circumstances.
    
    Fix bug 1050661.
    
    Change-Id: I9525e74f96314c2c9183d6b10cf503936c81f589

commit 812101ae5cdf53a1c6deb294ec92a0ee1e4f3fcc
Author: Mark Washenberger <mark.washenberger@rackspace.com>
Date:   Tue Sep 11 22:59:52 2012 +0000

    Add region configuration for swift
    
    Addresses bug 1050034
    
    Change-Id: Ib83f5dbb2c1fbeacd741e0cb92b619e67b2243c7

commit 0315ad5b961beca9cf51db66fdc98913c4be4cf7
Merge: 5c55801 059c036
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Sep 12 23:23:24 2012 +0000

    Merge "Update v2.0 API version to CURRENT" into milestone-proposed

commit 5c55801c1f3b6c940c6272d8d6a7419e2b06245c
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Tue Sep 11 21:05:08 2012 -0700

    Update openstack-common log and setup code
    
    Pull in changes up to commit 95cd3a7fad2d0335c65394379c35a798df9d25b4
    
    Change-Id: I628f15aa6367ab2af7912f1b5324055a0fc3c20a

commit 059c036f60bde2a45413f144c052d8ae51a15fb8
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Tue Sep 11 16:07:01 2012 -0700

    Update v2.0 API version to CURRENT
    
    The v2.0 API is stable, so we need to communicate this fact to the
    consumers of Glance. This updates the status of the v2.0 version
    entity in responses from / and those that result in a 300 Multiple
    Choices status code from 'EXPERIMENTAL' to 'CURRENT.'
    
    Change-Id: I9e4514025904d7be2e947c6d14ccb90b6b066f8c

commit aaf36cbe29a24c476e91ed9b20584d7081a95ff8
Merge: 539c7bc 4de8670
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 11 21:26:41 2012 +0000

    Merge "Add s3_store_bucket_url_format config option"

commit 539c7bc32038e86a3a54b87e6e1ef46bd1429635
Merge: 254a8e6 69389a6
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 11 19:46:32 2012 +0000

    Merge "Fallback to a temp pid file in glance-control"

commit 4de8670bcbb4e977f1d550bcf470926bbd77803f
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Mon Sep 10 21:21:51 2012 -0700

    Add s3_store_bucket_url_format config option
    
    Swift's implementation of the S3 interface doesn't support subdomain
    access to containers. It requires that the bucket be prepended to the
    request path. The option 's3_store_bucket_url_format' can be set to
    either 'path' or 'subdomain' (default) to control how boto forms
    the bucket url.
    
    Fixes bug 997658
    
    Change-Id: Ia6e1e7356eef7ac2267f7738e2f4a7c70dc12eeb

commit 254a8e664d4eb09c0f104d0cffdd14b217eddb78
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Mon Sep 10 16:28:04 2012 -0700

    Ensure status of 'queued' image updated on delete
    
    Images in 'queued' status (and those without a location attribute)
    were not being updated with a status of 'deleted' when a DELETE
    action was taken on them through both the v1 and v2 APIs. This
    patch ensures that both APIs correctly update the images.
    
    Fixes bug 1048851.
    
    Change-Id: I9604d4ce5d59066fb108625df0fa114cc044d604

commit 69389a644205fa193be6b80fcb149dd940b2e3e0
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Mon Sep 10 19:03:30 2012 +0000

    Fallback to a temp pid file in glance-control
    
    Fixes bug 1046593.
    
    Previously if the pid file was not writeable by the current user
    then glance-control bombs out, *after* spawning the required service
    but *without* caching the process ID anywhere.
    
    Now we fall back to a temporary file, so that at least user can supply
    that file to the corresponding glance-contol stop command.
    
    Change-Id: I6c1daf36221f731fdb5a8bb59d3f91a595337af8

commit 3bfd7bd56c1a8ebc8aff1218c52ac13b66cabb9f
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Wed Sep 5 13:55:46 2012 -0400

    Raise bad request early if image metadata is invalid
    
    Image data is currently uploaded into the backend store even if it is a bad
    request. This patch add value validation in the deserializer so we don't set bad
    data. It also does a full validation of the image metadata to make sure
    everything that is needed for an image upload is set correctly before the upload
    can occur.
    
    There were currently some relevant tests that had incorrect names causing them
    to not run. These have been fixed and modified.
    
    Fixes bug 1035982
    
    Change-Id: I6f3ef83ba7b3de3cb885fad9737fef1a03d9222c

commit 45198f4a0cfbadd013a1aa99515256d2e0a2dfcb
Merge: 15702c4 c008cef
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Sep 7 20:15:05 2012 +0000

    Merge "Return actual unicode instead of escape sequences in v2."

commit 15702c4069bd2019c2d78a5f6adcafd12b276bd4
Merge: f0bd856 3684d8d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Sep 7 19:58:10 2012 +0000

    Merge "Handle multi-process SIGHUP correctly"

commit c008cef084c6362277e88569831ac09d81837327
Author: Eddie Sheffield <eddie.sheffield@rackspace.com>
Date:   Thu Sep 6 17:13:21 2012 -0400

    Return actual unicode instead of escape sequences in v2.
    
    Ensured that when images are serialized to json unicode characters
    are preserved as-is rather than being translated to ASCII escape
    sequences.
    
    Fixes bug 1045455
    
    Change-Id: Ica6dc222bb8c8049cba7049720442d4c5bbb7d32

commit f0bd85670c1b9d6d72e177ca2ec4bb6deed34d7e
Merge: 8e17990 41c1641
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Sep 7 14:00:14 2012 +0000

    Merge "Asynchronously copy from external image source"

commit 3684d8d42a1f7f972a91763f5a85465c575ebbd8
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Fri Sep 7 10:52:26 2012 +0000

    Handle multi-process SIGHUP correctly
    
    Child processes were returning to the main while loop
    and spawning a next generation of processes. Instead
    they should exit cleanly.
    
    Fix for bug 1042823.
    
    Change-Id: I8c0d150640c78487b43279a44d0d6d3ac3e386cc

commit 8e179904069d37608389f40a386609fb03bfaf43
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Wed Sep 5 16:37:30 2012 -0700

    Remove extraneous whitespace in config files
    
    One can not simply remove the hash mark in front of a commented-out
    config option if there is a space following it. This patch removes
    that extraneous whitespace.
    
    Change-Id: Id084eef34a9e894de3f67b2919d55879cd9a715e

commit 09dc108007f6343eebc9f1e867dc1a09a4565936
Merge: 3970063 1cfb025
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Sep 5 23:31:18 2012 +0000

    Merge "Remove db auto-creation magic from glance-manage"

commit 1cfb025d73d3d347e6f6465fcb249c41aef90572
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Tue Aug 28 13:03:07 2012 -0700

    Remove db auto-creation magic from glance-manage
    
    This removes the reliance of glance-manage db_sync on configure_db
    calling register_models.
    
    Fixes bug 1042925
    
    Change-Id: Id93283905256247bdd2663b799d41a7925804542

commit 39700637e3862cc1c30de0dc245f2caed2692982
Author: isethi <iccha.sethi@rackspace.com>
Date:   Fri Aug 31 17:53:32 2012 +0000

    Makes deployed APIs configurable
    
    Uses config options enable_v1_api and enable_v2_api
    to control which APIs have been deployed.
    (Thanks markwash for all the help)
    
    Fixes bug 1043497
    
    Change-Id: I42dc1d88f94e61b9550c5f114ffc1abad25be7ff

commit 41c164139cab619d0a3e0d97b80037f85eb541ad
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Wed Sep 5 14:33:47 2012 +0000

    Asynchronously copy from external image source
    
    Fixes bug 1008874, bug 1046433.
    
    Avoid tieing up dispatch thread for large copy-from images,
    instead initiate copy asynchronously.
    
    The response status is not set to 202 Accepted as per standard
    RESTful idiom, as a non-error response code change requires
    an API version bump.
    
    Instead, the incomplete nature of the image registration is
    reflected in the image status.
    
    Change-Id: I06692422490de0a7d93f63bbd0ffb9c6435a0d2b

commit 3d4e962dac2a307f3f6f9c98fc85fe51a55f4367
Merge: c5eece3 c82ae99
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Sep 5 18:49:59 2012 +0000

    Merge "Exception Handling for image upload in v2"

commit c5eece3b978040b7cd6bea0a1faade8c36a52c56
Merge: ac8cfb6 b020b7e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Sep 5 18:20:45 2012 +0000

    Merge "Remove bad error message in glance-cache-manage"

commit ac8cfb6976ccff7aac80ba12cbb072aa9516bcbd
Merge: 3a96fc9 7037fc8
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Sep 5 18:19:35 2012 +0000

    Merge "Call do_start correctly in glance-control reload"

commit 3a96fc954e406b8565ad0490908cd74b9e736c29
Merge: d5b2a21 2f6526b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Sep 5 18:19:00 2012 +0000

    Merge "Sort UUID lists in test_image_get_all_owned"

commit d5b2a21ca1817a25d36c1abd4b89486998e2db3d
Merge: 4234d4b 95e00c9
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Sep 5 18:17:11 2012 +0000

    Merge "Fix cache not handling backend failures"

commit 4234d4b2adb83c4680bdbf9c707d579e8746dbdf
Merge: cc9910b eede5f3
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Sep 5 18:11:52 2012 +0000

    Merge "Sync some misc changes from openstack-common"

commit 2f6526b10cc7b15f7cb76b94cad3c47ff5ebd000
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Wed Sep 5 16:44:58 2012 +0100

    Sort UUID lists in test_image_get_all_owned
    
    Ensure UUID list comparison is order-independent, to avoid spurious
    failure from the test_image_get_all_owned test case.
    
    Change-Id: I78743a65978b2f1c10adb66b7128c9f438393796

commit 7037fc818b3df6d657581b8ae84e7cc68562ef42
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Thu Aug 30 16:50:59 2012 -0700

    Call do_start correctly in glance-control reload
    
    * Rename test_respawn functional test module to test_bin_glance_control
    * Add 'reload' and 'reload_server' calls to functional test helpers
    
    Fixes bug 1044119
    
    Change-Id: Ide63fdb9f78cd4d6a1cdb7b9f37a10694a7dddd3

commit eede5f32e50fdfb05d8376d9d9d4653805f61a45
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Wed Sep 5 11:28:53 2012 +0100

    Sync some misc changes from openstack-common
    
    Syncs the following from stable/folsom:
    
     5a56539 Allow non-string items in the creds dict.
     769ec65 Don't trap then re-raise ImportError.
     202b8b7 Fix spelling typos
     6a22ea4 Remove unused imports
     01b4f31 Support for marshalling datetime while preserving microseconds.
    
    Change-Id: I31aba154fb1743b771ca9c1d4befa5ee563ca20c

commit cc9910b50f6153b46546a94549cefa75c28d6aa8
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Wed Sep 5 11:27:58 2012 +0100

    Sync latest cfg changes from openstack-common
    
    Syncs the following changes from stable/folsom:
    
     4dc2043 cfg: clean up None value handling
     513bd3a Allow set_default and set_override to use None
     0a36c92 Tilde expansion for --config-file and --config-dir
     038d597 Add import_opt() method to ConfigOpts
    
    Change-Id: I615cdbd6dc7c3ec0218252c202f24c2a2d3aa387

commit d7041f500bbe03e07f38ad42f4d16325b96be45b
Merge: d702576 ec1a9f8
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Sep 5 06:11:38 2012 +0000

    Merge "Add kernel/ramdisk_id, instance_uuid to v2 schema"

commit d70257623a7fe3d4f2261d5fe5195bbc0992bf4c
Merge: fcaf251 c59f0ab
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Sep 5 06:01:36 2012 +0000

    Merge "Encode headers in v1 API to utf-8"

commit fcaf251f6de34a47dc03cbe4a6cecb0285107e58
Merge: 2a79e6e 112fc71
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 4 22:24:31 2012 +0000

    Merge "Instantiate wsgi app for each worker"

commit c82ae99bcb5f7d413887cf9a0a197a9fba683c73
Author: isethi <iccha.sethi@rackspace.com>
Date:   Mon Aug 20 16:10:03 2012 +0000

    Exception Handling for image upload in v2
    
    Adds logging and exception handling for image data controller
    in glance v2
    
    Fixes bug 1037979
    
    Change-Id: Ieba0b9766d7c205e361a3d9a9618300af815beb5

commit 2a79e6e1763c335d3b1fc174992c44c4333db787
Merge: b73a1ad 3917fdf
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 4 20:19:44 2012 +0000

    Merge "Add missing columns to migration 14"

commit b73a1ad494bbcd9c43c60fed0778f4acbf11bd78
Merge: de76fbf 4f36fba
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 4 18:48:55 2012 +0000

    Merge "WARN and use defaults when no policy file is found"

commit de76fbf0357f81d9a5a31d64d5c355e1f4fdd135
Merge: 1d91a4d 6388bfa
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 4 18:05:26 2012 +0000

    Merge "Adds registry logging"

commit 95e00c9247d5c56c1184d788ca8c1f9b165a25ba
Author: Paul Bourke <paul-david.bourke@hp.com>
Date:   Mon Sep 3 11:17:54 2012 +0100

    Fix cache not handling backend failures
    
    1) caching_iter doesn't handle backend exceptions:
    
    caching_iter assumes any exception that occurs is the result of being
    unable to cache.  Hence the IOError raised from size_checked_iter, which
    indicates a problem with the backend, means the caching_iter will
    continuing trying to serve non-existent data.  The exception was not
    been re-raised in this case, making wsgi keep the connection open and
    clients stuck forever waiting for more data.
    
    Raising a GlanceException in size_checked_iter rather than an IOError
    allows caching_iter to distinguish between a problem fetching data, and
    a problem writing to the cache.
    
    2) Checksum verification happens after cache commit rather than before:
    
    This block was outside the context manager block which meant the
    GlanceException was not caught by open_for_write and the rollback didn't
    happen.  This resulted in an error been logged, but the bad image still
    placed in and subsequently served from the cache.
    
    Also:
    
    * Fix test_gate_caching_iter_bad_checksum - the loop to consume the
      iterator in was in a subroutine that never got called.
    
    * Move test_gate_caching_iter_(good|bad)_checksum into
      ImageCacheTestCase to excercise both the sql and xattr drivers.
    
    * Remove invalid registry_host/registry_port params from
      TestImageCacheXattr/TestImageCacheSqlite setup which caused a failure
      when testing the file on it's own using nosetests.
    
    Fixes bug 1045792
    
    Change-Id: I8aedec347e7f50566c44c5b6c6db424573c5ebaf

commit 112fc71ba453c2f43ce5ccb91108a504bcd6b5b6
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Sat Aug 18 16:50:15 2012 -0400

    Instantiate wsgi app for each worker
    
    A single WSGI app, and therefore a single sqlalchemy engine (mysql
    connection), was being used across all API workers. This patch
    instantiates the WSGI app once per worker rather than up front to
    give a separate database connection to each worker.
    
    Fixes bug 1036193
    
    Change-Id: I2cbb61fd88a6ec4fb03fa84196ba0a380b3842d0

commit 1d91a4dc2b74d224ea12947d672aa66a576d9d9a
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Thu Aug 30 14:38:34 2012 -0700

    Require 'status' in simple db image_create
    
    Since the sqlalchemy driver requires that 'status' be set in an
    image_create call, this makes the simple driver follow suit.
    
    Related to bp glance-simple-db-parity.
    
    Change-Id: I0b6809e467fa8aecfefcd7017cd198ca0691a236

commit b7b2a0997bccd0b0135cdc10bca338bc6dcee7fb
Merge: ded91c8 a95ec3d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 4 02:49:52 2012 +0000

    Merge "Always call stop_servers() after having started them in tests"

commit ded91c829b90f560d0bfbdc526cb480a67110283
Merge: 5b9fc72 c4f7816
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 4 02:40:58 2012 +0000

    Merge "Fix LP bug #1044462 cfg items need secret=True"

commit 5b9fc72226ecdab50bf36c67622689fd23cb1b87
Merge: 7ca319d 1f3ae60
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 4 00:13:16 2012 +0000

    Merge "Limit simple db image_create to known image attrs"

commit 7ca319dd9f11600fb54aeb8ba84d2f3a136f9b09
Merge: 9701878 97915a7
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 4 00:12:47 2012 +0000

    Merge "Raise Duplicate on image_create with duplicate id"

commit 970187873ec708f6a064689b5e2300023f140298
Merge: 1d6a10e af6b8a6
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 4 00:03:46 2012 +0000

    Merge "Expand image_create db test"

commit 1d6a10e3e0cfadd516698d183f2069b077d6f63c
Merge: 2a3c185 a0288ab
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 4 00:01:49 2012 +0000

    Merge "Add test for nonexistent image in db layer"

commit 2a3c185d1efbf1ab68c7c4347dacaa5158830032
Merge: a31caab abcff5b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 4 00:00:32 2012 +0000

    Merge "Catch pruner exception when no images are cached"

commit a31caab7718fce412e61f7072598abbd7f15090d
Merge: afcd07b e7d6210
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Sep 3 21:23:15 2012 +0000

    Merge "Document how to deploy cachemanage middleware"

commit afcd07b69a95f28ebb336e40a606ca0ad3493ee5
Merge: e24d460 48bb44b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Sep 3 21:11:47 2012 +0000

    Merge "Drop glance client + keystone config docs"

commit e24d460308a8cac280f823f21c7c827b9cbfa1db
Merge: af32f24 d43666b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Sep 3 21:11:09 2012 +0000

    Merge "Delete image from backend store on delete."

commit af32f24857dd3b0354f90393f7367c4cf938a329
Merge: 9736d29 9c94a72
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Sep 3 21:10:52 2012 +0000

    Merge "Use PATCH instead of PUT for v2 image modification"

commit 48bb44b9aa52058bc8e97febc2a0fafa5d53624c
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Wed Aug 29 08:55:20 2012 -0700

    Drop glance client + keystone config docs
    
    The blurb about configuring glance client doesn't belong in the
    server project documentation. This removes it.
    
    Related to bp glance-folsom-docs-cleanup
    
    Change-Id: I3932e1af382813bf069f4920218dd60cd04790f5

commit 9c94a72c14ccd94df0c6239c2bfe70337d693b39
Author: Mark Washenberger <mark.washenberger@rackspace.com>
Date:   Mon Aug 27 06:42:33 2012 +0000

    Use PATCH instead of PUT for v2 image modification
    
    With the previous partial put syntax in the v2 api, it was not possible
    to delete image properties. This patch provides a more expressive syntax
    in the form of the HTTP PATCH verb. This implementation depends on the
    `application/openstack-images-v2.0-json-patch` content-type which is
    intended to be a compatible subset of application/json-patch.
    
    Addresses bug 1039821.
    
    Change-Id: I510ab397f9b8b5bd1deec0fb25855e305e7ec86e

commit d43666bce77bdc67146c23663b8a21746d7d41ce
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Mon Aug 27 14:00:59 2012 -0400

    Delete image from backend store on delete.
    
    Two things have been done for this patch, schedule_delete_from_backend has
    been split into two functions: safe_delete_from_backend and
    schedule_delayed_delete_from_backend. If the API is not configured for
    depalyed delete safe_delete_from_backend is called, which immidiately
    deletes the image from the backend store and status set to deleted.
    Likewise, if the API is configured for delayed delete,
    schedule_delayed_delete_from_backend will be called which writes out a new
    file in the scrubber_datadir named with the image id and containing the
    backend uri and delete time. The image's status is then set to pending_delete
    and the scrubber will then delete the image at the appropriate time.
    The other main change is pulling the status updates out of the backend delete
    functions. In this case they are done in the API after each respective type
    of delete. All other changes were around testing and dependancy injection,
    specifically the ability to inject a fake StoreAPI.
    
    Fixes bug 1039897
    
    Change-Id: I8a13b8c302b13ba219b1edcc128d02481ed7666e

commit e7d6210e70c35c0a163b455a2b1b6f81f6fc5dd6
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Thu Aug 30 11:00:38 2012 -0700

    Document how to deploy cachemanage middleware
    
    Related to bp glance-folsom-docs-cleanup
    
    Change-Id: If72a82222ebf33b08bbceba2d780bddfe7b7aad0

commit 9736d299a4f8e2270b5da6261cfb7a86f67ec885
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Thu Aug 30 10:50:39 2012 -0700

    Clean up comments in paste files
    
    * Reduce comments in paste files to just what is necessary
    * Add a 'cachemanage' pipeline to complete our set of paste
      deploy flavors in glance-api-paste.ini
    * Add a sample [paste_deploy] section to both glance-api and
      glance-registry configs
    
    Related to bp glance-folsom-docs-cleanup.
    
    Change-Id: I0208b12f6861b48e52260b25802c47ebf6316b9a

commit 4f36fba9969e77d01f3e296d946e6e11f1d0e82f
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Wed Aug 29 14:34:10 2012 -0700

    WARN and use defaults when no policy file is found
    
    Rather than refuse to start, it's nicer to use a sane set of default
    policies when no policy file is found.
    
    Fixes bug 1043482
    
    Change-Id: I849737c61c0266952d931395fbc2ad3745c46f6e

commit c59f0ab00590dec21af6f92aacdb0b73793c58db
Author: Vincent Untz <vuntz@suse.com>
Date:   Tue Aug 21 17:17:22 2012 +0200

    Encode headers in v1 API to utf-8
    
    We're getting data from the registry via JSON, which means the values
    are of the unicode type. We want to output utf-8, otherwise this won't
    work if we use glance through mod_wsgi.
    
    Fix bug 1042078.
    
    Change-Id: Iadb215003db57ab25d9919341e6aba195835531c

commit c4f781632069a0554f1595f65dacfc85081dff96
Author: Tom Hancock <tom.hancock@hp.com>
Date:   Fri Aug 31 16:10:45 2012 +0000

    Fix LP bug #1044462 cfg items need secret=True
    
    Redact sensitive log information such as
    sql_connection
    metadata_encryption_key
    admin_password
    admin_user
    admin_tenant
    when cfg item summaries are printed in logs
    
    Change-Id: I74cfeae4b8bdbd405fbc4baca763a62f4470b154

commit a95ec3d893b3c3ced4489a40ca4d8144ae65e310
Author: Vincent Untz <vuntz@suse.com>
Date:   Mon Sep 3 08:45:57 2012 +0200

    Always call stop_servers() after having started them in tests
    
    Several functional tests were not stopping the servers.
    
    Fix bug 1043416.
    
    Change-Id: I362e116089e6baa3e8f9ab16be1d6c54dbf957da

commit 3be563029a45e74e18286a6e327734543497a5bf
Merge: e0fdcb0 3b7b43f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Sep 1 08:19:30 2012 +0000

    Merge "Log level for BaseContextMiddleware should be warn"

commit e0fdcb0619eb7ec5785e9f42fd5d2237872773ca
Merge: a5411d2 80c099e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Sep 1 07:16:45 2012 +0000

    Merge "Adds notifications for images v2"

commit 6388bfacb6a063e020eaa2813f6188d883aed5c3
Author: Brian Rosmaita <brian.rosmaita@rackspace.com>
Date:   Tue Aug 28 16:46:55 2012 +0000

    Adds registry logging
    
    The registry API currently only logs the sqlalchemy debug output. Added
    log messages at the API level.
    
    Fixes bug 1041238
    
    Change-Id: I90f015ad26cd67a449dfa0fa0697f94d493644bf

commit a5411d240508ddc06660562d55924cd4264e3d07
Author: Mark Washenberger <mark.washenberger@rackspace.com>
Date:   Thu Aug 30 23:52:45 2012 +0000

    Filter out deleted image properties in v2 api
    
    Fixes bug 1044127
    
    Change-Id: Ibc35f51d7f80986639c7a62b6325762e6a2b7bfb

commit 1f3ae60f9262265975ac829c673ca8173eef8e88
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Thu Aug 30 14:07:11 2012 -0700

    Limit simple db image_create to known image attrs
    
    Ensure image_create requests are limited to a list of known
    image attributes.
    
    Related to bp glance-simple-db-parity.
    
    Change-Id: I8314f31dcf87c87ee3bba89334be33dc4a1555b2

commit 97915a72e09c7f88171b6cc96e8c8cf3a58a906a
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Mon Aug 27 16:12:56 2012 -0700

    Raise Duplicate on image_create with duplicate id
    
    The simple db would allow a user to create new images using IDs
    that belonged to existing images. This patch corrects that behavior
    and adds a test.
    
    Related to bp glance-simple-db-parity.
    
    Change-Id: I42a036f81e61413e789d87100f58b45b8cc75d38

commit af6b8a677aef25cab40ec24427dbf5f081616c08
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Mon Aug 27 16:03:39 2012 -0700

    Expand image_create db test
    
    Ensure the test that checks for default values when calling
    image_create is expecting the right things. The simple db driver
    needed some love to get it to pass the thicker test.
    
    Related to bp glance-simple-db-parity
    
    Change-Id: I80f0ee55ff5ec18e544b91bed218e8c6e3b06a84

commit a0288ab538c641825c490807b64d12b6b9871c51
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Mon Aug 27 15:47:42 2012 -0700

    Add test for nonexistent image in db layer
    
    Related to bp glance-simple-db-parity.
    
    Change-Id: I1fcfa80089937e9dec9d637f2227561febb43183

commit c8d408f23486804fc7b4e592e2c1727330abc831
Merge: f79d9de 991e4bd
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 30 21:01:57 2012 +0000

    Merge "Tweak doc page titles"

commit f79d9dec28164f5fa3395619cd5f79954af98bb9
Merge: 2ca54d8 17ae9b2
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 30 21:01:48 2012 +0000

    Merge "Drop architecture doc page"

commit 2ca54d81e2e8022dcc6bae39d87f62481d43486b
Merge: 02765fb cfa2915
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 30 21:01:24 2012 +0000

    Merge "Add link to notifications docs on index"

commit 02765fbf47956aba84d6e81ba1a20da549c4b21e
Merge: 3b1e1a1 34d6335
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 30 21:01:00 2012 +0000

    Merge "Remove repeated image-sharing docs"

commit 3b1e1a1d055a4d689435f9b0958b546ae8261c24
Merge: b06ac31 7a0d2eb
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 30 21:00:36 2012 +0000

    Merge "Tidy up API docs"

commit b06ac3118413f4657f5e363f86e6fcb2ecb9e21a
Merge: 6275a28 b719704
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 30 20:53:31 2012 +0000

    Merge "Move authtoken config out of paste"

commit abcff5b5f5b2b89bf788f6e5447a85c320e5a26c
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Wed Aug 29 21:17:46 2012 -0700

    Catch pruner exception when no images are cached
    
    This handles a situation where the pruner would raise an exception when
    the image_cache_max_size was set lower than the size of the last image.
    
    Fixes bug 1039854
    
    Change-Id: I4a6c164e9f821f1250314974f829f058fbd02863

commit b020b7e041da5a8c3d52d6c116253c9fcf1b5c79
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Wed Aug 29 17:32:34 2012 -0700

    Remove bad error message in glance-cache-manage
    
    The error message covering unauthorized requests implies that the
    caller hasn't set the appropriate authentication values. What
    is more likely is that the values are set but the user just
    doesn't have permission to use the tool.
    
    Change-Id: I95f4c1b6fc650b6bf8c11a4e343e1b54c14310f9

commit 6275a28abe729e04e44ad51ff79e9e3d92c7f997
Merge: 4c038b0 e97fa4b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Aug 29 23:36:15 2012 +0000

    Merge "Raise Forbidden exception in image_get"

commit 3917fdf3b0c69019303522109d96b9c3d9ff19e2
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Tue Aug 28 18:50:06 2012 -0700

    Add missing columns to migration 14
    
    This adds created_at, updated_at, and deleted_at to database
    migration 14.
    
    Background Info!
    
    If a new database is created at version 14, it doesn't run any
    migrations scripts. It lets sqlalchemy create the database from a
    set of sqlalchemy models.
    
    When an existing database is upgraded to version 14, it will use
    the migration script. What's important to note is that this is
    currently impossible due to bug 1042925.
    
    While it is typically bad practice to alter a migration script, this
    is a special case as nobody could have used it. What this patch does
    is complete the migration script in preparation for a future patch
    down the road to fix the bug referenced above.
    
    Fixes bug 1043041
    
    Change-Id: I6dc2afa735fb2f82df71d58b10c1e1530fce2f89

commit 80c099e0b41b3f2f9684b06f1f4eee8e2776969e
Author: isethi <iccha.sethi@rackspace.com>
Date:   Wed Aug 22 16:44:13 2012 +0000

    Adds notifications for images v2
    
    The v2 API didnt generate any notifications. It should
    send same as those that v1 API has
    
    Fixes bug 1038552
    
    Change-Id: Ieab82937822ad907493d4b538fd75e571416bf16

commit b7197041fec50d485b2f0947e2a268cb497a9230
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Wed Aug 29 12:22:13 2012 -0700

    Move authtoken config out of paste
    
    Since we can now configure Keystone's auth_token middleware using
    our own config files, we should ship our example config to show
    how this is done. This moves the auth_* variables out of
    glance-api-paste.ini and glance-registry-paste.ini into
    glance-api.conf and glance-registry.conf.
    
    Fixes bug 1043490
    
    Change-Id: Ibdaf8b2ef0f55e5e892fbd1b994dceb323f07c7b

commit ec1a9f8988686dafc768338fc69cbf99c4f82860
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Wed Aug 29 09:31:38 2012 -0700

    Add kernel/ramdisk_id, instance_uuid to v2 schema
    
    Nova depends on a few properties to be able to interact with
    images in Glance effectively. The three added in this patch
    are kernel_id, ramdisk_id and instance_uuid. These properties
    are just being added to the default v2 schema, so they can
    be overwritten if a consumer decides they need to.
    
    Fixes bug 1039818
    
    Change-Id: I5cfd5f0b5c8d1d526d56d99de738f9271aa641c1

commit 991e4bd8def597c1b806ca3afa5a3eb62116e5c0
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Mon Aug 27 10:16:39 2012 -0700

    Tweak doc page titles
    
    Related to bp glance-folsom-docs-cleanup
    
    Change-Id: Ifc4d8371c0752997258e19e7b149ae88ec3413b0

commit 17ae9b28467ecc05df93b28faa12971b209843bd
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Mon Aug 27 10:08:36 2012 -0700

    Drop architecture doc page
    
    Related to bp glance-folsom-docs-cleanup
    
    Change-Id: If4d187e5c96e337f0df0134a101ad1bac061dc80

commit cfa2915f953fc08f2858d0f93dc326f284a194bf
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Thu Aug 23 12:13:24 2012 -0700

    Add link to notifications docs on index
    
    Related to bp glance-folsom-docs-cleanup
    
    Change-Id: Ib0c65fe2bf724199e13107325175541be85bfb29

commit 34d6335672f137d82c1c8465dbfc14bcb878fc4e
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Wed Aug 22 20:00:14 2012 -0700

    Remove repeated image-sharing docs
    
    * Drop image sharing blurb from authentication docs.
    * Link to authentication page from api page
    
    Related to bp glance-folsom-docs-cleanup
    
    Change-Id: Idac46a78f79fac0c673f6a9b91c1f44df7b705b4

commit 7a0d2eb6cdf48d446174412e7791333c9ca1bca8
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Wed Aug 22 19:55:27 2012 -0700

    Tidy up API docs
    
    * Add bit about images api vs glance
    * Explain how to send auth token
    * Prepend '/v1' to example URIs
    
    Related to bp glance-folsom-docs-cleanup
    
    Change-Id: I2c3b568e463f62033268573f50f2d8a74d053965

commit 3b7b43f8ff8a9860bcc24ad89c0f03df26fb7205
Author: isethi <iccha.sethi@rackspace.com>
Date:   Wed Aug 29 14:42:09 2012 +0000

    Log level for BaseContextMiddleware should be warn
    
    The current log level is error for BaseContextMiddleware.
    It is toned down to warn in this patch.
    
    Fixes bug 1043374
    
    Change-Id: I468183b374f06b0afad3d559fdb2c09ac0663105

commit 4c038b0d85ebe0a0bc793b8bab1f44dd48eb0166
Merge: 24c0728 c068c7f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Aug 29 00:35:25 2012 +0000

    Merge "Add 'bytes' to image size rejection message"

commit 24c072881a939739df100b77040e892391aba0db
Merge: f57fc69 f8467bf
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Aug 28 23:58:31 2012 +0000

    Merge "HTTPBadRequest in v2 on malformed JSON request body."

commit f57fc69b1be5a0da3e377aa4f5f8efc1132d7b96
Merge: 8513883 37d1c1d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Aug 28 23:58:19 2012 +0000

    Merge "Remove partial image data when filesystem is full"

commit 8513883892b6933b27abd7ee0b5e0524030f0cd5
Merge: c88e07f 87033d0
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Aug 28 22:53:42 2012 +0000

    Merge "Rename glance api docs to something more concise"

commit c88e07ff7a5069bf8aced847e8236f5510776af2
Merge: 5d6b75d 37dc071
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Aug 28 22:53:27 2012 +0000

    Merge "Drop deprecated client docs"

commit 5d6b75dde4e4541e64a4f8714bb831d1b93b0d60
Merge: 0f2e8bf 087046b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Aug 28 22:52:54 2012 +0000

    Merge "Clean up policies docs page"

commit 0f2e8bf4c5160579bf5ce0d6ca044c69aa73944a
Merge: 59eb870 07b72c3
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Aug 28 22:52:22 2012 +0000

    Merge "Fixes issue with non string header values in glance client"

commit 59eb870cbd6da5d0532046797b4aa4a42d2f48e1
Merge: 926823c d912a5d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Aug 28 22:44:15 2012 +0000

    Merge "Activation notification for glance v1 api"

commit e97fa4bd4f7584c2d0b8d976c770dbe5705ce962
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Mon Aug 27 15:42:49 2012 -0700

    Raise Forbidden exception in image_get
    
    The simple db driver now raises 'exception.Forbidden' when a caller
    tries to access an image that is not owned by the provided context.
    The list of images returned by image_get_all will also be filtered
    to match what the sqlalchemy driver is expected to return.
    
    Related to bp glance-simple-db-parity.
    
    Change-Id: Idb2b85252d5ad33194d3bd8b5d8a9bc368968bd0

commit 926823c14caeca66e5fa89c99bcea0fdd54bf7c5
Merge: cfb9709 11a9a48
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Aug 28 06:39:44 2012 +0000

    Merge "Remove autodoc and useless index docs"

commit cfb9709a255132f14afbd64a0d0af1a86b6a7236
Merge: 9c4c810 dc6ef98
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Aug 27 16:50:04 2012 +0000

    Merge "Typo fix in glance: existant => existent"

commit 9c4c8102735dc246d3e2daade4d48a723c45e402
Merge: 8e9fcba dcca6cd
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 24 23:42:52 2012 +0000

    Merge "PEP8 fix in conf.py"

commit 8e9fcbaa7802f6f714fcb1a8544a9cb506cb3ec9
Merge: 717cb2b 5d206b4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 24 23:00:11 2012 +0000

    Merge "Correctly re-raise exception on bad v1 checksum"

commit 717cb2bdfdcd6dcd1c8e2b23a3600059fa9ed674
Merge: eb8c956 309a441
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 24 22:57:24 2012 +0000

    Merge "Add nosehtmloutput as a test dependency."

commit d912a5df135eb383d91277682090dfd065c8de91
Author: isethi <iccha.sethi@rackspace.com>
Date:   Thu Aug 23 17:48:58 2012 +0000

    Activation notification for glance v1 api
    
    Sends notification after activation of image in glance
    v1 api
    
    Fixes bug 1038190
    
    Change-Id: Ic535ce37cd9df652b94b0ed152b5b87dcec28ecf

commit eb8c956753fb7b3c6d016a79d4a9297075f4229d
Author: Clark Boylan <clark.boylan@gmail.com>
Date:   Wed Aug 22 17:04:23 2012 -0700

    Add glance/versioninfo to MANIFEST.in.
    
    Fixes bug #1040734
    
    Adding glance/versioninfo to MANIFEST.in adds the versioninfo file to
    sdist packages. Adding this file to sdist packages allows versioning to
    work properly when installing from an sdist package.
    
    Change-Id: I7c9d2843e428fb0da1ffb461410c75a25a6e51d0

commit f8467bfcef0795153fa7b6488bf866b6628669af
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Thu Aug 23 11:10:28 2012 -0400

    HTTPBadRequest in v2 on malformed JSON request body.
    
    Fixes bug 1039901
    
    Change-Id: I79ff2059f8f4de60cc92f8cf89cd80be74529e3c

commit dcca6cd96c46bff0695e3e5b28782f7d3038d39f
Author: Ray Chen <oldsharp@163.com>
Date:   Thu Aug 23 12:24:09 2012 +0800

    PEP8 fix in conf.py
    
    Fix PEP8 issues in doc/source/conf.py.
    
    Change-Id: Ia35ad77af3c74ffd4c67bc6eef662b038937fdad

commit dc6ef98a4b8f9cc2bd379e4e6583ceb5dec50b89
Author: Rongze Zhu <zrzhit@gmail.com>
Date:   Thu Aug 23 03:31:36 2012 +0000

    Typo fix in glance: existant => existent
    
    Impact:
    * Test function names
    * Test strings and comments
    * Comment in glance/registry/api/v1/members.py
    
    Change-Id: I8cec84c4934c08905e7f8758dec3622a5261b153

commit 87033d04d5cd0149b2ae5fbd5d4067d22e9f1784
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Wed Aug 22 19:20:12 2012 -0700

    Rename glance api docs to something more concise
    
    Related to bp glance-folsom-docs-cleanup
    
    Change-Id: Ic2206b9a3233d9b9d0617a253749d2021d14ac20

commit 37dc071dcd8e5c9546e165cb2138475ae39cc294
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Wed Aug 22 19:17:46 2012 -0700

    Drop deprecated client docs
    
    Link out to the necessary python-glanceclient resources rather than
    maintain docs on legacy usage.
    
    Related to bp glance-folsom-docs-cleanup
    
    Change-Id: I769cd21b900df353e7eee3d675989b1ad32f8edf

commit 087046b4e6723a6dc701c6fe6c120f9491fedbd8
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Wed Aug 22 19:03:24 2012 -0700

    Clean up policies docs page
    
    Related to bp glance-folsom-docs-cleanup
    
    Change-Id: I65cd8e9e34ce25cbf0b45900fc73df1ffb03c7ef

commit 11a9a4847c8544c0d0860bc3a38c8dbed7d38478
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Wed Aug 22 18:45:44 2012 -0700

    Remove autodoc and useless index docs
    
    * Remove autodoc sphinx extension
    * Ignore auto-generated 'api' docs
    * Prevent the corresponding 'api' index from being created
    * Prevent an empty 'index' page from getting generated
    
    Related to bp glance-folsom-docs-cleanup
    
    Change-Id: I82c9389f884ea4af853f1215731c051d1fb596e8

commit 66c10d434aa3163a46828e581970be521405d9e3
Merge: 32584be 6089423
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 23 00:27:37 2012 +0000

    Merge "Add DB Management docs"

commit 309a441e0126fd7365fb2e40e2763fc33bd72220
Author: Clark Boylan <clark.boylan@gmail.com>
Date:   Tue Aug 21 14:12:39 2012 -0700

    Add nosehtmloutput as a test dependency.
    
    Adding nosehtmloutput as a test dependency allows nose to output its
    results to an html file. This will be used by Jenkins to save logs on
    a different server.
    
    Change-Id: I811f56c37218301c4c5bd25bae92a4b5b74537de

commit 37d1c1d83ca7b6cc811c9fbf9e7012d54bc271bb
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Wed Aug 22 09:12:15 2012 -0700

    Remove partial image data when filesystem is full
    
    When an image is uploaded that fills up the local filesystem, attempt
    to delete the created file. This only applies to the 'filesystem'
    store driver.
    
    Fixes bug 1019421
    
    Change-Id: Ie12d736f3efb29b0862fef2899a1d2c142def38e

commit c068c7f217036263d3d56b0410f34f259303aa10
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Wed Aug 22 08:39:54 2012 -0700

    Add 'bytes' to image size rejection message
    
    Change-Id: I943c5acb8693decf618d6796e027381431db578f

commit 32584bed6c9acdf21c1cfb07bea222c840259491
Merge: 2b4a7b7 75339f4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Aug 21 23:09:51 2012 +0000

    Merge "Add policy check for downloading image."

commit 2b4a7b73d91bb9111c3babe2033059c0fce43e66
Merge: a6de4de bcb7729
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Aug 21 20:55:24 2012 +0000

    Merge "Add back necessary import."

commit 75339f4712314c65fe0f0ddc3bcec691a725bc99
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Mon Aug 20 10:44:13 2012 -0400

    Add policy check for downloading image.
    
    This patch adds a policy, 'download_image', to be enforced when image data is
    retrieved. It also does some basic refactoring of how policies are enforced.
    
    Fixes bug 1038086
    
    Change-Id: Idd844b615d362eae3197e106067c29dba8e3eeda

commit a6de4de65b01df6851fd573260fbbd8bbe53431f
Author: Dan Prince <dprince@redhat.com>
Date:   Mon Aug 20 21:29:44 2012 -0400

    Convert limiting_iter to LimitingReader.
    
    Glance commit 3c69df5aa707b4216ef7001dbe28fa0a5912493c added a new
    limiting_iter function in utils which we use to limit reads to
    image data being uploaded. This simple generator doesn't work
    with image backends like the Swift store which require a 'read'
    method.
    
    This patch swaps out the simple limiting_iter function for a
    LimitingReader class which supports both 'read' and __iter__
    functions.
    
    Fixes LP Bug #1039212 which cause the exception below when used
    with the previous code:
    
    AttributeError: 'CooperativeReader' object has no attribute 'read'
    
    Change-Id: I87d9a30f7afe0207386d621050312374ced161d5

commit 3c69df5aa707b4216ef7001dbe28fa0a5912493c
Merge: 840edd2 3a80eee
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Aug 20 17:38:08 2012 +0000

    Merge "Make max image size upload configurable"

commit 840edd20a2fc68669abc48bd6dacd12fb9d7b64c
Merge: ce403ba 743d3b2
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Aug 20 17:38:06 2012 +0000

    Merge "Fix auth cred opts for glance-cache-manage"

commit ce403bab09f352e5e210771894f0b4c76f122348
Merge: 56b80d7 2e9a467
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Aug 20 16:27:16 2012 +0000

    Merge "Set proper auth middleware option for anon. access"

commit bcb77294bb9ef4e4755ad364707621e98ef6cabe
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Mon Aug 20 12:07:39 2012 -0400

    Add back necessary import.
    
    Unit tests are failing because an import of glance/common/config.py was removed.
    When it is imported it registers a few common cfg opts that otherwise would not
    be registered. If this doesn't happen then unittests will fail since they expect
    those opts.
    
    Change-Id: Ib90c0af3d935243fd0aa8487131305f6843c1330

commit 56b80d763d06f74bb7cf44a29cfd4af960c7a99c
Author: isethi <iccha.sethi@rackspace.com>
Date:   Mon Aug 13 21:49:58 2012 +0000

    Adds glance registry req id to glance api logging
    
    Fixes bug 1036409
    
    Change-Id: Ifadfa74ba4b8de854d248c4c72e5c195e8bdc4ed

commit 3a80eee8eedcee01e106cc9e217b5075b1057892
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Sun Aug 19 10:49:59 2012 -0400

    Make max image size upload configurable
    
    Add conf option image_size_cap to represent what the internal
    IMAGE_SIZE_CAP constant used to cover in the v1 API. The default
    is reduced to 1 TB from 50 PB.
    
    Thoroughly test this on image create and update through the v1 API.
    
    Fixes bug 1038994
    
    Change-Id: Ie0985b62228f8b28c005a8847049d7b68d9b959a

commit 5d206b4c6b44eda74a1f8cc81f533b8139703f70
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Sun Aug 19 10:14:24 2012 -0400

    Correctly re-raise exception on bad v1 checksum
    
    The exception re-raise during v1 image upload operation was
    failing due to some weirdness in _safe_kill. This patches over
    the problem by explicitly re-raising the caught exception object
    after doing the necessary teardown.
    
    Fixes bug 1036470
    
    Change-Id: I0929bb3b2ac88f0b80f47eb61e642fe1fee35218

commit 564c11e677dae2ca69aca5b1c5331f66f58725d5
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Fri Aug 17 15:01:51 2012 -0400

    Return httplib.HTTPResponse from fake reg conn
    
    Fixes bug 1038219
    
    Change-Id: Ib7e205398c532007d189cdde3ab850b721f06a2a

commit edb2bf14416adb09bade58d8dec87ce0436c545c
Merge: 5eb7ac1 881e107
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 17 19:14:40 2012 +0000

    Merge "multi_tenant: Fix 'context' is not defined error"

commit 608942342795b8f96ba9543bc7fae34b26cb10fc
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Fri Aug 17 12:12:16 2012 -0400

    Add DB Management docs
    
    Fixes bug 909064
    
    Change-Id: Ifd477b345dfb03efe8e8e5befa03a0cb2a3c3ce8

commit 743d3b230b03dced102122c24db2ccecbc8b0218
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Fri Aug 17 11:01:45 2012 -0400

    Fix auth cred opts for glance-cache-manage
    
    The glance-cache-manage binary now supports the same auth env
    variables and flags as python-glanceclient. The old flag formats
    are still supported (but not documented) to support backwards-
    compatibility.
    
    Fixes bug 1038112
    
    Change-Id: If9f15d030e3167f5c81ea275c0005c854cd94a40

commit 5eb7ac1d2e9164d79b30da5b4db93caae632baf1
Merge: aea4f44 d13cbcd
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 17 14:14:44 2012 +0000

    Merge "Validate uuid-ness in v2 image entity"

commit aea4f4416b7bc34b9bd27955cd1ccc99af6b09ad
Author: RongzeZhu <zrzhit@gmail.com>
Date:   Thu Aug 16 22:16:56 2012 +0800

    Remove unused imports
    
    Fixes bug #1037592
    
    Change-Id: I3365d028ab67931517d2f94cc4b7e3752fbdb869

commit 2e9a467dc822aa1175dc08b5ea12d363b9a04ffe
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Thu Aug 16 17:07:43 2012 -0400

    Set proper auth middleware option for anon. access
    
    Fixes bug 1037793
    
    Change-Id: I89c05b5004f6a93608c0e23302f04b95b9018c29

commit 881e107e809e9ada5a734b9e0777375beb7233fe
Author: Dan Prince <dprince@redhat.com>
Date:   Thu Aug 16 15:40:59 2012 -0400

    multi_tenant: Fix 'context' is not defined error
    
    Corrects the variable name 'context' to be 'self.context' in the
    configure_add method of the swift store. We changed/moved this code
    late during the review process of the multi_tenant swift feature
    and obviously didn't add a functional/unit test on the new location
    which now causes this exception to get thrown:
    
        NameError: global name 'context' is not defined
    
    This patch also includes a new glance function test to startup
    the Glance API in multi-tenant mode. The test_multi_tenant_mode
    test will fail with the previous swift store implementation.
    
    Fixes LP Bug #1037745
    
    Change-Id: I7681ad704b169c5fe815adf2fe704e5d18ea8e83

commit d13cbcd6d85a0dd67d88143686f8c83791ee79ff
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Thu Aug 16 15:07:14 2012 -0400

    Validate uuid-ness in v2 image entity
    
    The image entity was allowing any string value to pass through in
    an image create operation. We should limit it strictly to UUID-like
    values.
    
    Fixes bug 1037725
    
    Change-Id: I3f28d3f2dc5c0f63322efe250051874d7975ec1f

commit c6b460837d53012f45e6089ac963d17ffd7b53b9
Merge: e818792 12f3487
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 16 17:25:49 2012 +0000

    Merge "Fix build_sphinx setup.py command."

commit e818792d7624d7fd242d2e7d415b9293cc4a8f4c
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Thu Aug 16 00:05:45 2012 -0400

    v2 Images API returns 201 on image data upload
    
    Fixes bug 1037391
    
    Change-Id: I93607874b932de658cc301a6f9bc53c83af66383

commit 07b72c388289c8e89b4dd2dd342a7f8147c438aa
Author: Alessandro Pilotti <ap@pilotti.it>
Date:   Fri Aug 10 18:01:48 2012 +0300

    Fixes issue with non string header values in glance client
    
    Fixes bug 1032798
    
    By using Glance client on Windows the following exception is raised:
    
    TypeError: sequence item 0: expected string, long found
    
    Details on how to reproduce the error are available in the bug description
    
    Change-Id: Ib4528702b11aabdf939c6358f92ad7ff9c3ff20d

commit c698cdc200e22a72cabba9917f2594b7a9d73263
Merge: 09b3e49 27c1c5a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Aug 15 23:20:12 2012 +0000

    Merge "Raise 400 error on POST/PUTs missing request bodies."

commit 09b3e497b6af7adfa2e73778dea57118deb541aa
Merge: e7073d0 85d8d7a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Aug 15 23:20:11 2012 +0000

    Merge "Updates Image attribute updated_at"

commit 12f34873c1a3727db8f09e608233f4052c111f64
Author: Clark Boylan <clark.boylan@gmail.com>
Date:   Tue Aug 14 17:48:29 2012 -0700

    Fix build_sphinx setup.py command.
    
    The DB migrate manage script needed to be wrapped in an if statement
    so that the autodocumentation did not barf on it. Additionally add a
    copyright header while we were editing the file.
    
    Change-Id: I0a37036d304790b52dde7fb68d37a6c99204b596

commit 85d8d7af5808a98bbae7b010595e08752d0c9bd0
Author: isethi <iccha.sethi@rackspace.com>
Date:   Wed Aug 15 20:20:24 2012 +0000

    Updates Image attribute updated_at
    
    When the image properties are updated, the image attribute updated_at
    should be updated as well.
    
    Fixes bug 1036507
    
    Change-Id: I889eab92e8f182633ab6e462cac1ff7ab0cb1223

commit e7073d028aa4c5221dba16b3d48a43189067fed9
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Wed Aug 15 12:27:00 2012 -0400

    Add policy enforcment for v2 api.
    
    This patch adds policy checks in the images controller for all actions that need
    to be enforced. It also fixed an issue with unit tests where the v1 unitests
    were testing less than they should be. This was due to the default policy being
    overridden in the test and causing a forbidden to be raised whenever policys
    were changed, regardless of the policy rule added.
    
    Fixes bug 1036846
    
    Change-Id: Ib351d8c1e13164d02b02685c808b30045f7850ea

commit 27c1c5a50a1acb92be8a159a2ddf306b17072a9d
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Wed Aug 15 13:51:44 2012 -0400

    Raise 400 error on POST/PUTs missing request bodies.
    
    Fixes bug 1034972
    
    Change-Id: I1847972c83353452381c0ee5eee2eb75f51d1dbc

commit 2580d3b0f5c0a8069b40ce2f54481c6e82656232
Merge: c189324 fb2260b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Aug 15 10:29:40 2012 +0000

    Merge "Return 201 on v2 image create"

commit c189324735191b76ec1d21b77d76f25c78e3829c
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Tue Aug 14 14:12:53 2012 -0400

    Mark bin/glance as deprecated
    
    * Add a WARNING to the usage of bin/glance
    * Print a WARNING line to stderr when bin/glance is called
    * Raise a UserWarning on 'import glance.client'
    * Implements bp glance-deprecate-client
    
    Change-Id: Iabce7569d28c5dc73b5e1ceb55e4e4f2fc47727b

commit fb2260bdc6bace65d895b6eef24d224cf865c4ce
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Mon Aug 13 22:47:44 2012 -0700

    Return 201 on v2 image create
    
    Fixes bug 1036501
    
    Change-Id: Iccaeb14f0ceb85fe8e0f3aedd2ad7a4ceaead6e2

commit 3d93ca6655425617dfea293b67a3489a470bb91a
Merge: 9631283 2bed42c
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Aug 13 19:34:48 2012 +0000

    Merge "Ignore duplicate tags in v2 API"

commit 963128349209539ff22ec4431d82f1322e7e3723
Merge: 42ebabb 3557b97
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Aug 13 04:48:29 2012 +0000

    Merge "Expose 'protected' image attribute in v2 API"

commit 42ebabbca7044d6a329c752676b67ed2923447b5
Merge: 60576a5 014d3f9
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Aug 13 00:53:11 2012 +0000

    Merge "Move to tag-based versioning."

commit 2bed42cd3c42cc19e3d5c6d16fe69fa94f627447
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Sun Aug 12 14:30:20 2012 -0700

    Ignore duplicate tags in v2 API
    
    * Creating/updating an image with duplicate tags should result in
      only a single instance of that tag being added
    * Attempting to explicitly tag an image with a duplicate tag
      should result in no tags being added
    * Fixes bug 1035961
    
    Change-Id: Ie16091f046de98914aea1a1a6777773ddc95c615

commit 3557b97c82a9f66133147bd87a3416740214bacc
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Sun Aug 12 11:35:08 2012 -0700

    Expose 'protected' image attribute in v2 API
    
    If protected is true, an image will not be deletable.
    
    Related to bp api-2
    
    Change-Id: I169f435d4cb8d66baf3f8c1ca3b869083b24c841

commit 014d3f9ee378a0c621c2ad1fad4c7338349b98ff
Author: Monty Taylor <mordred@inaugust.com>
Date:   Sat Jul 7 16:10:17 2012 -0500

    Move to tag-based versioning.
    
    * Update to latest openstack-common setup code
    * Add openstack-common version module
    
    Change-Id: Id6876b55554c358fbd29e7ef8377f42a72a98301

commit 60576a5baedf910af16b26e0eedb4e487d308166
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Sat Aug 11 15:39:46 2012 -0700

    Update restrictions on allowed v2 image properties
    
    The list of allowed and readonly image attributes has gotten out of
    date, so this change updates those lists. This change also adds a
    similar check to ensure certain special properties names are reserved as
    they would conflict with existing database properties that are either
    not presently exposed or exposed under a different name.
    
    Change-Id: I56d6c938dd6a5353e15b3e5ef913fae5b4629d52

commit 9b98df52fe295b448eb5950c24722a45c0c60407
Merge: 57dd669 2fb37ab
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sun Aug 12 05:23:57 2012 +0000

    Merge "Reveal v2 API as v2.0 in versions response"

commit 57dd669ef0aadca26b43142142db2fbb29a9d4d2
Merge: 1ed7517 c4f7545
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sun Aug 12 03:51:13 2012 +0000

    Merge "Sync with latest version of openstack.common.notifier"

commit 1ed75179b81e3cd547505194199c5d1d9c9c86e2
Merge: 71ef074 f3d8c40
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sun Aug 12 03:44:24 2012 +0000

    Merge "Add min_ram and min_disk to v2 images schema"

commit 71ef0749d629821ac7ed4219b93e332d9b6961d5
Merge: 9054dfb 98cf6a4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sun Aug 12 03:43:35 2012 +0000

    Merge "Update rbd store to allow copy-on-write clones"

commit 9054dfb563bb4f076c4905f7c94d8e5924f3fe7c
Merge: 65e2308 92b17a0
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sun Aug 12 03:40:39 2012 +0000

    Merge "Filter out None values from v2 API image entity"

commit 65e230813bc87bbea64273ae5d07f9152d110cad
Merge: bbf3eea 119be86
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sun Aug 12 02:40:27 2012 +0000

    Merge "Make swift_store_admin_tenants a ListOpt."

commit 2fb37ab925224076f70e147334dcd3a4db29f166
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Sat Aug 11 16:13:55 2012 -0700

    Reveal v2 API as v2.0 in versions response
    
    * Report v2.0 API compatibility, not v2
    * Allow users to specify '/v2' or '/v2.0' in their request URI
    
    Related to bp api-2
    
    Change-Id: Ia8d41902a2171aad8f06d3ac329a3e3c097cdc90

commit f3d8c40b6255cf962c4b42b9c306562d7d7de586
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Sat Aug 11 15:16:21 2012 -0700

    Add min_ram and min_disk to v2 images schema
    
    The min_ram and min_disk image attributes are stored in the db, so
    we need to expose them as core image attributes to preserve
    backwards-compatibility with the v1 Images API.
    
    Related to bp api-2
    
    Change-Id: If2afa1f171aa6c4f07052225592d216f7e09ca90

commit 92b17a0d100d2d739c0f73eb58e87fd749fc71a8
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Fri Aug 10 14:59:56 2012 -0700

    Filter out None values from v2 API image entity
    
    Prevent core image attributes with None values from being returned
    to v2 API clients. Most attribute schemas are of type 'string' and
    returning None is invalid.
    
    Fixes bug 1034790
    
    Change-Id: I2885cabf14307e46ff711bdabfcd3ff3253e6628

commit bbf3eeaa83ce39a97b02872df0a033d291fd9fba
Merge: 20719bc a9f4d69
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Aug 11 21:03:26 2012 +0000

    Merge "Refactor v2 images resource unit tests"

commit 20719bcf5220d3d2c051bc88a4c980892356a663
Merge: 7c22d0d 5d259b1
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Aug 11 17:58:49 2012 +0000

    Merge "Sync with latest version of openstack.common.log"

commit 7c22d0d548eb3867f60afb884758c8132f8d7111
Merge: a23617e d3a9f50
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Aug 11 17:58:48 2012 +0000

    Merge "Sync with latest version of openstack.common.timeutils"

commit a9f4d69ba6a9cc55074347c0ea17dae6a2b75a8f
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Fri Aug 10 15:54:25 2012 -0700

    Refactor v2 images resource unit tests
    
    * Add _fixture() helper method for generating image fixtures
    * Simplify some tests that were asserting things they didnt need to
    * Remove unused glance.common.exception import
    
    Change-Id: I5eec5430df2ca0867b21fcfda0586ef5273061f3

commit a23617e7abd3a5c8d6cb58b64543de9e5bfa1ea1
Merge: 54cf135 e268e91
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Aug 11 17:44:11 2012 +0000

    Merge "Sync with latest version of openstack.common.importutils"

commit 54cf135061ae780e3923c995beb17caa8f90ae13
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Fri Aug 10 10:43:26 2012 -0700

    Use container_format and disk_format as-is in v2
    
    Rather than force a painful migration to type and format, use
    container_format and disk_format as they are in the v1 API for v2
    since there isn't a clear path to an interoperable alternative.
    
    Related to bp api-2
    
    Change-Id: If8161390abf17961885e5c02e38d635b287aeca4

commit 119be8609412a0a87ae6d2de9b783c2adb347be7
Author: Dan Prince <dprince@redhat.com>
Date:   Fri Aug 10 16:54:49 2012 -0400

    Make swift_store_admin_tenants a ListOpt.
    
    The swift_store_admin_tenants config option should have never
    been a boolean opt. Actually using the config in this state will
    cause glance-api to fail to startup.
    
    Fixes LP Bug #1035471.
    
    Change-Id: Ie800f6ee7cf1b8d863d5e8e8ac41e8ed36f345f1

commit f6840263de8dff0cbfc57b9543780ece4fae5d5a
Merge: 6c75aa9 c794afa
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 10 20:15:55 2012 +0000

    Merge "Sync with latest version of openstack.common.cfg"

commit 98cf6a443d49c7b6e787deb55ea66454ed96e7dc
Author: Josh Durgin <josh.durgin@inktank.com>
Date:   Fri Aug 10 04:55:13 2012 -0700

    Update rbd store to allow copy-on-write clones
    
    This is in preparation for cinder blueprint
    efficient-volumes-from-images. If the same rbd cluster is used by
    glance and cinder, a new volume can be created as a copy-on-write
    clone by the ceph cluster rather than downloading all the data from
    glance.
    
    Since bp api-v2-store-access is implemented, make the location for the
    rbd store more specific, so cinder can check that it's accessing the
    same backend as glance. fsid is a unique identifier for a Ceph cluster.
    
    Within a cluster, the full specification of an rbd image includes
    pool, image name, and optionally snapshot. Creating a copy-on-write
    clone is only possible in rbd on a protected snapshot, so after
    uploading an image to rbd, create a snapshot and protect
    it. Protection means it can't be deleted until it is unprotected, so
    you can't accidentally render any clones unusable by removing their
    parent. Add a new exception, InUseByStore, to handle a snapshot or
    image that's still protected or otherwise in use.
    
    More details can be found at
    http://ceph.com/docs/master/dev/rbd-layering/.
    
    For backwards compatibility, only use these new features if they are
    supported by the installed librados and librbd python bindings. Otherwise
    fallback to the previous location specifier which only includes image
    id, since cloning won't work anyway.
    
    Since the location parsing is now a bit more complicated, add unit
    tests for it.
    
    Change-Id: I9711702276d966f88284fae44f9531b992cdd06f

commit 6c75aa97d46b4d770386e916abbfe627416e1908
Merge: da9a8d5 4ba5870
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 10 19:03:30 2012 +0000

    Merge "Call stop_servers() in direct_url func tests"

commit da9a8d5d6571ea2c1a5179e2af425c931d5a092e
Merge: 99d5173 d9ec683
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 10 18:37:40 2012 +0000

    Merge "Fix a couple i18n issues in glance/common/auth.py."

commit 4ba5870fd4143c2cf4ff8028791f2cb294c7c76e
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Fri Aug 10 11:01:40 2012 -0700

    Call stop_servers() in direct_url func tests
    
    The recently-added direct_url tests aren't spinning down their
    api servers. This was causing arbitrary failures when running
    tests in jenkins and smokestack.
    
    Change-Id: I06293fdec8449c15fe993653157c327c8a7e8418

commit 99d5173afe55ad08c855c48e4e839d18ab3592e8
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Wed Aug 8 13:49:40 2012 -0700

    Drop unfinshed parts of v2 API
    
    The v2 API will be implemented over time as the spec develops. We
    shouldn't implement anything that we aren't 100% behind. This drops
    all of the things that we aren't in love with:
    * Drop access records and related schemas
    * Drop owner attribute from image
    
    Related to bp api-2
    
    Change-Id: Ieef2c141282e7018d56e79aee8f20af0542af25b

commit d9ec68379354b0f5479a924bc1230b61e381e8a2
Author: Dan Prince <dprince@redhat.com>
Date:   Fri Aug 10 09:14:55 2012 -0400

    Fix a couple i18n issues in glance/common/auth.py.
    
    Change-Id: I6944bb46fbd6784b7e9b84d05d453b56bf62d21c

commit c4f75459307d0a970c2d1e0cfde9b2bbe4acb1b5
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Fri Aug 10 12:10:55 2012 +0100

    Sync with latest version of openstack.common.notifier
    
    Changes since last sync:
    
     - Add multiple-driver support to the notifier api.
     - fix bug lp:1019348,update openstack-common to support pep8 1.3.
     - Fix missing gettextutils in several modules.
     - Fix line length for pep8 compliance after cloning into other projects
     - Switch common files to using jsonutils.
    
    Also add notifier and local to openstack-common.conf since we appear
    to have forgotten to add them when they were imported.
    
    Change-Id: If2cea51761ae14d188861518c567abdf0d8a0649

commit 5d259b1bab85c2842388da8b79d7593dd4ddcedd
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Fri Aug 10 12:13:28 2012 +0100

    Sync with latest version of openstack.common.log
    
    Changes since last sync:
    
     - Install a qualified except hook.
     - Remove code to clear basicConfig root log handlers
     - don't throw exceptions if %(color)s tag is used
     - fix bug lp:1019348,update openstack-common to support pep8 1.3.
     - Fix missing gettextutils in several modules.
     - Switch common files to using jsonutils.
    
    Change-Id: I430caf24526e571688c78f3cdd9f9453f5d525c4

commit d3a9f506087ced00af13e280138883b24022be00
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Fri Aug 10 12:07:29 2012 +0100

    Sync with latest version of openstack.common.timeutils
    
    Changes since last since:
    
     - Remove unused imports
     - Fix utcnow_ts to return UTC timestamp
     - Add nova time util functions to timeutils
     - Replace datetime.utcnow with timeutils.utcnow
    
    Change-Id: Ic98bfc9655edad8f7319daafede192534f68a1a5

commit e268e91e7a3312be2287a6c498fb9e1f5a79b561
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Fri Aug 10 12:01:54 2012 +0100

    Sync with latest version of openstack.common.importutils
    
    Changes since last sync:
    
     - Improve exception from importutils.import_class().
     - Merge "add import_object_ns function"
     - Update common code to support pep 1.3. bug 1014216
     - add import_object_ns function
    
    Change-Id: Ibaa60f50af255ec77a3f0c93213f8a9f446eeb0d

commit c794afa95c566cd97c9f5d6fa9d4670cfa18cd9f
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Fri Aug 10 12:01:28 2012 +0100

    Sync with latest version of openstack.common.cfg
    
    Changes since last sync:
    
     - Modifies _is_opt_registered fcn to check for duplicate opts
     - cfg: Fix typo in documentation
     - Update common code to support pep 1.3. bug 1014216
     - Use 'is not None' instead of '!= None'
     - Add support to include config aliases
     - allow empty config values
    
    Change-Id: Ibe31c90a71e58bdea2f947a039f2c2dce2749c14

commit ae6e288072f833b11c557747d354c6e5ba71a439
Author: Nikhil Komawar <nikhil.komawar@rackspace.com>
Date:   Sun Aug 5 10:24:16 2012 -0500

    Allows exposing image location based on config
    
    It would be good to allow exposing image location to trusted clients,
    say Nova. Thus, eventually helping for internal deployments. This merge
    prop enables us to set a config value which will let us either expose
    the image location or not expose it.
    
    Edits from markwash:
     * unit test refactoring
     * should not return direct_url as None, that would violate the schema
       which requires direct_url to, when present, be a string
    
    implements bp api-v2-store-access
    
    Change-Id: I69da3b4ce3fc9261cbf448e797e48affa56281ef

commit 19334f0f8d0d2e8bcc086ef27e44c0a6a80bd9d6
Author: Brian Elliott <brian.elliott@rackspace.com>
Date:   Sun Jul 22 14:39:08 2012 -0500

    Do not cache images that fail checksum verfication
    
    On an image GET, recalculate the image checksum as the image
    data is streamed to the client.  Verify that the checksum matches
    the original checksum calculated when the image was added to Glance.
    If checksum validation fails, purge the image from the cache.
    
    This type of situation could occur if the backend image store
    is malfunctioning.
    
    bug 1028496
    
    Change-Id: I9f38bac8360016bb12b5edaad87c50939a538cc0

commit e200f6fe2412edd564759a5a98709c704348fc6f
Author: Sulochan Acharya <sulochan.acharya@rackspace.co.uk>
Date:   Thu Aug 2 11:58:50 2012 -0500

    Omit deleted properties on image-list by property
    
    If a user updates an image property with purge-props, it is marked
    as deleted. However, the query to filter by custom property ignores
    this, and returns match even for records with deleted set. This patch
    introduces a small change by inserting deleted=False in the query to
    ignore those deleted properties.
    
    Also, some changes in simpledb is introduced to handle user defined
    properties in the correct format.
    
    - Inserts deleted=False on properties filter query. Fixes bug 1025697.
    - Updates simpledb to handle user defined property in correct format.
    
    Change-Id: I435751ef6fc7ba0537e573fac54c34b81098271b

commit a7b15a9df18547a541588ed2d6488789323c7687
Merge: 006254c 7335088
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Aug 8 01:22:56 2012 +0000

    Merge "Handle images which exist but can't be seen."

commit 006254c5050176c9b569007f6ef7203e6067215d
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Fri Aug 3 10:56:06 2012 -0700

    Allow server-side validation of client ssl certs
    
    This adds a 'ca_file' config option that points to a local
    CA cert that will be used to verify certs provided by
    connecting clients. The 'ca_file' option is only used if the
    server is already properly configured to to use SSL - that
    means having a valid 'cert_file' and 'key_file'. If no 'ca_file'
    is provided, the behavior will remain the same - the server
    will still provide its cert to clients, but it will ignore
    certs sent back from those clients.
    
    Fixes bug 1032451
    
    Change-Id: Ie48646b0fc5398ba7cda2fb627b820f533482e00

commit 7335088d896442e961c07e71bbb67ffd98f1f87a
Author: Michael Still <mikal@stillhq.com>
Date:   Sun Jul 29 10:05:45 2012 +1000

    Handle images which exist but can't be seen.
    
    If the master and the slave glance have different permissions, you
    can end up with a 409 exception at upload. For example:
    
     - the image is visible to the replication user on the master
     - the image is present on the slave, but not visible to the
       replication user
    
    The replicator checks for the existance of the image by doing a HEAD
    on http://server:port/v1/images/uuid and gets a 404 back. It therefore
    decides the image doesn't exist and that it should be replicated. It
    does a POST for that URL, and gets a 409 back saying that UUID is
    already in use.
    
    Resolves bug 1030396.
    
    Change-Id: Id5fdb7977692593fd6c2e203f0440d4aa5339d92

commit 4ac0f4f0a49390d730e97861b546942ad1e3a485
Merge: 4940aed 616d2f9
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 3 23:04:08 2012 +0000

    Merge "Adds proper response checking to HTTP Store."

commit 4940aed558f1159c5e0580ec7e18ab008098fb4a
Merge: 3e108e5 5cf0c9b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 3 20:13:51 2012 +0000

    Merge "Store context in local thread store for logging."

commit 3e108e53e517c3c8f9c926eadf1ef1809ccb01af
Merge: ab8bc2a 751ac81
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 3 18:53:56 2012 +0000

    Merge "fix the qpid_heartbeat option so that it's effective"

commit ab8bc2ab3b39f4975692e58ecff73fe607c3d2f4
Merge: 0d35dba efb30dd
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 3 18:15:50 2012 +0000

    Merge "Make TCP_KEEPIDLE configurable"

commit 0d35dbaf780d28220224339d5c30795a30fa3948
Merge: e6c25de a30887a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 3 00:01:10 2012 +0000

    Merge "^c shouldn't leave incomplete images in cache"

commit e6c25dedcb46bd76318ba10a14a0353599b93066
Merge: f285804 6eeba44
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 2 23:42:31 2012 +0000

    Merge "Use function registration for policy checks"

commit f2858042a2ca619485a3815971dac68cd300dfef
Merge: 577511c b3da56c
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 2 23:27:47 2012 +0000

    Merge "Add a missing header strip opportunity."

commit 577511c99bd43ad3c9a3b00ff2e5691e86f7b781
Merge: bab5aa1 e6b50bd
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 2 23:03:43 2012 +0000

    Merge "Add links to image access schema"

commit 616d2f9a65f7995298153cdf8a1e94bb62912ebe
Author: Gabriel Hurley <gabriel@strikeawe.com>
Date:   Wed Aug 1 17:40:30 2012 -0700

    Adds proper response checking to HTTP Store.
    
    The HTTP Store now handles the following cases:
    
      * Redirects are resolved (infinite redirect chains are prevented).
      * 4xx and 5xx status codes result in a proper exception instead
        of trying to continue with the image.
    
    Fixes bug 1009248.
    
    Change-Id: Ibc44413d630bf35e0c396adc430c39f4295030fd

commit 6eeba442326eca05754d33c4a3fcd21623d3c11b
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Thu Aug 2 13:46:29 2012 -0500

    Use function registration for policy checks
    
    The original policy framework allowed new policy checks to be created
    through inheritance.  This is somewhat clunky and unnecessary in
    Python.  This change refactors policy.py to allow new policy checks
    to be registered using an @register() decorator.  One consequence is
    that HttpBrain is deprecated.
    
    Care has been taken to ensure backwards compatibility; deprecation
    warnings will be emitted for uses of HttpBrain or the inheritance-
    based checks.
    
    (Pull-up from openstack-common.)
    
    Change-Id: Ib11f4581d187d037d2081515d70e325425d68760

commit bab5aa1d6afb977a7a029282d646ed8fa2324419
Merge: 4c4f627 8a4f377
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 2 18:38:57 2012 +0000

    Merge "Add swift_store_admin_tenants option."

commit 4c4f62751b5893b3d6acfe424a34d1195d9a1198
Merge: d240373 480743a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 2 18:37:58 2012 +0000

    Merge "Update v1/v2 images APIs to set store ACLs."

commit 751ac81defe61d4cc8fb5e86dc96f76bdee6f398
Author: Pdraig Brady <pbrady@redhat.com>
Date:   Thu Aug 2 18:27:54 2012 +0100

    fix the qpid_heartbeat option so that it's effective
    
    The 'hearbeat' typo caused this setting to be ineffective.
    
    Fixes bug: 1032314
    Change-Id: Ia2cdb7185e8ec92ca6e587678a688d23a5ac0221

commit e6b50bdbbd9d397e05811fb6b7899141860a39b9
Author: Mark Washenberger <mark.washenberger@rackspace.com>
Date:   Thu Aug 2 00:11:25 2012 +0000

    Add links to image access schema
    
    /v2/schemas/image/access was missing links, both as properties and link
    descriptor objects, although /v2/images/<id>/access was returning them
    in responses. This change adds the link properties to the schema
    response.
    
    Addresses bp api-v2-links
    
    Change-Id: I68e576dadbbe37d4d33d2238ea0e4c798a4a667b

commit a30887aa3b7a220a1f722e94fa69201e5878e766
Author: Tom Hancock <tom.hancock@hp.com>
Date:   Wed Aug 1 15:58:46 2012 +0000

    ^c shouldn't leave incomplete images in cache
    
    Fixes LP bug 1031842
    
    Use a finally clause for the xattr and sqlite
    image cache implementations of open_for_write()
    such that if the commit() or rollback() aren't
    called and the image remains in the incomplete
    dir that it is moved to the invalid dir
    
    Change-Id: Id9a0ac56a8ae9fd03af9ccc4989c9b304c95bdde

commit d240373db87dbcde9ffbcdcc563bb227a0a083c3
Merge: 1801f3e 9200160
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 2 15:52:38 2012 +0000

    Merge "Reject rather than ignore forbidden updates"

commit 1801f3e6123c221063ea30e8d0257ef5f2b35f6e
Merge: e990195 6cc2300
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 2 05:36:16 2012 +0000

    Merge "Use event.listen() instead of deprecated listeners kwarg."

commit e99019551636c6328d0420692d0062269651a828
Merge: 786e892 e7919a2
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 2 04:26:13 2012 +0000

    Merge "Process umask shouldn't allow world-readable files"

commit 786e892be584b899eb3d5bd17f97ff729fbc0b82
Merge: da8e367 14468d0
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 2 04:02:32 2012 +0000

    Merge changes I70bc8f8b,I45752741
    
    * changes:
      Raise HTTPBadRequest when schema validation fails
      Expose 'status' on v2 image entities

commit da8e3677f6553012f19761e34215d7e56a5dbcdf
Merge: b4ae20c ac50784
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 2 04:00:19 2012 +0000

    Merge "URLs to glance need to be absolute."

commit b4ae20c8eee32d192b0ee29318eed4c2a23cb04c
Merge: 36903c6 4d50b67
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 2 03:44:23 2012 +0000

    Merge "uuid is a silly name for a var"

commit 36903c695afe64693d80146edb6bf175231e9b6a
Merge: e557c0e 53b5125
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 2 03:38:37 2012 +0000

    Merge "Support master and slave having different tokens."

commit 4d50b67b1d67b91612ccf9d70ddb61d7c11afd2b
Author: Michael Still <mikal@stillhq.com>
Date:   Thu Aug 2 09:48:50 2012 +1000

    uuid is a silly name for a var
    
    Given its also the name of an import.
    
    Change-Id: Ib19e69eb9a1047f735ff649a05b400642e8ec29e

commit 53b5125b2451ed7d80d4138076a1c47c8eabbffe
Author: Michael Still <mikal@stillhq.com>
Date:   Fri Jul 27 15:04:40 2012 +1000

    Support master and slave having different tokens.
    
    This came up recently for a user -- their regions have separate
    keystone instances, and therefore don't share auth tokens. So, in
    some cases we need to pass in two tokens instead of one.
    
    Resolves bug 1029758.
    
    Change-Id: Iad241ff3583a62297d89ee15cbd3d58417e5fedf

commit b3da56c7489446281f3749b3df81090692982a7e
Author: Michael Still <mikal@stillhq.com>
Date:   Thu Aug 2 10:45:42 2012 +1000

    Add a missing header strip opportunity.
    
    As well as adding some more logging to make this easier to debug in
    the wild.
    
    Change-Id: I8ec765b6f066569a7483f01201d4907ad1794291

commit ac507843970dd097bca7f7cc7b9871302ca32140
Author: Michael Still <mikal@stillhq.com>
Date:   Thu Aug 2 10:32:58 2012 +1000

    URLs to glance need to be absolute.
    
    Otherwise the apache SSL frontend that many users deploy will get
    confused and return a HTTP error.
    
    Change-Id: Ie8ae560810a5e5419e4d4aacae17e1e301ed4126

commit e557c0ef3ef94ebf6469491563d660f2ad14d419
Author: Michael Still <mikal@stillhq.com>
Date:   Thu Aug 2 09:55:41 2012 +1000

    Use with for file IO.
    
    Use with for file IO, instead of keeping track of state myself.
    
    Change-Id: Ifc1a49fa51d3e7da08da32fb0966f2637089b58a

commit 5aec05ca812f970152d3929cc07e21ba16f1cc01
Merge: eeedad3 db33171
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Aug 1 23:49:50 2012 +0000

    Merge "Move optional dependencies from pip-requires to test-requires"

commit 8a4f3773ac0b3e66643dd8af964399e48da47202
Author: Dan Prince <dprince@redhat.com>
Date:   Wed Aug 1 13:42:47 2012 -0400

    Add swift_store_admin_tenants option.
    
    Add a swift storage option to configure a default list of admin
    tenant IDs which will be granted write access on any swift
    images.
    
    This setting might be useful when a user choose not to use a global
    swift admin role when managing glance images. This might also
    be useful when implementing delayed delete for glance swift
    multi-tenant.
    
    Partially implements blueprint: swift-tenant-specific-storage.
    
    Change-Id: Id65e1c8d114c9551b99f6a18c527ba26aefd341f

commit 480743a2d7e1dc7be066e2fbffd3063ca4fc6a9f
Author: Dan Prince <dprince@redhat.com>
Date:   Sun Jul 1 21:18:28 2012 -0400

    Update v1/v2 images APIs to set store ACLs.
    
    Updates the images controllers so they call set_acls on
    the backend store when adding/updating images and members.
    
    Made some changes to the v2 API unit/functional tests to
    use real locations instead of just UUIDs so the tests work
    with the new set_acls call.
    
    Partially implements blueprint: swift-tenant-specific-storage.
    
    Change-Id: Ib249acfe440f4b75bc9edd7b73fe10127b8333b1

commit 6cc23005d042901e01bfee4deeb6367879012d22
Author: Josh Kearney <josh@jk0.org>
Date:   Wed Aug 1 12:05:42 2012 -0500

    Use event.listen() instead of deprecated listeners kwarg.
    
    The listeners kwarg is deprecated in SQLAlchemy 0.7.0. Since 0.7.3 is
    the minimum required version of SQLAlchemy, use the new event.listen()
    API instead.
    
    Fixes bug 1031405.
    
    Change-Id: Ibbfe46d065575b1954a47b3a28c61151dfb1e06e

commit 5cf0c9b4eb354a9a4e0d115510946c732f4006fa
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Wed Aug 1 00:32:30 2012 -0400

    Store context in local thread store for logging.
    
    This also fixes the logging of request ids for every request.
    
    Fixes bug 1031596
    
    Change-Id: Ifd0217c99402316214efaf1fe8533c60c2277257

commit e7919a2642f6e6180f30732394e7b0dc97868c6a
Author: Tom Hancock <tom.hancock@hp.com>
Date:   Wed Aug 1 14:15:01 2012 +0000

    Process umask shouldn't allow world-readable files
    
    This ensures that image cache files and file-backed
    images are not world-readable.
    
    Fix LP bug 1031796
    
    Change-Id: I85a26b4e645e7cb32e17164e47fad62f4c44976a

commit efb30dd6405aa1af1b6f22296bf026b20878c526
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Wed Aug 1 14:25:30 2012 +0000

    Make TCP_KEEPIDLE configurable
    
    Addresses LP bug #1031794.
    
    Change-Id: I9a3a6a23b1bcec5229b15234512e04cc47c3ffd9

commit 92001604be2e7353ca77197f85abac6c2997caab
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Wed Aug 1 10:23:23 2012 +0000

    Reject rather than ignore forbidden updates
    
    Return HTTPForbidden when an attempt is made to update
    an attribute which is either read-only or only settable
    by an Admin user. Previously a success (200) was returned
    for these cases.
    
    Related to bp api-2.
    
    Change-Id: I1aff6975a968a00bf133face606cc35280835a4f

commit 14468d07f6a1f2cb283afc90154aecf2b4c10893
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Fri Jul 27 12:10:27 2012 +0000

    Raise HTTPBadRequest when schema validation fails
    
    Raise HTTPBadRequest when request schema validation fails rather than
    InvalidObject. This prevents a 500 Internal Server Error.
    
    Related to bp api-2.
    
    Change-Id: I70bc8f8b8fbb0f95d9563e9eb08d7e0a47111198

commit fb496437f25c54fe756ba9aae4af19dd7a112e50
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Wed Aug 1 12:05:23 2012 +0000

    Expose 'status' on v2 image entities
    
    Added 'status' read-only attribute to v2 schema/serialization.
    Updated the schema and added unit tests as appropriate.
    
    Related to bp api-2.
    
    Change-Id: I457527413d4ccca813a45ac03e66a90071f0af76

commit eeedad333398c6c869214ddccfbb36719ca56429
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Mon Jul 30 20:13:16 2012 -0700

    Simplify image and access_record responses
    
    This removes the container around individual image and access_record
    entities in GET /images/<ID> and GET /images/<ID>/access/<TENANT>.
    Response bodies used to look like '{"image": {...}}', while now they
    look like '{...}'.
    
    Fix bug 1031185
    
    Change-Id: I1eacee2d877f5dde3612b3d4006d4caf489f49e1

commit c901c6a0500543ba21e51fbc26b6c0ec8e2f26dd
Merge: 55a3b3c ff83d4f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jul 31 23:14:41 2012 +0000

    Merge "Add in missing image collection schema link."

commit db33171ead3a4e6d9e5f880d53c375611d441805
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Tue Jul 31 15:47:39 2012 -0400

    Move optional dependencies from pip-requires to test-requires
    
    python-sendfile and python-xattr are both optional library
    dependencies in Glance now. Some systems, like Windows, do not
    have these libraries and so we should move them from pip-requires
    to test-requires. AFAIK, the pip-requires is what is used to
    build the Windows installer.
    
    Fixes LP 1031396
    
    Change-Id: Ib47244e51ae03991e6171ab8d47238d955743567

commit 55a3b3cf51df1cd203c642fc1cb1cbc0dcb7bfa5
Author: Mark Washenberger <mark.washenberger@rackspace.com>
Date:   Tue Jul 31 20:59:09 2012 +0000

    Fix dead link to image access collection schema
    
    Related to bp api-v2-links. The image access records list object
    contains a link to /v2/schemas/image/accesses, but that link returns
    nothing yet. This change adds the schema that the link should return and
    wires up the router to return it.
    
    Change-Id: I4303070f016a72fa1cd778d83423fa9a9f77897b

commit ff83d4fcc23f2b54086a24d7a6466a86e89e31b9
Author: Mark Washenberger <mark.washenberger@rackspace.com>
Date:   Tue Jul 31 20:24:27 2012 +0000

    Add in missing image collection schema link.
    
    Related to bp api-v2-links. The schema link for GET /v2/images was
    missing, although its target /v2/schemas/images was present. This change
    adds in the link and updates tests.
    
    Change-Id: Ida6931147d6e4fba1bb02c0be9e755fb1751b986

commit 83a108c1b0522716c48ead33cdc94141a38faac8
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Tue Jul 31 10:50:48 2012 -0700

    Drop static API v2 responses
    
    It's not helpful to tell users to discover our services but not build
    anything into the API that actually *is* discoverable (other than
    JSON schemas). This drops GET /v2 and GET /v2/schemas.
    
    Related to bp api-2
    
    Change-Id: Iea49adaa418a3e2495c0713700633785bc21d103

commit d8a582fb86b9c76797a7de3672d8d0d7c6278131
Merge: c12fbd1 bd132ee
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jul 31 17:27:58 2012 +0000

    Merge "Include dates in detailed image output."

commit c12fbd1432e6c59f0796026475365ee8443e2196
Merge: 8126d90 8c91268
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jul 31 17:09:50 2012 +0000

    Merge "Update image caching middleware for v2 URIs"

commit 8126d90aee8756195e98eae649ead6d940a2e200
Merge: 72d943e 1f68b21
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jul 31 04:44:38 2012 +0000

    Merge "Adds set_acls function for swift store."

commit bd132eebeac221729fd90def39d962f1956bdff2
Author: Michael Still <mikal@stillhq.com>
Date:   Mon Jul 30 17:28:11 2012 +1000

    Include dates in detailed image output.
    
    This adds date display to the output of commands such as "glance
    show". This is helpful for admins trying to decide if an image can
    be removed from disk safely or not. Resolves bug 1030742.
    
    Change-Id: Ic52120558f89359f1bbfac47f75ff0aa4e916434

commit 72d943e9615318b82a52b97979ebe17f0c7d5a1e
Merge: 9227e55 5112f58
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Jul 30 19:06:16 2012 +0000

    Merge "Ensure Content-Type is JSON-like where necessary"

commit 9227e55ba2337c93ff4c680fc58c28eb01913e38
Merge: 8eaf178 7956c2b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Jul 30 18:55:44 2012 +0000

    Merge "Dont show stack trace on command line for service error."

commit 8c912685eba97502d036a3a4d7f202b8398c24ca
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Tue Jul 17 11:45:34 2012 -0700

    Update image caching middleware for v2 URIs
    
    Refactor the image caching middleware to support v2 URI image data GET
    and image DELETE requests.
    
    Implements bp api-v2-image-caching
    
    Change-Id: Id89f1df473ddc46ef4992715a9ecd3246b87d442

commit 5112f58f7fd14c97cc4144faf66e2be0a4d386e6
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Sun Jul 29 22:38:27 2012 -0700

    Ensure Content-Type is JSON-like where necessary
    
    Several API calls were returning text/html as the content-type, when
    the body was actually encoded as JSON. This ensures the places where
    that was happening set content-type to 'application/json'.
    
    Fixes bug 1030730
    
    Change-Id: Iae9ed9ca798186a0663bdee1988f3acee6906db5

commit 8eaf178174e2daa60348f817fd844231e2cac5bd
Merge: fb7a6ca 94b9adc
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jul 27 22:21:58 2012 +0000

    Merge "Set deleted_at field when image members and properties are deleted."

commit fb7a6ca2778688ee55bf88b4684469f2e3d55025
Merge: 51faf28 b64d2ea
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jul 27 21:09:13 2012 +0000

    Merge "Honor '--insecure' commandline flag also for keystone authentication"

commit 51faf289453053489cc350aa363ffde3290df16b
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Fri Jul 27 13:42:30 2012 -0400

    Have non-empty image properties in image.delete payload.
    
    This patch uses the image data that is present before the image is actually
    deleted as the image.delete notification payload data.
    
    Fixes bug 1028081
    
    Change-Id: Ia1dbdbdf84a4dbaabca8395f9539e58936589563

commit 1284b30c93862ff7685db4021c2a87a0a0c7e672
Merge: b263ad2 1090dbe
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jul 26 19:58:15 2012 +0000

    Merge "Add Content-MD5 header to V2 API image download"

commit b263ad23475f67375a0a1672a28f8004d0a74387
Merge: 6668a61 687604b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jul 26 18:02:24 2012 +0000

    Merge "Make functional tests listen on 127.0.0.1."

commit 1090dbecfa74e97b48bb974834186860c501f7da
Author: Lars Gellrich <lars.gellrich@hp.com>
Date:   Thu Jul 26 15:41:44 2012 +0000

    Add Content-MD5 header to V2 API image download
    
    If an image is downloaded via the V2 API and its checksum is known
    (not None), assign the checksum to the Content-MD5 header.
    
    Related to blueprint api-2
    
    Change-Id: Ib34e9800833a6913c992de1a18f9fc331661f057

commit 1f68b21de8b8a3366eb08fe1fa74ae7db2ac72b4
Author: Dan Prince <dprince@redhat.com>
Date:   Sun Jul 1 17:11:41 2012 -0400

    Adds set_acls function for swift store.
    
    Updates the swift store with working implementation of set_acls.
    
    Updates the base store with an example set_acls function.
    
    This function may be implemented by stores which support backend ACLs
    to allow Glance to set read and write ACL's on the store images.
    
    Added tests for swift store function.
    
    Partially implements blueprint: swift-tenant-specific-storage.
    
    Change-Id: I7fbd66b5abf8d27c26bdc5e7d6adc98b5722b647

commit 6668a6111954af0d2e5d560e96cecf8e51e87c95
Author: Dan Prince <dprince@redhat.com>
Date:   Sun Jul 1 08:03:56 2012 -0400

    Store swift images in separate containers.
    
    Updates the swift storage backend so that when using multi tenant
    each images gets stored in a separate container.
    
    As part of this change the unit tests were updated to generate unique
    swift container names for each test. This acts as a container prefix
    in multi-tenant mode so the tests were also updated to cleanup all
    swift containers matching the container name prefix as well.
    
    The motivation for this change is so that we can set swift read/write
    permissions on each individual image.
    
    Partially implements blueprint: swift-tenant-specific-storage.
    
    Change-Id: I43f33594fb40dee33ef52e8ae873722e20b09a10

commit c713fb3385cb794994bdd64d6d3b9486f04b280a
Merge: 33ebb37 8b2d038
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jul 25 14:06:55 2012 +0000

    Merge "Adds multi tenant support for swift backend."

commit 33ebb37f4a263bc89c3d419c6936c60396d12f82
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Tue Jul 24 12:51:54 2012 +0000

    Include chunk_name in swift debug message
    
    Add chunk_name to swift upload debug message. Helps
    to track which image the chunk is part of when several
    uploads are occurring.
    
    Fixes LP bug #1028433.
    
    Change-Id: Ieacfd397939b77246e8c89214cbe902c3ed3e28c

commit 94b9adc4a6a09f3c2b25130888b6a02134e01cc8
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Mon Jul 23 16:43:53 2012 -0400

    Set deleted_at field when image members and properties are deleted.
    
    fixes bug 1028101
    
    Change-Id: I3e9ffa9a97b57912d922ffadce31ed1ce0261fb4

commit 617609a2f38310cd4d45f0fc0d7a795ab77c02f7
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Tue Jul 17 16:20:36 2012 -0700

    Use size_checked_iter in v2 API
    
    The image file returned in the v2 API should be treated the same
    as in the v1 API. This patch wraps the returned image data in
    the v2 API controller with glance.api.common.size_checked_iter
    
    Change-Id: If7514a4394b17844d92b9737214898f954fe95a6

commit b64d2ea1558d8408d4b3bcd070ab6dce1d7a02d1
Author: Sascha Peilicke <saschpe@suse.de>
Date:   Wed Jul 18 10:53:18 2012 +0200

    Honor '--insecure' commandline flag also for keystone authentication
    
    Currently, keystone auth fails with self-signed certificates. This patch
    essentially passes this value down to KeystoneStrategy._do_request. This
    way, the '--insecure' flag is used by glanceclient to either validate
    all SSL certificates or none. Fixes bug 1003711.
    
    Change-Id: Ia9c9b762d2d474767984b4729bb50a8b78d6cb3f

commit 687604baf67fdbf69cb45dd34a2e6ec98062ee4d
Author: Josh Kearney <josh@jk0.org>
Date:   Thu Jul 19 14:52:51 2012 -0500

    Make functional tests listen on 127.0.0.1.
    
    Fixes bug 987399.
    
    Change-Id: I2a393d9b01c8ae17f289941530a1d4319b174f87

commit 8b2d038185a6d229662260819943c40eefee8bd6
Author: Dan Prince <dprince@redhat.com>
Date:   Fri Jun 29 14:43:29 2012 -0400

    Adds multi tenant support for swift backend.
    
    Updates the swift store to support multiple tenants:
    
     * Added configuration option for swift_store_multi_tenant.
    
     * Updated the swift connection creation logic so that in multi-tenant
       mode the token and storage URL from the service catalog are used
       to create swift connection.
    
     * When in multi-tenant mode locations URL's (stored in the DB) do
       not contain hard coded swift credentials.
    
    Includes unit tests to verify multi-tenant swift storage URLs.
    
    Partially implements blueprint: swift-tenant-specific-storage.
    
    Change-Id: I45fc97027e6f211ac353513c2d9d6da51ccf4489

commit 53e210a0b32d1fad4678e978995433692cfb09cc
Author: Dan Prince <dprince@redhat.com>
Date:   Fri Jun 29 07:50:10 2012 -0400

    Provide stores access to the request context.
    
    Adds context to the constructor for the Store class. This can be used
    to provide Store's access to the RequestContext.
    
    Includes the following changes:
    
    * Updates common store helper methods to create new instance of
      Store objects for each request.
    
    * Updates Glance scrubber to create a real context from credentials.
    
    The motivation for this change is that we will need access to the
    service catalog and token for the Swift multi-tenant backend.
    
    Partially implements blueprint: swift-tenant-specific-storage
    
    Change-Id: I3def2b7c4085a36dd6c0961e762783ebaf7ffa74

commit 1b45a115dd3137a38444b7891a44cbb386d7715b
Merge: 79c298d bd018d6
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jul 19 17:07:48 2012 +0000

    Merge "Move checked_iter from v1 API glance.api.common"

commit 79c298dc1b8fcec29916ea0e520835939e1f0c40
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Wed Jul 18 09:42:53 2012 +0000

    Increase wait time for test_unsupported_default_store
    
    Fix for LP Bug #1026047.
    
    Allow unit test 'test_unsupported_default_store' to
    successfully run on a slow machine.
    
    Change-Id: I4d49c821aeb3027b7f33babf6c4bafe00644f0c9

commit d69a442d09feecd7a138a001849583a293db9af6
Merge: f591a85 251c5e5
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jul 18 20:47:30 2012 +0000

    Merge "Replace example.com with localhost for some tests"

commit f591a85840b1ec17f6b1dd930b7298931f27754f
Merge: dc2f241 35d865a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jul 18 19:30:38 2012 +0000

    Merge "Fix registry error message and exception contents"

commit dc2f241c115507f8e5c4e7841739f2b8303943e2
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Wed Jul 18 09:22:02 2012 -0700

    Match path_info in image cache middleware
    
    The url matching code in the image cache middleware should only look at
    the unconsumed path, not the full path. Webob denotes this by using
    'path_info' instead of 'path.'
    
    This also adds some tests for the version negotiation middleware to ensure
    it is returning a sane path for the image cache middleware to match.
    
    Fixes bug 1026222
    
    Change-Id: I522e2210e2b7272f9bb47602510a2910fa193415

commit 7956c2bec87b75f59f1453c531f9b1557a6196a5
Author: Sulochan Acharya <sulochan.acharya@rackspace.co.uk>
Date:   Tue Jul 17 09:22:36 2012 -0500

    Dont show stack trace on command line for service error.
    
    - Fix bug 996648
    
    Currently if the Registry service is not running, any glance command
    will show the Internal server error exception response body on the command line.
    This fix proposes to hide that trace with a more generic message. Users can
    still see the trace on log file in debug.
    
    Change-Id: Ia86c42002ae8daabe0d7ad92a2017f1869b10853

commit c244424138282061a822038d0918ead6754ae591
Merge: 9aa4d92 a0689d2
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jul 18 14:50:46 2012 +0000

    Merge "Use openstack.common.log to log request id"

commit 251c5e588a168d4aae406e28d2c8da1e307f4275
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Wed Jul 18 09:18:55 2012 +0000

    Replace example.com with localhost for some tests
    
    Fix for LP Bug #1025756.
    
    When running the unit tests on a system without a
    direct internet connection some tests run slowly.
    Replacing example.com with localhost:0 speeds up
    the relevant tests.
    
    Change-Id: Iac6fc506b1d36b18ab21bb956ec2d8acc004bba8

commit 35d865a48cbeb7b21ff68b74c39dde6639469c74
Author: Tom Hancock <tom.hancock@hp.com>
Date:   Tue Jul 17 17:25:50 2012 +0000

    Fix registry error message and exception contents
    
    The variable image_id should have been used instead of the global
    identifier id
    
    Fixes LP Bug #1026072
    
    Change-Id: I2e73810e3165dd8b7032359b5fb8a874e592736f

commit bd018d68bd88ab00b806943981cac10644c10573
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Tue Jul 17 16:20:00 2012 -0700

    Move checked_iter from v1 API glance.api.common
    
    The checked_iter image streaming wrapper should be in a common
    place so the v2 API code can use it as well. This moves it to
    glance/api/common.py and gives it a slightly more descriptive
    name 'size_checked_iter'.
    
    Change-Id: I9fbf2c76666bfc0b9227a6a6c4d824367526e56a

commit 9aa4d923c45492d4f2846ea7f38208cbc55ab8fb
Merge: 5840f1d ede120a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jul 17 15:33:50 2012 +0000

    Merge "Updates run_tests.sh to exclude openstack-common."

commit 5840f1debbe4fe46fb70de928a4008eb1e3e4599
Merge: 6873195 920096f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jul 17 15:26:08 2012 +0000

    Merge "Prevent client from overriding important headers."

commit 6873195cd19d519a5f6f31461b7b683e33b19784
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Thu Jul 12 15:04:22 2012 +0100

    Support zero-size image creation via the v1 API
    
    Addresses LP 1025353 for the v1 API.
    
    Transition image status to active immediately on creation
    (as opposed to leaving it queued forever) if the size is set
    to zero from the get-go.
    
    The v2 implementation is left unchanged for now, as the image
    status does not appear to ever transition from queued to active
    in that case.
    
    This change allows an image to be created that simply acts as
    a properties bucket, but requires no image data. For example,
    an image created from a booted-from-volume instance where only
    the kernel, ramdisk ID, and block device mappings are required.
    
    Change-Id: I61e96f3fe5f5245fec791170b4a8b4c72135c3de

commit 920096f0f6c7fdc20d906b58e202a5d505dd3a4e
Author: Lars Gellrich <lars.gellrich@hp.com>
Date:   Mon Jul 16 15:20:33 2012 +0000

    Prevent client from overriding important headers.
    
    The glance client offered the opportunity to override
    important headers via the features parameter during image
    creation or update.
    
    Created a blacklist of unsupported features like:
    content-length
    content-type
    x-image-meta-size
    
    These headers should not be overriden by the client.
    
    Fixes LP Bug #1023892
    
    Change-Id: I14aac59e00a2672fd98f6dab221096ab5de86855

commit 00a76835556ecf056bc793c6ade7f59ded8b750b
Merge: 8f745a2 8935b32
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Jul 14 02:09:53 2012 +0000

    Merge "Making docs pretty!"

commit ede120a32d22d39397500304a74c40a11b7f0df3
Author: Dan Prince <dprince@redhat.com>
Date:   Fri Jul 13 14:10:56 2012 -0400

    Updates run_tests.sh to exclude openstack-common.
    
    We exclude openstack-common in tox.ini already. This change updates
    run_tests.sh to match that behaviour.
    
    Change-Id: I1bf5784193e63156bc5fe140ad6e403669c7909d

commit a0689d2b458bb1145ec9b8c17ee09ccfcc32d139
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Fri Jul 13 10:49:41 2012 -0700

    Use openstack.common.log to log request id
    
    * Log request id from the request context for glance-api
      and glance-registry
    * Further integrate with the common log module by storing RequestContext
      objects in thread-local storage so loggers can acces their attributes
    * Move request id formatting into the request module so it appears with
      the preferred prefix (req-) in logs
    * Implement bp glance-request-tracking
    
    Change-Id: I2095ad16fef6b4bc8e49229c9f0326da8c743ff7

commit 8f745a25a1d21a560ee0ce9390a0e6bf9df6abe8
Merge: 2bee2a2 78dbcfa
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jul 13 14:34:18 2012 +0000

    Merge "Make get_endpoint a generic reusable function."

commit 2bee2a2074d8d958adfc4e555c76bc21dcf70a9e
Merge: 29dc7bf 279d07e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jul 13 00:44:41 2012 +0000

    Merge "Update 'logging' imports to openstack-common"

commit 29dc7bf00aec559b8013706181445d4767a47231
Merge: 69d3cd5 ade7b4f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jul 13 00:44:34 2012 +0000

    Merge "Remove microseconds before time format conversion."

commit 279d07eebba14f819d2e950069284d8e18fc04f6
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Tue Jul 10 21:39:06 2012 -0700

    Update 'logging' imports to openstack-common
    
    Change-Id: Ia1a7b5062e7f882971f2061274f6a4a44cfc8ced

commit 69d3cd58b755ac6c50b1aef31131819c911e41f6
Merge: 444ad45 030e8b4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jul 12 22:54:59 2012 +0000

    Merge "Removing 'Indices and tables' heading from docs."

commit 78dbcfa9e5cb8fcbb3ea7c0d82370b48a692b9ab
Author: Dan Prince <dprince@redhat.com>
Date:   Thu Jun 28 10:23:19 2012 -0400

    Make get_endpoint a generic reusable function.
    
    This patch refactors the get_endpoint function to make it more generic
    and top level so that it can be more easily accessed and tested.
    
    Adds service_type, endpoint_region, and endpoint_type options to
    the get_endpoint function as well.
    
    Added a new test suite specifically for get_endpoint.
    
    The motivation for this change is that we'll need to be able to
    parse the 'object-store' endpoint for each tenant in order to
    enable multi-tenant storage in the swift storage backend.
    
    Partially implements blueprint: swift-tenant-specific-storage
    
    Change-Id: Icf773a1eb057fc9d65cf54890afa4638f2aee0b4

commit 444ad454b76cb2584a45b58c6ed4444d1bfc4530
Author: Dan Prince <dprince@redhat.com>
Date:   Thu Jun 28 10:16:35 2012 -0400

    Adds service_catalog to the context.
    
    Updates the ContextMiddleware so that it stores the service_catalog
    which from set via Keystone's auth_token middleware.
    
    The motivation for this change is that we'll need access to the
    'object-store' endpoint in order to implement swift tenant specific
    storage.
    
    Partially implements blueprint: swift-tenant-specific-storage
    
    Change-Id: I0389e135f6683a353ae915b543d70f6ac1246b2c

commit bcb28c3699509e2114ef396c9376940b3d978ede
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Tue Jul 10 21:41:23 2012 -0700

    Add openstack-common's local and notifier modules
    
    Change-Id: I90e063934d64598b440676b63b4be55262f923f1

commit 8935b3268621d1502d922772c115090276bc7aca
Author: jakedahn <jake@ansolabs.com>
Date:   Wed Jul 11 15:25:40 2012 -0700

    Making docs pretty!
    
      * Before: http://stsh.me/2Qt
      * After: http://stsh.me/2Qu
    
    Change-Id: Idca673ee6157e62afc1aef76413f2d54ae8e5c9f

commit 030e8b4b07928543dbb2ab403949f0d20ff1bd29
Author: jakedahn <jake@ansolabs.com>
Date:   Wed Jul 11 15:03:06 2012 -0700

    Removing 'Indices and tables' heading from docs.
    
      * Bug 955475
    
    Change-Id: Ibcd2d2ed535a548d76c8afad54673135c20c8232

commit ade7b4f7d0ed907d87c0b906fcbf9bd5649d4c09
Author: Dan Prince <dprince@redhat.com>
Date:   Sun Jul 8 16:44:58 2012 -0400

    Remove microseconds before time format conversion.
    
    Updates Glance scrubber so that it chops microseconds off of the
    date format before parsing a time format string. This fixes
    an exceptions that can occur when using scrubber with databases
    like PostgreSQL which include microseconds in date strings.
    
    Fixes LP Bug #1022369.
    
    Change-Id: I2e9eb66052d8ce34438a4c1ba7a5174cc2385bcf

commit 5985ef6a0aa541e9faa2104bf8108464822ce258
Author: Dan Prince <dprince@redhat.com>
Date:   Tue Jul 10 18:10:18 2012 -0400

    Add bin/glance-replicator to scripts in setup.py.
    
    Fixes LP Bug #1023182.
    
    Change-Id: I7c5627b4b3390b500e159edace02bdd0417fc59e

commit 77d534e708b788a83292fbef542f8b7f81454f8a
Merge: 9121796 18ee412
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jul 10 19:25:36 2012 +0000

    Merge "Initial implementation of glance replication."

commit 9121796ca812207498937aeb99e032f011c5dc6a
Merge: 06f7fe9 b77ec18
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jul 10 19:25:35 2012 +0000

    Merge "Add function tests for image members."

commit 18ee4122ad79b17bcf5356aebc7a2501aaf3cec4
Author: Michael Still <mikal@stillhq.com>
Date:   Mon May 21 11:02:26 2012 +1000

    Initial implementation of glance replication.
    
    * Add the glance-replicator binary
    * Initial implementation of bp image-replication
    
    Change-Id: I7dabbd6671ec75a0052db58312054f611707bdcf

commit 06f7fe92a6e164c3f62bc107807e9587a84b995f
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Mon Jul 9 12:57:39 2012 -0700

    Generate request id and return in header to client
    
    * Generate a uuid in RequestContext.request_id on init
    * Present request_id in an 'x-openstack-request-id' header using
      process_response in the ContextMiddlewares
    * Related to bp glance-request-tracking
    
    Change-Id: Idd9b86661322250b6167a1ee23e5baae91066ff6

commit ce899351dac7dbdfa8d31d26e3d5244b9768dc06
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Mon Jul 9 08:05:28 2012 -0700

    Reorganize context module
    
    * Move RequestContext class to glance.context
    * Move context middlewares to glance.api.middleware
    * Update tests to reflect move
    * Update paste configs
    
    Related to bp glance-request-tracking
    
    Change-Id: I289b546ec28c973a3022be779ce378ae2febb340

commit 320f809ba1c1a31eac204daa9c6e9bff459be27f
Merge: 7d8045d c1e9986
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jul 10 05:19:08 2012 +0000

    Merge "Allow admin's to modify image members."

commit 7d8045d4779d1d4e5b2065cf8c4547cc67e55fb4
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Mon Jul 9 13:56:04 2012 -0700

    Add openstack.common.log
    
    Change-Id: I3827a319db649a2264aa260cd964e0a093fef524

commit 4b162a536f128d5f4e6b780f251886fc246802d8
Merge: cff235e 802b9cb
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jul 10 01:49:58 2012 +0000

    Merge "Ignore openstack-common in pep8 check"

commit 802b9cb84bd11ba742edee07934b26828cf31717
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Mon Jul 9 14:39:29 2012 -0700

    Ignore openstack-common in pep8 check
    
    Change-Id: Ic48b12918f8e3ca439917a614927b41cd099c63a

commit cff235e484e79325e9b4b1575fe7992d9a691ea3
Author: Monty Taylor <mordred@inaugust.com>
Date:   Thu Jul 5 09:03:40 2012 -0500

    Keystone dep is not actually needed.
    
    An end user might need to install keystone to use the default config,
    but glance testing uses stubbed out fakes.
    
    Fixes bug 1021798
    
    Change-Id: I99da75d29ba483125518760126d6145310ae1479

commit d6ffe3828c5fe0cb86a95c046bb54ceb43da8f6b
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Tue Jul 3 09:55:02 2012 -0700

    Report size of image file in v2 API
    
    Size will be None until image data is uploaded. The size attribute
    will be updated to reflect the actual size. Related to bp api-2.
    
    Change-Id: I577d8005b9ce60bf1470cda43413f0cdc034dbe1

commit 919c3d9d176d022240bf08a903c88c03123cac3c
Merge: a93d04a 1a094d5
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Jul 9 17:42:14 2012 +0000

    Merge "Simplify v2 API functional tests"

commit a93d04abf35caa4733e00f92ddfd6850c9f26a3d
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Mon Jul 2 14:38:27 2012 -0700

    Expose owner on v2 image entities
    
    Expand v2 image serialization to accept and return the 'owner'
    attribute. All image entities have an owner attribute, while only
    admins can provide it in a request. Related to bp api-2.
    
    Change-Id: I8746574528c8be1f17cf570c91ba6bd7ef27b032

commit 60159ad3d20b9fc087fd675cd0000e91c99abcb5
Merge: c70974a c80a4d2
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jul 6 15:55:47 2012 +0000

    Merge "Use PyPI for swiftclient."

commit c70974abd658d697fe8b664201ae2f938891db73
Merge: 33ed25f 7dc34f4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jul 6 15:54:38 2012 +0000

    Merge "Add retry to server launch in respawn test."

commit b77ec18601bc08146d4b2695364cd49c5394d42e
Author: Dan Prince <dprince@redhat.com>
Date:   Tue Jul 3 10:44:20 2012 -0400

    Add function tests for image members.
    
    Updates the bin/glance test suite with support for testing image
    members.
    
    Change-Id: I3e9ba6c59ebc5969b1cee8773c2b6610c1968872

commit c1e99863533d263293b3bb3b8f6b7d34ad4d6b81
Author: Dan Prince <dprince@redhat.com>
Date:   Tue Jul 3 10:41:02 2012 -0400

    Allow admin's to modify image members.
    
    Updates the v1 Glance API and Registry controllers so that admins
    can modify image membership regardless of image ownership.
    
    The motivation for this change is to be able to test image membership
    when noauth middleware (UnauthenticatedContextMiddleware or
    FakeAuthMiddleware) is being used and includes the following changes:
    
     * Added is_admin option to FakeAuthMiddleware.
    
     * Refactors the access checks into a common function called
       _check_can_access_image_members.
    
     * API unit tests which require is_admin=False for noauth were also
       refactored to use an improved FakeAuthMiddleware which supports
       is_admin = False.
    
     * Update RegistryClient to use get_status_code int for 204 status code
       comparisons. Fixes issue where incorrect status code was returned.
    
     * Updated members unit tests to support these changes.
    
    Fixes LP Bug #1021740.
    
    Change-Id: I9d0e4679f9c0cb37f6df7c6f90460c22c37f3fbd

commit 33ed25f8923661e79e91362920ea14fb26aeb0e9
Merge: a61b4bc 70e9690
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jul 5 20:12:35 2012 +0000

    Merge "Improve eventlet concurrency when uploading/downloading."

commit a61b4bc3776bad642e91bfd4ef414b45c181afff
Author: Dan Prince <dprince@redhat.com>
Date:   Tue Jul 3 10:31:13 2012 -0400

    Allow admins to share images regardless of owner.
    
    Updates the Glance DB's is_image_sharable function so that
    an admin can share an image regardless of the context ownership.
    
    This fixes issues when trying to write Glance functional tests
    which use the noauth middleware (UnauthenticatedContextMiddleware).
    
    The motivation behind this change is I'd like to write some
    functional tests for image-members that work with noauth.
    
    Fix bug 1021054
    
    Change-Id: I6d939876a4c4bf5f191463f5ca434fc524a6ac59

commit 70e9690830653ed92d15c4a696cae8778c635206
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Wed Jul 4 16:38:07 2012 +0000

    Improve eventlet concurrency when uploading/downloading.
    
    When uploading/downloading multiple images using the
    same glance-api worker process some of its eventlet
    threads can become starved. Inserting statements to
    trigger cooperative yields, ie sleep(0), allows fairer
    scheduling of the other eventlet threads.
    
    Fixes LP Bug #1021002.
    
    Change-Id: I5a8f255e9507d18813d07d418e6acefa10d9f6bb

commit 1a094d5388b9345112e6ee18c2c56cb6858c6657
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Tue Jul 3 08:50:57 2012 -0700

    Simplify v2 API functional tests
    
    Remove overly-verbose and duplicated test coverage from
    the v2 images functional tests.
    
    Change-Id: Ie6b8057f1d73fd3f1d85e862d3072fc270aef5bd

commit 517a0262086b0346068dfd57a57d68d9e0830bf1
Merge: 4ca2cf4 737bfc3
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jul 3 17:50:45 2012 +0000

    Merge "Fix IndexError when adding/updating image members."

commit 4ca2cf44e88b763d360729c494e5026ddf6febbd
Merge: ad4a10b 878b25e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jul 3 17:47:06 2012 +0000

    Merge "Reorder imports by full import path"

commit 737bfc30b101a52612b70d6c33fb485809cd977a
Author: Dan Prince <dprince@redhat.com>
Date:   Mon Jul 2 23:02:08 2012 -0400

    Fix IndexError when adding/updating image members.
    
    This patch updates the v1 registry API to work with the latest
    DB API image_member_find function which no longer throws
    NoResultFound when it doesn't find any records.
    
    The latest version of the DB API image_member_find function simply
    returns an empty query result.
    
    This fixes both member-add and members-replace functionality.
    
    Fixes LP Bug #1020380.
    
    Change-Id: I8818c90e09bd9a17f208d0e20106007db04e77f1

commit ad4a10b2f17f7e7f77137ea4a82f393febb69f54
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Mon Jul 2 20:42:06 2012 -0700

    Report image checksum in v2 API
    
    * Report checksum with image entities
    * Set checksum when image data is uploaded
    * Related to bp api-2
    
    Change-Id: I6b4f859184cff37cea247bfa56c9c6bebd256969

commit 813e299f282924ee6724aada5dc5e54f4a3188ac
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Mon Jul 2 20:30:12 2012 -0700

    Store properties dict as list in simple db driver
    
    Rather than store image properties as a dict, use a list of
    dictionaries with name and value keys. Fix bug 1020388.
    
    Change-Id: Ia41e48cb4e869d01c93466103dea8fb1b0ec07a2

commit c80a4d28dd8543399a6e1ada1fd57b30536abeb6
Author: Monty Taylor <mordred@inaugust.com>
Date:   Mon Jul 2 17:42:42 2012 -0400

    Use PyPI for swiftclient.
    
    Change-Id: I3cbef069459c82ab175998a8f58091cd8214cb3c

commit faa5ec7bffe300a4178ec699d6d2a46e033004a7
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Tue Jun 26 15:35:42 2012 -0700

    Refactor pagination db functional tests
    
    The pagination-related functional tests are overly complex and aren't
    adding a lot of value. This rewrites them in a more straightforward way
    by incorporating them into the main test class.
    
    Related to bp refactor-db-layer
    
    Change-Id: Ic08914cfa8135d73a4aae6724a6561bc337b91fb

commit c56cfffc7883412ab267156c0c4fe026a2d427ca
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Tue Jun 26 10:45:15 2012 -0700

    Combine same-time tests with main db test case
    
    Rather than re-run all of the base test methods to test with
    image fixtures with identical created_at timestamps, we should
    just run methods that matter. This patch removes the subclass
    that sets identical timestamps in favor of adding a third fixture
    to the main test case.
    
    Related to bp refactor-db-layer
    
    Change-Id: I69d0b21d1ef825333881e021dfa9610f1bbad334

commit 82c88313f4e079e86e83741969d8c3a037b89b37
Merge: a404d6b 8a1bcb0
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Jul 2 17:29:47 2012 +0000

    Merge "Include all tests in generated tarballs"

commit 7dc34f41bf2b4b008cf30948e6824f8bb798e94b
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Mon Jul 2 14:25:13 2012 +0100

    Add retry to server launch in respawn test.
    
    Avoid test failures caused by EADDRINUSE.
    
    Change-Id: I8cf044b55da30a56c7e2d1435085d23bd198c275

commit 878b25ea2e3cb89b440e773687fc2e4d6f354cb6
Author: Zhongyue Luo <lzyeval@gmail.com>
Date:   Sat Jun 30 08:41:01 2012 +0800

    Reorder imports by full import path
    
    Fixes bug #1019463
    
    Change-Id: I3fb44cbacb09457ea34571222e0a8e8d4b8d7c87

commit a404d6b39074460b4055e6f7306b731222f5169f
Author: Mark Washenberger <mark.washenberger@rackspace.com>
Date:   Fri Jun 29 20:10:59 2012 +0000

    Adds /v2/schemas/images
    
    Fixes bug 1019401
    
    Change-Id: I4fcb9286e5aec0984b61285bfff794126f64d00a

commit 414114e5defb1145c87b4ff5f7b1421e9e9c0a4d
Merge: 7d101eb 1e9bc67
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jun 29 14:59:43 2012 +0000

    Merge "Implement image filtering in v2"

commit 7d101ebcc0ee6cfb31c1f7d7575ad38460383241
Merge: 2f3d054 2a61bf3
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jun 28 20:07:12 2012 +0000

    Merge "Allow CONF.notifier_strategy to be a full path"

commit 1e9bc679b4f3e4c760f11d0e2fb2385134cc6072
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Thu Jun 21 16:40:11 2012 -0400

    Implement image filtering in v2
    
    This allows filtering /images on image attributes and properties.
    In order to filter you just do /images?<filter_key>=<value>.
    For Example: /images?name=image-1
    or user defined image properties:
    /images?foo=bar
    
    You can also filter by a numeric ranges by appending _min and _max to the
    filter key.
    For Example: /images?size_min=15
    For Example: /images?size_max=20&size_min=15
    
    Implements blueprint: api-v2-images-filtering
    Change-Id: Icdbe7c325d08328efb164accf76684a83369c137

commit 8a1bcb0a4bfd0bf38d6e9138356f2b5c872f1728
Author: Thierry Carrez <thierry@openstack.org>
Date:   Thu Jun 28 14:40:45 2012 +0200

    Include all tests in generated tarballs
    
    Make sure all glance/tests is actually shipped in generated
    tarballs. Rather than adding yet another specific entry, recursively
    include all glance/tests and globally exclude all .pyc.
    
    Change-Id: I7875c58dece452b5356cf7e268f504780ec30bff
    Fixes: bug 1018830

commit 2a61bf38ff6dae16083145e6f27d66731d5c3271
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Wed Jun 27 13:49:15 2012 -0700

    Allow CONF.notifier_strategy to be a full path
    
    Rather than limit the notifier_strategy to a list of internal
    drivers, we should also allow a user to supply a full path
    to a custom driver. This is going to help us functionally test
    our notification system without having to ship a fake driver.
    
    Fixes bug 1018638
    
    Change-Id: Ib1cae7b979dabfaa6b8b5aa59719aad2ac12d169

commit 2f3d0546164e6b5e55ad412fdb7e2b068ae9a228
Author: iccha <iccha.sethi@rackspace.com>
Date:   Tue Jun 19 22:12:39 2012 +0000

    Add image access records schema for image resources
    
    Implements blueprint api-v2-refactor-schemas
    
    Change-Id: Ic79d6661d44976057016e1a570674f47a962a3db

commit 0a7473bb10d04200849beb318c592c287760ce21
Merge: 1cb53f9 f634eb3
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 27 20:27:28 2012 +0000

    Merge "Added schema links logic to image resources"

commit 1cb53f9ad5f5ee93893fed07acb14d09cf1e5cca
Merge: 3b824f8 9f7b374
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 27 20:15:52 2012 +0000

    Merge "Make image.upload notification send up2date metadata"

commit 3b824f8e6309a727ef382f6ecf2e488f76b99b5b
Merge: 9127701 5e63a22
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 27 19:34:35 2012 +0000

    Merge "Remove image members joinedload"

commit 9127701b669be6adec9ce46091b7c92d309f5c35
Merge: dc9a334 cc900ef
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 27 18:21:50 2012 +0000

    Merge "Clean up image member db api methods"

commit dc9a334132206713120909b64bcd9a051dd04f9d
Merge: 518093b 39f696a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 27 17:51:48 2012 +0000

    Merge "Retry test server launch on failure to listen."

commit 5e63a2246287ced02fa9bfd52f1f2591b2277c4c
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Mon Jun 25 21:24:04 2012 -0700

    Remove image members joinedload
    
    * Drop the joinedload on members in image_get and image_get_all
    * Related to bp refactor-db-layer
    
    Change-Id: I6f09c18ad345faa5702f0757566c6abc7eb128b8

commit cc900ef68fab491905823539901dcdaf3057be4f
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Mon Jun 25 17:51:15 2012 -0700

    Clean up image member db api methods
    
    * Drop image_member_get
    * Drop image_member_get_memberships
    * Repurpose image_member_find for collection filtering
    * Write a db api functional test to cover image_member_find
    
    Change-Id: I7fc17156feac98ba5d22a436aabfbe50114c6c61

commit 39f696af21c9f367cdbad6d30866ae4ad66a1634
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Tue Jun 26 17:43:46 2012 +0100

    Retry test server launch on failure to listen.
    
    In the functional tests, the registry server intermittently
    fails to listen on the expected port, with the strace revealing
    an EADDRINUSE error.
    
    We now retry the service launch on a fresh port.
    
    Change-Id: Id2e06a7ae90c4a9aa3ff33c19316ebf854a30e22

commit 9f7b374e8b7f3900991dee2a9d444c809af7069f
Author: Chris Behrens <cbehrens@codestud.com>
Date:   Wed Jun 27 03:58:57 2012 +0000

    Make image.upload notification send up2date metadata
    
    The dictionary passed is not updated with image size, etc.
    
    Fixes bug 1018246
    
    Change-Id: I735d355891fcbd6b1db088b218b8fd808b8908e1

commit f634eb381ea6e8c2da29c41e9c508d140fed34d6
Author: iccha <iccha.sethi@rackspace.com>
Date:   Tue Jun 19 16:13:22 2012 +0000

    Added schema links logic to image resources
    
    Implements blueprint api-v2-links
    
    Change-Id: I5b4df7b14b27a52b782c812537118751213be541

commit 518093bc0625ceecd0ea1853814db617e4fa31c3
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Mon Jun 25 16:52:00 2012 -0700

    Simplify sqlalchemy imports in driver
    
    This greatly simplifies the sqlalchemy-related imports in
    glance.db.sqlalchemy.api. Related to bp refactor-db-layer.
    
    Change-Id: I60d39baee420c68efd2f00bbd13162d1b78d9c94

commit c45fe202c54f3397064709a88ec1f3f3ee993db6
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Mon Jun 25 08:31:02 2012 -0700

    Reduce 'global' usage in sqlalchemy db driver
    
    Related to bp refactor-db-layer
    
    Change-Id: I1e3e79975fb346d4e721f044db3f8a76690e69ca

commit 4363af6cc81e4bc63fb39fae7b059ca3defaabe0
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Wed Jun 20 10:33:43 2012 -0700

    Standardize logger instantiation
    
    Use LOG for variable name and __name__ for logger name. Also
    document this fact in HACKING.rst
    
    Fixes bug 1015685
    
    Change-Id: I0d9d80bef66197a28ed3d650f17859202048d776

commit 595210b2aa293ebccaa4c7d6dd2b860f0bb03c40
Merge: 202439f cdb2a4f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Jun 25 15:16:21 2012 +0000

    Merge "adds missing import and removes empty docstring"

commit 202439f4096336f2b7402411c8b33a401e87af74
Author: Mark J. Washenberger <mark.washenberger@rackspace.com>
Date:   Thu Jun 14 16:45:24 2012 -0400

    Add link descriptor objects to schemas
    
    Part of blueprint api-v2-links
    
    Change-Id: I1e03b38c51931a380c197def88501c4dd483273c

commit c9599a67557eee55ad6429fba42a9d382cd389fe
Author: Sean Dague <sdague@linux.vnet.ibm.com>
Date:   Fri Jun 22 17:52:08 2012 -0400

    Fix exception if glance fails to load schema
    
    * Fixes bug 1016762
    
    Change-Id: Id1f39d39738289161fe43a22c497ee76b7a9574b

commit 5599c951e0078a9276673b57dced828a57a21a99
Author: Mark J. Washenberger <mark.washenberger@rackspace.com>
Date:   Thu Jun 14 13:18:18 2012 -0400

    Move the particulars of v2 schemas under v2
    
    Implements blueprint api-v2-refactor-schemas
    
    Change-Id: I6ddb0aa9a8fdac2d9a7210e0d0b0fb91e8220396

commit 5a45f021521871757826da313386c8b418c92a97
Merge: 13f6fc8 1da7699
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jun 21 22:24:31 2012 +0000

    Merge "Set up Simple DB driver tests"

commit 13f6fc8ff12c45cb24231810e4aebf962a8ae3ed
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Tue Jun 19 11:37:27 2012 -0400

    Remove listing of image tags
    
    Change-Id: I22a37e0b841255a652d8083a49317086dca2dcc4

commit 1da76999110f80d058e0647fea05ee429a3a891d
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Wed Jun 20 14:29:08 2012 -0700

    Set up Simple DB driver tests
    
    This adds a few bootstrappy test cases to get the db tests running
    against the simple db driver. I've also added a decorator for the
    simple driver methods to make these tests uber useful.
    
    Change-Id: I51cc9c19fd800f7991a46b80ee964a150820ec10

commit 067c41b789a8c8432de812c3336074854790cb77
Merge: 7d041b3 f07a4db
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 20 18:02:06 2012 +0000

    Merge "Revert "Funnel debug logging through nose properly.""

commit 7d041b314e60ceb6b20a2fc8735a01b73d3246e4
Merge: 47292e9 199128a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 20 17:03:27 2012 +0000

    Merge "Remove some more glance-cache PasteDeploy remnants"

commit 47292e98fd2cacb2297588eae6a4729cb60a9465
Merge: bff6242 c44e16a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 20 17:03:25 2012 +0000

    Merge "Don't use PasteDeploy for scrubber and cache daemons"

commit bff62428043b793e9221ac3fb2cb670ca80cf2b6
Merge: 71ba934 be7efbd
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 20 16:54:15 2012 +0000

    Merge "Trace glance service on launch failure."

commit 71ba934c121abc9cf86e5cbbbcdf532cee1cc55c
Merge: 7d45f08 31dcaec
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 20 16:52:01 2012 +0000

    Merge "Capture logs of failing services in assertion msg"

commit 7d45f0867b5728cc331f5c05dd1bb19d2bb47c61
Merge: d1a81a7 3b4d7a4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 20 16:48:51 2012 +0000

    Merge "Convert db testing to use inheritance"

commit d1a81a73be04119ff573e6c7c22043177aeb435c
Merge: a1fbd0b 5d53e99
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 20 16:47:40 2012 +0000

    Merge "Remove unused imports in db migrations"

commit be7efbdfd0965145b42915e23832bd6671d44165
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Tue Jun 19 22:31:30 2012 +0100

    Trace glance service on launch failure.
    
    Where a glance service launched by a functional test fails to
    begin listening on the expected port, attach strace(1) in order
    to determine where the process is blocked.
    
    Change-Id: Ic745bc34306c852fc8125a0a901686d4ff28e403

commit f07a4db6cdca28f58b795b3fcea2877e595867a7
Author: Mark Washenberger <mark.washenberger@rackspace.com>
Date:   Wed Jun 20 15:24:17 2012 +0000

    Revert "Funnel debug logging through nose properly."
    
    This fixes bug 1015613
    
    This reverts commit 95fb6e5f8988079d7dffe3a039f1ebd697199eb8.
    
    Change-Id: I827475c86d6f9166c0ee3ba9b0cc9a0a5105c049

commit 31dcaecb2dfe101a383b08d83f879b3b5b8d5898
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Tue Jun 19 16:57:36 2012 +0100

    Capture logs of failing services in assertion msg
    
    This is a temporary measure to help track down the cause of the
    regular functional test failures that manifest as an unhelpful
    'Unexpected server launch status' error.
    
    (Previously the glancelogcapture plugin would have handled dumping
    the logs, but this was broken by the recent change-over to nosetests
    from run_tests.py)
    
    Change-Id: I3dae58aa063536675503f23d1cc87767e68f75b2

commit 199128a5a6e8e97a8b018a90cc81f2001a025a6c
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Wed Jun 20 06:35:30 2012 +0100

    Remove some more glance-cache PasteDeploy remnants
    
    The default_config_file arg to load_paste_app() was only used by the
    cache daemons because they were all using glance-cache-paste.ini.
    
    Since that use case is gone, remove the argument.
    
    Change-Id: Ibf15810b37d9a2b9b94ed311c304916e7de2d6cf

commit a1fbd0baa68d6f1c2d758566ab89e2ac87a1c7ce
Merge: 9a1a2a3 95fb6e5
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jun 19 23:09:34 2012 +0000

    Merge "Funnel debug logging through nose properly."

commit 9a1a2a32a02834bc575d3664529f6417a2981a4a
Merge: cac3506 081823a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jun 19 23:03:38 2012 +0000

    Merge "make roles case-insensitive"

commit cac35068485729e9a2fd341daaf811c184c41191
Merge: 8697375 088200c
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jun 19 21:13:55 2012 +0000

    Merge "Default db_auto_create to False."

commit 8697375eb951d2ec1d808b6be66dd9e2e562d6fa
Merge: 28616aa 9c8c630
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jun 19 20:28:04 2012 +0000

    Merge "Increase timeout to avoid spurious test failures"

commit 28616aa0b2baeedd8af517128b6c3f01506d7b87
Merge: 9a7946a 0c0fd6a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jun 19 20:28:02 2012 +0000

    Merge "Clean up .pyc files before running tests."

commit 9a7946a043044f04f138ad6a622bd6d4329377c3
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Mon Jun 18 14:34:29 2012 -0400

    Fix typo of conf variable in config.py
    
    Fixes bug 1015270
    
    Change-Id: I1cedcb3095f56225920c7482b16cc597b0572a4a

commit 5d53e99e0a7ef644c6169db021168b8969a67c91
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Tue Jun 19 15:43:55 2012 -0400

    Remove unused imports in db migrations
    
    I went on a hike through the migrations and decided to apply the boyscout rule.
    Scouts honor.
    
    Change-Id: I10c677cfd5186edce3ca96495eafc732168cac86

commit 9c8c630d53877c5a9b0dda856b207468fdb4062c
Author: Mark Washenberger <mark.washenberger@rackspace.com>
Date:   Tue Jun 19 18:51:17 2012 +0000

    Increase timeout to avoid spurious test failures
    
    Change-Id: I58552c5c8ca5bea612f80ead1f895b346d187758

commit ee640fc2da2538b8b9376062245cc6bd0ff3b885
Merge: 7aa688a f14d3b9
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jun 19 17:53:37 2012 +0000

    Merge "Fix typo of swift_client/swiftclient in store_utils"

commit cdb2a4f6a6540e1b9b5ffa4b9be45581d3b51e94
Author: Nikhil Komawar <nikhil.komawar@rackspace.com>
Date:   Mon Jun 18 15:03:40 2012 -0400

    adds missing import and removes empty docstring
    
    fixes bug 1014788
    fixes bug 1015210
    
    Change-Id: Id5dd44d5d0265368e39b36ef1d4f6694aedb6456

commit 3b4d7a447c29783b8068308da71a3127187b5cbb
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Wed Jun 13 15:44:04 2012 -0700

    Convert db testing to use inheritance
    
    This modifies the existing sqlalchmey-specific db tests to a more
    generic approach where test cases can be inherited and bootstrapped
    for different db implementations. It's a similar approach to our
    store-specific bootstrapped test cases built off of test_api.
    
    Related to bp refactor-db-layer
    
    Change-Id: Ia516e93abd36e2727f122968d3c7ef6e0f1d5801

commit 0c0fd6acaaa39fd113f96f7e65cd1eb61f49bf26
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Tue Jun 19 12:07:12 2012 -0400

    Clean up .pyc files before running tests.
    
    Fixes bug 1015181
    
    Change-Id: I5628de56464f882f804522c66d9ffbe35a3b21e1

commit 081823ad862cabc74977299876d000cafaa6f40d
Author: Alessio Ababilov <aababilov@griddynamics.com>
Date:   Fri Jun 8 18:15:47 2012 +0300

    make roles case-insensitive
    
    Fix bug #1010519
    
    Change-Id: I5b4a50e2d546ba8b4b018178af09707bc4d31fce

commit 95fb6e5f8988079d7dffe3a039f1ebd697199eb8
Author: Monty Taylor <mordred@inaugust.com>
Date:   Mon Jun 18 18:30:21 2012 -0700

    Funnel debug logging through nose properly.
    
    Change-Id: Ic76289c702ed54c9bf7b9fa4cb140d62049dfb9e

commit 7aa688a897bfc96cf198126c03ae89d0e06b404f
Merge: ed16167 b3b4d64
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Jun 18 23:26:54 2012 +0000

    Merge "Avoid thread creation prior to service launch."

commit f14d3b9f70c5e3f0fa3465679b6f4238e2d6f502
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Mon Jun 18 14:49:15 2012 -0400

    Fix typo of swift_client/swiftclient in store_utils
    
    Change-Id: I4ae2aedc7bc893ae78d4e4dd03b290ece7d2735f

commit ed16167425c5a2a610ce503c3084bb3b2a03ae63
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Thu Jun 14 15:09:03 2012 -0400

    Stop revealing sensitive store info
    
    Use simpler error messages and log the details.
    
    Fixes bug: 1012268
    
    Change-Id: I3c4d98c81dee6676916c60e71a749037ae1edc81

commit b3b4d64ae23fd3a662e6ebc98642c42fe6631cad
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Mon Jun 18 17:53:37 2012 +0100

    Avoid thread creation prior to service launch.
    
    It appears that the thread serving out the fake HTTP endpoint used
    in the copy-from tests is causing intermittent hangs in the launched
    glance service processes. These hangs manifest as calls to futex(2)
    that never return, and occur almost daily in Smokestack.
    
    The background to the thread/fork mismatch is explained in this
    blog post:
    
     http://rachelbythebay.com/w/2011/06/07/forked
    
    We avoid the issue by delaying the thread creation until after the
    service processes have been launched by the testcase.
    
    Change-Id: I68c6f1735e5001641994ed4f84ad879397ba8713

commit c44e16a538113293c7e73eea22c2ebc0f84c365f
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Sat Jun 16 16:57:56 2012 +0100

    Don't use PasteDeploy for scrubber and cache daemons
    
    There are no WSGI apps involved here, no need to configure pipelines with
    filters etc. All we're using PasteDeploy for is to construct an object.
    
    Well ... there are easier ways to do that! :)
    
    Change-Id: I4166d0071738fe587572db8f2883900408e9f097

commit 3b4c276550f1a126bc985588252b944e147f2d90
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Sat Jun 16 17:00:20 2012 +0100

    Remove some unused glance-cache-queue-image code
    
    Commit d453def removed the glance-cache-queue-image script but
    neglected to remove the PasteDeploy app and config.
    
    Change-Id: I20daf529fd9e466cdad9d3db19bc79ed16f24375

commit 7f4bea708afdd433efa20a20fa83a75ffa591049
Merge: 7e84007 1b78c75
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jun 15 17:55:45 2012 +0000

    Merge "Turn off SQL query logging at log level INFO."

commit 7e84007c6e252e33eaa713962b3660b0c9fbf807
Author: Nikhil Komawar <nikhil.komawar@rackspace.com>
Date:   Fri Jun 8 16:33:41 2012 -0400

    Implement pagination and sorting in v2
    
    implements blueprint: api-v2-images-sorting
    implements blueprint: api-v2-images-pagination
    
    Change-Id: Ibf38847e45534f25dba31c7ffe516e2e3a29450d

commit 1b78c75bb606a22df0d7d51a30e7695861ef685c
Author: Dan Prince <dprince@redhat.com>
Date:   Thu Jun 14 11:48:27 2012 -0400

    Turn off SQL query logging at log level INFO.
    
    Fixes LP Bug #1013235.
    
    Change-Id: I5651a4f22bc396d7d082f95b1ef6df107b943fb5

commit 060a75b506beec26cd4a7d0a994a9dddc92d480b
Merge: abf43ad dc0ba92
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 13 20:35:52 2012 +0000

    Merge "Import db driver through configuration"

commit 088200c24251e4550187fb012b9026919fb095e0
Author: Dan Prince <dprince@redhat.com>
Date:   Wed Jun 13 15:29:03 2012 -0400

    Default db_auto_create to False.
    
    Fixes LP Bug #1012823.
    
    Change-Id: Iefbcda3885308b7a6f170e137d10e76c94952e18

commit abf43ad147769af85255e9a13b672ab190f5fcf2
Merge: d986920 1e50b99
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 13 19:02:19 2012 +0000

    Merge "Move RequestContext.is_image_* methods to db layer"

commit d98692089e885692cdf7408cc4140e0f5c852ca9
Merge: dcd8ce6 45b64d5
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 13 18:52:55 2012 +0000

    Merge "Add metadata_encryption_key to glance-cache.conf."

commit dcd8ce6447cb3e4a7d16c5fc7ff894e806d9c5df
Merge: 0aab15e e3f3d68
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 13 18:44:56 2012 +0000

    Merge "Use zipballs instead of git urls."

commit 0aab15ecb5df2567adbac2b1f4885313c052d5ab
Merge: 2848ddf 25116ed
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 13 18:22:58 2012 +0000

    Merge "Fix to not use deprecated response.environ any more."

commit 2848ddfc3ee1028500a4a15bfec08f805f22f56b
Merge: d82307e 1672eeb
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 13 18:21:19 2012 +0000

    Merge "Fix help messages for --debug."

commit d82307e7c964b27465520fe36553d2ba90a40a69
Merge: e9dd69c c1f5345
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 13 17:16:28 2012 +0000

    Merge "Begin replacement of sqlalchemy driver imports"

commit e3f3d681279a9a1eca6686c1ac69d5eb8ac39f4a
Author: Monty Taylor <mordred@inaugust.com>
Date:   Wed Jun 13 11:33:56 2012 -0400

    Use zipballs instead of git urls.
    
    Additionally, update openstack.common.setup
    
    Change-Id: I6e72ac890ed93ab5201fe99f63fd579a9d9db89b

commit 45b64d54950ab64ddfbe20ed4a3d1fd62ed83c7b
Author: Dan Prince <dprince@redhat.com>
Date:   Wed Jun 13 12:30:59 2012 -0400

    Add metadata_encryption_key to glance-cache.conf.
    
    Fixes LP Bug #1012752.
    
    Change-Id: I802583e2766cd1533223638259e57e44b39448eb

commit 1672eeb8807451534f96c20e33b1d4075e84def8
Author: Dan Prince <dprince@redhat.com>
Date:   Wed Jun 13 12:15:08 2012 -0400

    Fix help messages for --debug.
    
    Fixes LP Bug #1012746.
    
    Change-Id: I54af0d20b3f5b56a1b350de3ac1324f1bbcd57ed

commit e9dd69cca62bd95da46467d376648c5f69baa515
Merge: b99e861 fc3f13c
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jun 12 18:42:35 2012 +0000

    Merge "webob exception incorrectly used in v1 images.py"

commit b99e8610adb6d38ccbe91f13698f1e36b096ca74
Author: Chmouel Boudjnah <chmouel@chmouel.com>
Date:   Tue May 22 14:10:14 2012 +0000

    Use python-swiftclient for swift store.
    
    - Use python-swiftclient instead of swift.common.client (pinned to
      github hash).
    - Fixes bug 1002791.
    
    Change-Id: Ibdc00b75c62445a7f0930ee1806ad469e3d3ffe2

commit 4f688ef429c0c4520b2313275237fd5783ccf017
Merge: e2c52dd d33ce44
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Jun 11 20:15:33 2012 +0000

    Merge "Remove the conf passing PasteDeploy factories"

commit 25116ed49e685e3d405cf03e7eb3efd95506e37f
Author: Duncan McGreggor <duncan@dreamhost.com>
Date:   Fri Jun 8 13:45:24 2012 -0400

    Fix to not use deprecated response.environ any more.
    
    WebOb 1.2 doesn't auto-set the response environment. There was only one place
    in Glance that was using this, so it was changed in favor of the stable API
    that has always been there: response.request.environ.
    
    This change fixes bug #1010560.
    
    Change-Id: I2e58bf32970c95d25cad0a35ee38b9540483eef0

commit dc0ba92dcfa060d8755b935f0d9b543a1e298778
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Thu May 31 17:07:46 2012 -0700

    Import db driver through configuration
    
    Using the 'data_api' config option, a deployer can now define
    which module to be used as the db driver.
    
    Related to bp refactor-db-layer
    
    Change-Id: Ie93b7331e5f8f3456b682d974ac6fd2cdb1e53b7

commit 1e50b993c0cebd3c1d22ca7636cb608686a1f526
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Fri Jun 1 09:49:32 2012 -0700

    Move RequestContext.is_image_* methods to db layer
    
    These methods need direct access to the db and therefore require
    the request context module to maintain a connection to the database.
    Moving them to the db layer allows us to further refactor the
    db layer.
    
    This does duplicate the methods in each of the db drivers, so a
    future patch is needed to simplify that.
    
    Related to bp refactor-db-layer
    
    Change-Id: Ia7e0dbb9f2162fb69837699b970f8cab3efcd545

commit c1f53459f582ee4525d5cad58dd662f0a951bb0b
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Thu May 31 16:20:14 2012 -0700

    Begin replacement of sqlalchemy driver imports
    
    Create glance.db:get_api to handle importing the configured data
    api module. Currently it's hard-coded to glance.db.sqlalchemy.api.
    
    Related to bp refactor-db-layer
    
    Change-Id: Ie9b078bddf6324bf0e76d562489a6695ed8b88df

commit fc3f13c29e1373e17147da06daa96b527664c746
Author: iccha <iccha.sethi@rackspace.com>
Date:   Fri Jun 8 21:32:20 2012 +0000

    webob exception incorrectly used in v1 images.py
    
    Fixes bug 1010681
    
    Change-Id: I42cf5a8e87e07b94fbba4af7ad3b16a62817007e

commit e2c52ddfa6b5b6dff88e3d58b55ef7034739bc63
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Tue Jun 5 13:52:23 2012 -0400

    Add tests and simplify GlanceExceptions.
    
    This also fixes some incorrect use of GlanceException parameters.
    
    Fixes bug: 1009122
    Fixes bug: 1010140
    
    Change-Id: Ic77856686a0259da2318e05b15f3d382508c00b9

commit 575651883d4012c3cf6cf75a8e0dd58514ff67a7
Merge: 86e8fdc c07be92
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Jun 9 14:16:57 2012 +0000

    Merge "Use openstack-common's policy module"

commit 86e8fdc02237f9c151e4780716c9570c65b2e3e7
Merge: 61d007b 15c204a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Jun 9 13:46:25 2012 +0000

    Merge "Update default values for known_stores config."

commit 61d007bc89a9ae0108d6b38352f8584d6ccc6413
Merge: e50ada5 9d9d225
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jun 8 21:44:46 2012 +0000

    Merge "Port remaining code to global conf object"

commit 15c204af75d18235defe1cd41866c4d216eb0fec
Author: Dan Prince <dprince@redhat.com>
Date:   Fri Jun 8 15:37:10 2012 -0400

    Update default values for known_stores config.
    
    Updates the default value for the 'known_stores' config
    variable to include the full list of storage classes
    supported in Glance.
    
    Also, removes the known_stores config section from the
    example config file since it is arguably an advanced config
    that won't get used by most users. Removing this config avoids
    the overhead of maintaining internal class names in config files.
    
    Fixes LP Bug #1008698.
    
    Change-Id: I0117376aa4de3103410ecb1a36df6998fcd0d5b5

commit d33ce445d3e585f14aeb872ce890cf3228055574
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Tue May 29 08:51:12 2012 +0100

    Remove the conf passing PasteDeploy factories
    
    Implements blueprint cfg-global-object
    
    In glance.common.wsgi we have a paste_deploy_app() API which allows
    a ConfigOpts instance to be passed the the applications and filters
    constructed by PasteDeploy.
    
    Now that we're using a global object, we don't need this anymore
    
    Change-Id: I222d3c58308bc2f504cd802c0c8405d3baa2e49a

commit 9d9d22541902977319457de89e07fb3094d0a4db
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Tue May 29 08:51:12 2012 +0100

    Port remaining code to global conf object
    
    Implements blueprint cfg-global-object
    
    This iteration fixes up the remaining places where we're passing a
    conf object around.
    
    Change-Id: I3b627d093a6b7afeee129ab66b377a3b0af5439b

commit e50ada54727c07687e54ad5ae9a8a425d85b1c75
Author: iccha <iccha.sethi@rackspace.com>
Date:   Fri Jun 8 15:16:24 2012 +0000

    Made changes to adhere to HACKING.rst specifications
    
    Change-Id: I6a6fe0c2db55f57a74b5968224571c2c1440696c

commit c07be927fb9622bf2a83c03a2a1cda3bbed760b0
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Wed Jun 6 10:05:17 2012 -0500

    Use openstack-common's policy module
    
    Reworks glance to use the new policy module in openstack-common.
    
    Change-Id: I6012c71a16d83762535e7490d8f5bc5102160fc0

commit fc758a46e77de1746c796cd64228694521ee2b07
Author: Dan Prince <dprince@redhat.com>
Date:   Thu Jun 7 22:23:48 2012 -0400

    Re-add migrate.cfg to tarball.
    
    Fixes LP Bug #1010284.
    
    Change-Id: Ic19a5ef16e7e2237c4becfbca9a608ef932fc973

commit c34b8de0aec616d53a4369d21824de4260100b58
Merge: c4c69ac a68eb24
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jun 7 22:34:53 2012 +0000

    Merge "Create 'simple' db driver"

commit c4c69ac15c66ba84d81dfaf78b3c6a1378e18fe6
Author: Nikhil Komawar <nikhil.komawar@rackspace.com>
Date:   Thu Jun 7 16:02:26 2012 -0400

    Implements cleaner fake_request.
    
    Implements the fake request to be more flexible.
    Changes the fake request calls in the tests.
    fixes bug 1010191
    
    Change-Id: Ic8199b1f8f479ffb3667cead2576c03591e30e43

commit ba0e3afbb21cf29cb3b76f917858337f84bcd4b4
Merge: 82dbff4 e315145
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jun 7 16:58:28 2012 +0000

    Merge "Fix typo in doc"

commit a68eb244318925adcaf94fa4d86332bd4ad4ebc9
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Thu May 31 15:39:33 2012 -0700

    Create 'simple' db driver
    
    Move the core of glance.tests.unit.utils:FakeDB to glance.db.simple.
    This 'simple' driver is an alternative to the traditional sqlalchemy
    driver. Additionally, the sqlalchemy driver has been moved from
    glance.db to glance.db.sqlalchemy. The simple db driver is only
    available to be used by tests for now.
    
    Related to bp refactor-db-layer
    
    Change-Id: I9d33a433c0c03e53fb5a3491076086427ae694b3

commit 82dbff438034d20724ecd489aca4496980c3774c
Merge: bbe442d de2a8a8
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jun 7 16:14:56 2012 +0000

    Merge "Clean up a few ugly bits from the testing patch."

commit bbe442dddb6427fa5039ac9dd9ce47b6a5feda36
Author: Zhongyue Luo <lzyeval@gmail.com>
Date:   Tue Jun 5 14:02:43 2012 +0800

    Glance should use openstack.common.timeutils
    
    Implements blueprint use-common-timeutils
    
    1. Edit openstack-common.conf and import glance/openstack/common/timeutils.py
    2. Replace datetime.utcnow with timeutils.utcnow
    3. Replace utils.isotime with timeutils.isotime
    4. Replace utils.parse_isotime with timeutils.parse_isotime
    5. Replace utils.normalize_time with timeutils.normalize_time
    6. Remove datetime related functions and datetime related unittests
    
    Change-Id: I014548848f738b00c670be3d372b16f47f6dee96

commit ac95b1f9c761c414c0d30837c0d1d6ec452c4391
Merge: 9057989 a25824e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jun 7 15:14:47 2012 +0000

    Merge "fix side effects from seekability test on input file"

commit de2a8a8d94eb9165fd32074369f79f930d77f06b
Author: Monty Taylor <mordred@inaugust.com>
Date:   Thu Jun 7 10:34:48 2012 -0400

    Clean up a few ugly bits from the testing patch.
    
    The pep8 runner in run_tests.sh was still referencing run_tests.py
    which no longer exists. Replaced that section with one that runs
    pep8 the same way as tox.
    
    Additionally, the first attempt at getting the test runner to do the
    same thing with debug logging as run_tests.sh was doing became a bit
    spammy. For now, actually have logging write out the log file in the
    first place. Eventually, it would be nice to get this to properly
    get spit out in such a way that nosetests would grab it and include
    it in the failed test case output.
    
    Change-Id: Ib5222a0c3507d5d7ede4d303c98323a622705301

commit e3151459e8ee4109ae76412fc6515431fa5b3fd0
Author: Vincent Untz <vuntz@suse.com>
Date:   Thu Jun 7 16:17:42 2012 +0200

    Fix typo in doc
    
    metdata -> metadata
    
    Change-Id: I44e5e73946e9d1a37b8e3a5974083e3fbea33d2d

commit 90579894d26e2c3a2254678db5a633c85084ee81
Merge: 898e732 1038a19
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jun 6 12:43:53 2012 +0000

    Merge "Add cfg's new global CONF object"

commit 1038a19a32a28f6d8d42a11d435baf5e1e1583bf
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Tue May 29 08:51:12 2012 +0100

    Add cfg's new global CONF object
    
    Implements blueprint cfg-global-object
    
    Begin adopting cfg's global CONF object pattern rather than passing
    a conf object around everywhere.
    
    This iterations does just enough to have each of the glance programs
    initialize CONF and get the unit tests working.
    
    Change-Id: Ia34959b3ba52cbe933d5d347f31319271b2e14f9

commit a25824e77ae86da840493ee8fbf5dc68a27dd74b
Author: Derek Higgins <derekh@redhat.com>
Date:   Thu May 31 22:13:40 2012 +0100

    fix side effects from seekability test on input file
    
    Fixes Bug #1007093
    
    Mixing use of os.lseek(fileno, 0, os.SEEK_SET) with
    file.seek seems to cause problems when reading data
    with file.read
    
    Change-Id: Ia96ce9bbdc93a1a8c6169d85b99187f8cd7b2fdc

commit 898e732bd7097b2400b82f20e515d32489cd51e3
Author: Monty Taylor <mordred@inaugust.com>
Date:   Mon Jun 4 13:51:47 2012 -0400

    Just use pure nosetests.
    
    The test suite can be run now with pure nosetests + the openstack nose
    plugin. There is no longer any need for the run_tests.py.
    
    Change-Id: Iad89a2c1cc567ba10919a52166b3309edef20009

commit 66108d0e483028101186e14caaa0dbcca785b797
Author: Monty Taylor <mordred@inaugust.com>
Date:   Sun Jun 3 09:54:51 2012 -0400

    Fix coverage jobs. Also, clean up the tox.ini.
    
    Change-Id: I85e8f1b190e2c5f598ae76f2920dfbe7c4ed1500

commit 41d285ab02525e2d109a3d3db6633cbffb17abb6
Merge: dfd9e20 19d6124
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Jun 4 17:23:11 2012 +0000

    Merge "Glance should use openstack.common.importutils"

commit dfd9e207f25dbdb7584c80e015ddcec7099a5c52
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Thu May 31 11:23:35 2012 -0700

    Move glance.registry.db to glance.db
    
    Related to bp refactor-db-layer
    
    Change-Id: Ia7c5aea29eef8068a9b67ac5fd051b45a38a20de

commit 19d6124ccc99dcec404ef3d5405eb26b40d2038a
Author: Zhongyue Luo <lzyeval@gmail.com>
Date:   Mon Jun 4 12:15:46 2012 +0800

    Glance should use openstack.common.importutils
    
    Implements blueprint use-common-importutils
    
    Change-Id: If92fcf85c6bbcd330fd3675401d03b12a5fc055c

commit ff32b489da0015686d62c50c33a87261606394f2
Merge: 5d6b05b d885461
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jun 1 18:03:41 2012 +0000

    Merge "Add additional info. to image.delete notification"

commit 5d6b05b57ea2f62ed6fdd0faedff50b08e21162b
Merge: fdc98c9 98b66c1
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu May 31 14:52:24 2012 +0000

    Merge "Add a base class for tests"

commit fdc98c908918da3889fab1cb148b2dd09dbfb8a0
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Mon May 28 20:43:31 2012 +0100

    Add read-only enforcement to v2 API.
    
    Provide a new @mutating decorator to provide a concise marker for
    operations that should not be accessible to a read-only request.
    
    Related to bp api-v2-anonymous-access
    
    Change-Id: I52710083b4f112d2429afe4faa0660e2a6822929

commit 98b66c1ddd308bacb8ad8a78f71ea75353c3a01e
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Tue May 29 08:51:12 2012 +0100

    Add a base class for tests
    
    This base class will allow us to DRY up the config setup and teardown.
    
    Change-Id: I49fff259a38657110a4117134b1a8bd728404269

commit f2acb725dafb034567ef65eaa930c01d92240768
Merge: 81fcbc8 2a01e6e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed May 30 17:40:58 2012 +0000

    Merge "Enable anonymous access through context middleware"

commit 81fcbc8a3f91ee10332c6d23d7717486abd4c17a
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Tue May 15 14:50:13 2012 -0700

    Expose tags on image entities in v2 API
    
    Enable users to set and view tags on image entities. Before, a user
    had to navigate to the /tags subcollection to interact with image tags.
    Additionally, this refactors the image_tag_* methods to return strings
    rather than sqlalchemy objects.
    
    * Related to bp api-v2-image-tags
    
    Change-Id: Ifdebe9b660f78bee5fda798a1f83e384a8220049

commit d885461b6fadb35c8a3042a1e6b9b8aa2bd29442
Author: Brian Elliott <brian.elliott@rackspace.com>
Date:   Thu May 24 13:04:48 2012 -0500

    Add additional info. to image.delete notification
    
    Add additional information to the 'image.delete' notification payload
    to simplify external usage tracking systems.
    
    Please note that this is not a backwards-compatible change as the
    old payload was simply a string consisting of the image id.  This
    converts the payload to a dictionary.
    
    Change-Id: I641b7de91fcc14dc3c81ec942aeb0acf5a63d128

commit 43a6424b714765ca9b54b25953c3e85773859a5f
Merge: b38a8ec 81224fa
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue May 29 23:12:27 2012 +0000

    Merge "Sync with latest version of openstack.common.cfg"

commit b38a8ec4ec61015bc31f30712fdb2a7fb227ddfd
Merge: 8cda35f 104ed65
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue May 29 20:37:40 2012 +0000

    Merge "Expose timestamps on image entities in v2 API"

commit 8cda35fc1ff49c99c8269ce71c1ab3323775badd
Merge: 9a838a8 a7b8e62
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue May 29 19:51:02 2012 +0000

    Merge "Lock pep8 at v1.1"

commit 104ed657b8860f8810d88b0f54775626a22a18b6
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Wed May 16 16:25:03 2012 -0700

    Expose timestamps on image entities in v2 API
    
    * Add created_at and updated_at to image entities
    * Ignore these timestamps on create & update
    * Related to bp api-2
    
    Change-Id: Iff0345de891e928367227f1a46f05e28b95de298

commit 81224fa22c78bcfe61285e6e8652c25b7f894b0d
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Tue May 29 08:51:11 2012 +0100

    Sync with latest version of openstack.common.cfg
    
    Changes since last sync:
    
     - make reset() clear defaults and overrides
     - automatically create option groups
     - allow options to be marked as required
     - use a list comprehension instead of map()
    
    Change-Id: I20d8b2e7a1fa0080398eaa8e03b0b6d48e7c2a29

commit 2a01e6ef755692240b4ed14f9005296e0653a9a1
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Wed May 23 08:05:16 2012 -0700

    Enable anonymous access through context middleware
    
    Certain deployments need to allow anonymous access to its
    images. This patch allows a user that has failed to authenticate with
    Keystone to access the API in read-only context.
    
    * Configure through 'allow_anonymous_access' option, defaults to False
    * Implements bp api-v2-anonymous-access
    
    Change-Id: Ia8f57e54bd141a2da1ca4600d1970558fb497f67

commit 9a838a8b34e435223e1e01d73d84665e6e8f7102
Merge: 26ce3e0 d0e6b83
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu May 24 22:35:46 2012 +0000

    Merge changes I26378e9f,I8b09677f
    
    * changes:
      Add allow_additional_image_properties
      Fix integration of image properties in v2 API

commit 26ce3e0e4cd94d57f3f4c2aaaf87b35c0643cc21
Merge: 4f0e72c 3785ec8
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu May 24 22:25:11 2012 +0000

    Merge "Leave behind sqlite DB for red functional tests."

commit d0e6b8398a1d3787ec9ba77ddd1036c47549dafa
Author: Mark Washenberger <mark.washenberger@rackspace.com>
Date:   Tue May 22 14:13:09 2012 -0400

    Add allow_additional_image_properties
    
    Implements bp:api-v2-user-properties
    
    Change-Id: I26378e9f4e8d0f53898f4665bad89922c0b5792a

commit 4f0e72c52ebc4b2d77c5635d543d06fa62f366c9
Merge: 9d3fd05 d2f04a2
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu May 24 16:59:17 2012 +0000

    Merge "Remove unused imports in setup.py"

commit 397884be58d21589002756e1a712ef5b816bafe2
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Mon May 21 21:20:55 2012 -0700

    Fix integration of image properties in v2 API
    
    The (de)serialization of images in the v2 API expected a db-like
    properties list in some cases, while in others a flat dictionary. This
    patch aligns the code by ensuring the properties dictionaries are
    normalized before being passed in and out of the controller.
    
    * Expands the images functional test case to cover this integration point
    * Cast all images to dictionaries before returning from the controller
    * Related to bp api-2
    
    Change-Id: I8b09677f622151330630fc7b0267f0549bb1a458

commit a7b8e62556f760a8a05fcfd92394517797376dea
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Thu May 24 07:16:31 2012 -0700

    Lock pep8 at v1.1
    
    Update offending files to pass pep8 v1.1 and lock our deps on this
    new version.
    
    Change-Id: I5380f213f8e2f62d75f513c8b4496f78fc692dad

commit 9d3fd0598f27a318b29fb90446bb37bf7084380e
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Thu May 24 06:21:17 2012 -0700

    Lock pep8 to version 0.6.1 in tox.ini
    
    Change-Id: Ib88f57a08bb8ba8bd7970300716d84a2a2e2a411

commit 87e45ac659172a49c9ba281e65917d3892308321
Merge: 8bcadbf 88f8020
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed May 23 22:45:20 2012 +0000

    Merge "Correct format of schema-image.json."

commit 8bcadbfbc1e4ec17de79bdff42274ade07c462ec
Merge: 1b25c55 a92b01f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed May 23 22:33:36 2012 +0000

    Merge "Adds sql_ config settings to glance-api.conf."

commit 1b25c55dcac905536e025a31587d516e9eaa661f
Merge: 86a7976 03da47b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed May 23 21:54:41 2012 +0000

    Merge "Fail gracefully if paste config file is missing."

commit 03da47b5ea854175e70393ddc5bc6258a4c21047
Author: Brian Elliott <bdelliott@gmail.com>
Date:   Wed May 23 11:01:03 2012 -0500

    Fail gracefully if paste config file is missing.
    
    If the paste config file can't be found, fail with a RuntimeError
    and message instead of a traceback from os.path.abspath.
    
    Change-Id: Id8823dbadab06a0de6bb7c235b70c355812ed55e

commit 86a7976c82e78d0ef14851610d9f02b54a5b481e
Author: Thierry Carrez <thierry@openstack.org>
Date:   Wed May 23 21:06:04 2012 +0200

    Add missing files to tarball
    
    Add a few missing files to generated tarballs.
    Fixes bug 1001213.
    
    Change-Id: Ie6ce3069e9e93aeb6be78bd2d90ad4f07ae56b3a

commit d2f04a2743009f406dad41968fc414e0a8784097
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Wed May 23 11:47:11 2012 -0700

    Remove unused imports in setup.py
    
    Change-Id: Ifb08695a8a9a264a3032ae09524e8b37fa0dd761

commit a92b01fe58b5a133c719f114106342e80279efb4
Author: Dan Prince <dprince@redhat.com>
Date:   Wed May 23 11:56:10 2012 -0400

    Adds sql_ config settings to glance-api.conf.
    
    The Glance v2 API makes use of the DB directly. As such
    we should include the sql_ configs in the default glance-api.conf
    file.
    
    Fixes LP Bug #1003504.
    
    Change-Id: I5e287dafcd65864f56789ae22bab3dcc6b353a47

commit 88f802027c4be007becb7dfbe6e1885990a07838
Author: Dan Prince <dprince@redhat.com>
Date:   Wed May 23 10:48:43 2012 -0400

    Correct format of schema-image.json.
    
    Correct the JSON format of schema-image.json. Fixes issues where
    glance-api won't start due to invalid JSON in this file.
    
    Fixes LP Bug #1003470.
    
    Change-Id: Ibacc49f2c45e233bd6ad25b3334e013acaae8339

commit 9462474c143a88914997206b2179f6020b8cb095
Merge: 407a4a6 1533e6d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue May 22 23:38:52 2012 +0000

    Merge "Fix paste to correctly deploy v2 API"

commit 1533e6d8b822b50f0017fb3348f80fae06fe3924
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Tue May 22 13:23:44 2012 -0700

    Fix paste to correctly deploy v2 API
    
    Corrects a typo where 'apiv1app' should be 'apiv2app'
    
    Change-Id: I4ef29f7539a572ed65422fd548e9718e86161b5f

commit 407a4a623f860ec2ae5e7ba6778f558d8a01431c
Author: Dan Prince <dprince@redhat.com>
Date:   Mon May 21 11:55:20 2012 -0400

    Add connection timeout to glance client.
    
    Adds a timeout option to glance client and bin/glance.
    Includes fast running test case to verify the timeout works correctly.
    
    Fixes LP Bug #1002907.
    
    Change-Id: I4a0c4a8ef1862346ec2cd068d9d9e0577cba9b68

commit c5a0b0086b1099ba4139ab0ae5beb98a58443477
Merge: 5ffdc74 71c98ae
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon May 21 21:19:30 2012 +0000

    Merge "Support DB auto-create suppression."

commit 3785ec8b4b5a0d4fbe2385b8cd21e7652c303b1a
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Sun May 20 20:41:04 2012 +0100

    Leave behind sqlite DB for red functional tests.
    
    We leave behind the sqlite DB for failing tests to aid in diagnosis,
    as the file size is relatively small and won't interfere with subsequent
    tests, as it's in a per-test directory (which is blown-away if the test
    is green).
    
    Change-Id: I90be433fc6f02234b1118a547ea0b5524238161d

commit 71c98ae8876b66964623713c2b3bc686ad1dca35
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Fri May 18 14:23:41 2012 +0100

    Support DB auto-create suppression.
    
    Adds a new boolean config option, db_auto_create, to allow the
    DB auto-creation be suppressed on demand. This defaults to True
    for now to maintain the pre-existing behaviour, but should be
    changed to False before the Folsom release.
    
    The 'glance-manage db_sync' command will now create the image*
    tables if the DB did not previously exist. The db_auto_create
    flag is irrelevant in that case.
    
    The @glance.tests.function.runs_sql annotation is now obsolete
    as the glance-api/registry services launched by functional tests
    must now all run against an on-disk sqlite instance (as opposed
    to in-memory, as this makes no sense when the DB tables are
    created in advance).
    
    Change-Id: I05fc6b3ca7691dfaf00bc75a0743c921c93b9694

commit 5ffdc74a8d6115dc14104a4cf5c259e638f3230b
Merge: 5c2cfa4 0252c18
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri May 18 19:53:29 2012 +0000

    Merge "Add credential quoting to Swift's StoreLocation."

commit 5c2cfa4e6bae9956c73857038b16e70df9e1c50e
Merge: 457bbfb dd81f12
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri May 18 19:26:17 2012 +0000

    Merge "Fix glance-api process leak in respawn storm test."

commit dd81f120fd68e136d21fe8f17eae0b3e4fba370d
Author: Dan Prince <dprince@redhat.com>
Date:   Thu May 17 15:14:38 2012 -0400

    Fix glance-api process leak in respawn storm test.
    
    Fixes a glance-api process leak that occurs when running
    TestMultiprocessing.test_interrupt_avoids_respawn_storm.
    
    The test code creates an array of pids sorted numerically sorted in
    reverse (largest to smallest) meaning the child pids should be at the
    top of the list. This patch simply grabs the child pids from the top of
    the list instead of relying on the length of the list.
    
    Fixes LP Bug #1000931.
    
    Change-Id: I91d538e686a770778d9855a1bd5a1767cc83842e

commit 457bbfbde4c4a6dc60792a85f133b288c7347337
Author: Mark Washenberger <mark.washenberger@rackspace.com>
Date:   Thu May 17 11:59:05 2012 -0400

    Stubout httplib to avoid actual http calls
    
    Fixes bug #1000828
    
    - Added some additional test code cleanup
    
    Change-Id: I0589aa22d8e4b835a1d8d72e47ba5d1ceb982aa8

commit 1c5d12c65aa6d013e505317fddd532778cdc2f98
Merge: 3f3124a 49a0f96
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu May 17 17:53:33 2012 +0000

    Merge "Backslash continuation removal (Glance folsom-1)"

commit 3f3124ac51d4773620763043374cb81436ba88f6
Merge: 77552aa 1306c63
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu May 17 17:15:15 2012 +0000

    Merge "Implement image visibility in v2 API"

commit 49a0f962f66d6c6ef297b03e2551c17b8572c7df
Author: Zhongyue Luo <lzyeval@gmail.com>
Date:   Fri Feb 10 23:29:33 2012 +0800

    Backslash continuation removal (Glance folsom-1)
    
    Fixes bug #1000636
    
    Removes backslash continuations (except sqlalchemy and mox related code)
    
    Change-Id: I08e6db28f157d67be9fc11ec02cc0844c006a6df

commit 77552aaac77b3e25b57a865b0643443d68a145ee
Merge: 25b8974 4c43461
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu May 17 00:23:34 2012 +0000

    Merge "Add min_ram and min_disk to bin/glance help."

commit 1306c63cbe8b6d20363502b1907d3a30e69d4eaa
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Mon May 14 17:30:18 2012 -0700

    Implement image visibility in v2 API
    
    * Add visibility attribute to images (aka is_public)
    * Implements bp api-v2-image-visibility
    
    Change-Id: I04e77c051769d0cc87fc632eef12f1a0aadf39a3

commit 25b89747a0b37830075fcaa8b01d527ac88fd93f
Merge: ef475e1 39d0023
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed May 16 19:56:15 2012 +0000

    Merge "Simplify JSON Schema validation in v2 API"

commit 4c434619d3937624da94d0a03153dec402256b19
Author: Mark Washenberger <mark.washenberger@rackspace.com>
Date:   Tue May 15 14:15:20 2012 -0400

    Add min_ram and min_disk to bin/glance help.
    
    The min_ram and min_disk fields are supported for both glance add and
    glance update, so this change adds a description of those fields to the
    glance help (add|update) comment fields.
    
    Change-Id: Ib6ca980e29ad7062eaaa10cde8705f9248d2e3b3

commit ef475e17d501a31523a7fabf067b0d3fc36b084c
Author: Joshua Harlow <harlowja@yahoo-inc.com>
Date:   Tue May 8 17:28:42 2012 -0700

    Implements blueprint import-dynamic-stores.
    
    Make glance more pluggable with regard to stores.
    
    Change-Id: I7b264d1b047a321f7b60857bb73154f831b82a7b

commit 0252c182cf535d4f9db1dc1c0df144430c39b1a1
Author: Maru Newby <mnewby@internap.com>
Date:   Thu May 3 16:09:52 2012 -0700

    Add credential quoting to Swift's StoreLocation.
    
     * Added credential quoting in glance.store.swift.StoreLocation
       to support usernames and passwords that contain '@' characters.
       Without quoting, '@' characters in credentials (e.g. using an
       email address as a username) would result in an exception being
       thrown by parse_uri.
     * Added a migration to support the change in location format.
     * Addresses bug 994296
    
    Change-Id: I92c4f4af914394aada1b4415a42f5a1308187dc4

commit b5bae3d040e38f76c066edc8644749e2149f0599
Merge: 6880a4e 1ca0a1a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue May 15 22:06:14 2012 +0000

    Merge "Combine v2 functional image tests"

commit 6880a4ecf68fc5c8d234144506a4667fae1e366e
Merge: 233b8ff fe3ae1d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue May 15 20:28:27 2012 +0000

    Merge "Update glance to pass properly tenant_name."

commit 1ca0a1a283c31bfee2ec699991bd3a07527e77f0
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Mon May 14 16:30:53 2012 -0700

    Combine v2 functional image tests
    
    Reverse the premature optimization of breaking up functional tests
    for images, tags, and access records
    
    Change-Id: I0e54c08b84403a1b1e62851c9fe8995f6dd5fa4d

commit 39d0023df3ebe03ce1917309babef3f86b95457d
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Mon May 14 15:18:50 2012 -0700

    Simplify JSON Schema validation in v2 API
    
    * Move validation into glance/schema.py
    * Related to bp api-v2-schemas
    
    Change-Id: Ic3114a1803ef994f5eb92327c8c6b65de2dc1ff0

commit 233b8ff70541cdcd059c8ef0e4d9dac7952adfb2
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Thu May 10 14:43:49 2012 -0700

    Expose deployer-specific properties in v2 API
    
    * Validate deployer-specific image attributes in requests
    * Don't validate data on serialization (yet)
    * Partially implements bp api-v2-schemas
    
    Change-Id: Ice5240f05cb8726423386657305381dbd6cfa6eb

commit 09ec351b34f01c2dc05f0afb059833d176b0805e
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Thu May 10 12:33:03 2012 -0700

    Test that v2 deserializers use custom schemas
    
    * Related to bp api-v2-schemas
    
    Change-Id: I82d0692af5196754738d3684a0f1ea116051dae8

commit 1bddaf429edf7806f2a53dd26574905759bdd203
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Thu May 10 10:12:02 2012 -0700

    Load schema properties when v2 API starts
    
    * Read properties from etc/schema-image.json and etc/schema-access.json
    * Gracefully handle the lack of custom schema property files
    * Partially implements bp api-v2-schemas
    
    Change-Id: Ida1a5afe48be9bce8a5d8faeeda9ed03848a4fd0

commit eee5fecdf6f2853acb0909d077878274cd2ecd7b
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Fri May 4 22:26:52 2012 -0700

    Support custom properties in schemas for v2 API
    
    * Add glance schema API (glance.schema:API)
    * Disallow custom properties that conflict with base properties
    * Implements bp api-v2-schemas
    
    Change-Id: Ibfa617cb5edf16627627debc30149669213d4b2d

commit 7553b4fcb69580c9cbed8c8944e2b5d70fe99048
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Fri May 11 16:17:16 2012 +0100

    Fix tiny format string nit in log message.
    
    Fixes bug 996157
    
    To avoid "ValueError: unsupported format character ':' ..."
    
    Change-Id: I8666b3441ccbea884dcd7ad54f019a0681b717b4

commit a857842368a92c241453561b378f8e00f7a92245
Author: Unmesh Gurjar <unmesh.gurjar@vertex.co.in>
Date:   Thu May 10 16:29:24 2012 +0530

    Fixes bug 997565.
    
    Modified the help text for 'add' image command.
    
    Change-Id: I32cbd36a3a4ef6368f9128ac0ab4a8efbd14ff2e

commit 7f761e16ce69ec549be1a66bd2797e53d0a1d988
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Tue May 8 15:39:00 2012 -0700

    Allow chunked image upload in v2 API
    
    * Related to bp api-v2-image-upload
    
    Change-Id: I728cdd28cab1d63d67cd7ad6c9d33535af4d5535

commit 2c102130ed8bd8e01fc1a4af8ea77555de6c2866
Author: Patrick Mezard <patrick@mezard.eu>
Date:   Sun May 6 14:49:48 2012 +0200

    wsgi: do not respawn on missing eventlet hub
    
    Eventlet 'poll' hub is not available on OSX, wsgi.Server workers have no
    chance to start but the error was not caught and they were respawned
    endlessly. This patch makes these workers not to be respawned.
    
    This has the nice side-effect of avoiding the test suite to get stuck in
    test_multiprocessing on OSX, filling syslog.
    
    Change-Id: I565d21f5c6861102e96d6953ace29cde57e8ec38

commit 28d85923fa561d3f7ba60cba6d9acbe346560386
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Fri May 4 10:15:50 2012 -0700

    Implement v2 API access resource
    
    * Add functional tests
    * Implements bp api-v2-image-access
    
    Change-Id: If62f4c0c9b387bb1f99306d68b18ad21f5f875d1

commit f9afe586b6c35d721bb63be47427d3fe955e03d2
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Fri May 4 14:22:12 2012 -0700

    Disallow image uploads in v2 API when data exists
    
    When data has already been uploaded for an image (determined by the existence
    of a location attribute), reject any subsequent requests to upload data with
    a 409 HTTP error code.
    
    * Related to bp api-v2-image-upload
    
    Change-Id: I0c4d2ebf548862ecb9c760bac9e96348f8377567

commit 793bb610050a19108fc5e178b8dfe4212a7d6dcc
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Thu May 3 20:10:50 2012 -0700

    Implement v2 API image tags
    
    * Add image_tags table and new db methods to manage it
    * Add appropriate API resource classes
    * Implements bp api-v2-image-tags
    
    Change-Id: I5f3748b15239de8da000e7b3ff537c1cfc8e2f0d

commit 5e85329ed10d8963bf05704e00ff142172fe7b44
Merge: e021c3a c1ea910
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue May 8 02:14:45 2012 +0000

    Merge "Implement image data upload/download for v2 API"

commit e021c3a37c47a65423e277b16d22feb104bd1be5
Merge: e54bc2b f879081
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon May 7 23:06:43 2012 +0000

    Merge "Use sdist cmdclass from openstack-common."

commit e54bc2bec2365897abd0c12d829cec366646b97a
Merge: e2981c8 f184a38
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon May 7 22:57:18 2012 +0000

    Merge "Return 204 from DELETE /v2/images/<image_id>"

commit e2981c82f8401bfef3e49fe7a9bb3a9c87b4d27f
Merge: 8b8debd 06821ea
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon May 7 22:39:26 2012 +0000

    Merge "Update noauth caching pipeline to use unauth-ctx."

commit 8b8debdc124752418c43fd3f2fbeb3294f66eab9
Merge: db86220 eccfcdc
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon May 7 22:21:01 2012 +0000

    Merge "glance-api: separate exit status from message"

commit db86220abb0861ccb58fb6af57a262c734a18d6e
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Tue May 1 10:30:03 2012 +0100

    Use ConfigOpts.find_file() for policy and paste
    
    Use cfg's new helper method to find the PasteDeploy and policy config
    files. The basic behavior is "look alongside the config file" with a
    fall back to the standard default config paths.
    
    In the fairly obscure case where no --config-file is found we use an
    explicit default paste file taking to account the fact that all the
    glance apps have their paste config in a single file.
    
    Add some new debug logging to make it easier to see which config files
    are being loaded.
    
    Fixes bug 992319
    
    Change-Id: I978c4a8cb6ec6d12aaf746af511ccb572c34b7ee

commit c1ea910bc501643e53bbb2401a62c3482d667c06
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Thu May 3 15:05:13 2012 -0700

    Implement image data upload/download for v2 API
    
    * Add the ImageDataController to handle upload/download of image data
    * Expose file link in image entities
    * Implements bp api-v2-image-upload
    
    Change-Id: Id3618bd292b61cd5eedf48a034fa66fd80917b72

commit f879081427f265be4310b3067152615b02ecbfee
Author: Monty Taylor <mordred@inaugust.com>
Date:   Sat May 5 12:04:39 2012 -0700

    Use sdist cmdclass from openstack-common.
    
    Change-Id: I6f970cb61929d32fa121c1bc1209fc1fef1d572d

commit eccfcdcd9e30b775cce5c4e96224392ea6f0ede4
Author: Patrick Mezard <patrick@mezard.eu>
Date:   Sun May 6 14:07:52 2012 +0200

    glance-api: separate exit status from message
    
    This will be useful to tell regular failures from child unexpected
    terminations.
    
    Change-Id: I3fdf02558d8bdd8be6487edc20059e0e8a0e50b8

commit 06821eaff2670d9f8c8a0a5be20302d1028dc2a2
Author: Dan Prince <dprince@redhat.com>
Date:   Sat May 5 22:09:19 2012 -0400

    Update noauth caching pipeline to use unauth-ctx.
    
    Updates the noauth version of the caching pipeline to use
    unauthenticated-context.
    
    Fixes LP Bug #995323.
    
    Change-Id: Id83be95f582a4a6ebe47dbeddc8101a51988e05e

commit 6d15a2debb00ee4709ed8df582915501316b1ec3
Merge: 6e65bf9 59aa1ef
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat May 5 20:10:35 2012 +0000

    Merge "Add /v2 to sample glance-api-paste.ini"

commit f184a386271b8305023c90186244a370727b2535
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Sat May 5 19:59:05 2012 +0100

    Return 204 from DELETE /v2/images/<image_id>
    
    Fix bug 995224
    
    The v2 API design and normal RESTful idiom would suggest that a
    204 No Content status is more appropriate than 200 OK.
    
    Change-Id: Ic5ae3ffa22eafdec0f780d16cceb8ce45c84c854

commit 6e65bf9f077479460a441d8b79624d860970359b
Merge: 3f3da92 8bd40b7
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri May 4 19:11:00 2012 +0000

    Merge "Add localization catalog and initial po files to Glance. Fix bug 706449."

commit 3f3da929f62f483dacb4efa60fe8519728934fb7
Merge: 4f21169 bcb6089
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri May 4 19:01:33 2012 +0000

    Merge "Convert glance to glance/openstack/common/setup.py"

commit 8bd40b7b5a12b8eee5edac224ed5a8a50370faba
Author: ZHANG Hua <zhuadl@cn.ibm.com>
Date:   Thu Apr 26 17:54:03 2012 +0800

    Add localization catalog and initial po files to Glance.
    Fix bug 706449.
    
    Change-Id: I5e8e0ff0161d9db0253db12284cce347aacbac5f

commit 59aa1ef2a7b35ae80a8c50808b24c3564db9caa6
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Thu May 3 17:52:25 2012 -0700

    Add /v2 to sample glance-api-paste.ini
    
    * Related to bp api-2
    
    Change-Id: I147624128bea7e0ca84c1673857b227f0590ec78

commit 4f2116937a9a5408358855343b51f3fd02042c48
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Tue Apr 24 17:14:28 2012 -0700

    Basic functionality of v2 /images resource
    
    * Implement create, upate, and delete actions for images
    * Adds a basic functional test
    * Add all /images url routes
    * Implements bp api-v2-images
    
    Change-Id: Ib9b16c443730943557f555b4aa9ce63840ff8e17

commit eb4aaa97bd1e1c7e541a0ad109fb23dfee0f9c9d
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Tue May 1 15:41:06 2012 -0700

    Split noauth context middleware into new class
    
    Use UnauthenticatedContextMiddleware in the case that you want to deploy
    without an auth service. ContextMiddleware is now solely for authenticated
    requests.
    
    * Rewrite ownership tests for adding/updating images through the v1 API
    * Fixes bug 992859
    
    Change-Id: I608671aac8300c9195769542708708afda991e04

commit 64ab035f9615e67ce382c9eaf232608d9c5cd8fd
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Fri Apr 27 10:45:22 2012 +0100

    Add -c|--coverage option to run_tests.sh
    
    A convenience for generating coverage metrics. Might make it
    more likely that developers will review the coverage stats more
    often, to identify pre-existing blackspots and avoid proposing
    under-tested new code.
    
    Change-Id: Iecd10ec529dd6e93d18a6763bf36667402640881

commit 90609a35fca063675076f2b75eb4dda4f9ab58d3
Merge: f0a0c4a 6e29b0b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed May 2 22:30:44 2012 +0000

    Merge "Support for directory source of config files"

commit bcb6089733c334edf35edca2e61338fc7f5ef6e3
Author: Chuck Short <chuck.short@canonical.com>
Date:   Tue Apr 24 09:21:48 2012 -0400

    Convert glance to glance/openstack/common/setup.py
    
    Convert glance to use glance/openstack/common/setup.py
    to write the changelog.
    
    Change-Id: Ibadec15d7e530149cf62cd00d63c06bf63cf53bb
    Signed-off-by: Chuck Short <chuck.short@canonical.com>

commit fe3ae1d73b643c99987eaddb084ed094901cde8d
Author: Chmouel Boudjnah <chmouel@chmouel.com>
Date:   Fri Apr 13 16:44:33 2012 +0000

    Update glance to pass properly tenant_name.
    
    - Update glance with the latest changes in swift.common.client.
    - Use 5000 for port.
    - Properly test v2 in tests.
    - Fixes bug 980196.
    - Test swift against a specific stable version like for keystone.
    
    Change-Id: Iaff536efc92e78e51d8042010ce0eb407c4a71b2

commit f0a0c4a00067b1353fe7f1c677c28458e93297b3
Author: Joe Gordon <jogo@cloudscaling.com>
Date:   Tue May 1 15:38:07 2012 -0700

    Cleanup authtoken examples
    
    * remove auth_uri - do not need when set auth_port, auth_host, auth_protocol
    * remove servce_*  variables - not needed in new keystone
    * update associated documentation
    
    Change-Id: I9bf7d53f7d62371848645a242ae63f77b42319db

commit 6e29b0bd6d3be1af051a5e6615b286dcc60457fb
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Mon Apr 23 20:11:51 2012 +0100

    Support for directory source of config files
    
    Allow multiple config files to be pulled in from a config directory,
    as opposed to individual config files being explicitly enumerated.
    
    This logic is enabled using the --config-dir=/path/to/config CLI option,
    causing config to be retrived from all matching /path/to/config/*.conf
    files.
    
    Sections may be re-opened across config files, and all config items
    must reside in an explicitly specified section (i.e. it does not default
    to [DEFAULT]). This behavior is unchanged.
    
    The common elements of this patch (i.e. not specific to the
    glance-specific location of paste.ini files) have landed in
    to openstack-common as:
    
      https://github.com/openstack/openstack-common/commit/fd8c2e7c
    
    Change-Id: I3b659f1837c082bd1a78fe860a468f9d68f0f132

commit bdcb63d46d6a1eeff0ac6b89226043df5024c4d9
Merge: fb71028 f4ce37b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue May 1 15:20:12 2012 +0000

    Merge "Auto generate AUTHORS file for glance."

commit fb710288707a8d46cbe898d1b40810d2907e448f
Author: Dan Prince <dprince@redhat.com>
Date:   Tue May 1 09:42:16 2012 -0400

    Support conf from URL's with versions.
    
    Adjusts our version match regex so that it detects URL's
    which already have version's in them that start with
    a '/'.
    
    For example: '/v1'
    
    Fixes LP Bug #992600.
    
    Change-Id: I331e945c46757a01a4dd939b2098e68334b27530

commit f4ce37b9c23cb09b5e4e07c0af5bae7a65f6cc04
Author: Bhuvan Arumugam <bhuvan@apache.org>
Date:   Fri Apr 20 23:37:28 2012 -0700

    Auto generate AUTHORS file for glance.
    
    Bug: 976267
    
    Now that git commits are gated by CLA, we shouldn't enforce
    committers to add an entry in AUTHORS file. The AUTHORS file
    should be generated automatically, based on git commits.
    
    This commit fixes the problem.
    
    * Authors
      Remove this file. To be consistent with other projects,
      the new file AUTHORS is generated automatically.
    
    * .gitignore
      Add AUTHORS file.
    
    * glance/common/setup.py
      generate_authors(): New method to create AUTHORS file. If
      AUTHORS.in file exists, append it's content to AUTHORS file.
    
    * setup.py
      Import the new method.
      local_sdist.run(): Generate AUTHORS file before creating the
      package.
    
    * MANIFEST.in
      s/Authors/AUTHORS
    
    * glance/tests/unit/test_misc.py
      AuthorsTestCase: Remove this class that test an entry in
      Authors file.
      parse_mailmap(), str_dict_replace(): Remove these methods.
    
    Change-Id: If83c3fe9b2142342ac11cc019bc24926f52ee753

commit c1053b233e637a481e70453f4e6f5915deb4d620
Merge: 8b23d4f 60ab521
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue May 1 00:43:53 2012 +0000

    Merge "Fixes LP #992096 - Ensure version in URL"

commit 8b23d4faafeb5819e5b3db1e8f1970b7d434bf2f
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Tue Apr 24 11:30:21 2012 -0700

    Integrate openstack-common using update.py
    
    * Update all cfg and setup imports to point to new location
    * Fixes bug 987968
    
    Change-Id: If2fbf126e0b241e80ee59fa4e43bb5af6eb879a8

commit 60ab521b01b4f653655eecd8ba2e561a7bbdf0c9
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Mon Apr 30 14:38:51 2012 -0400

    Fixes LP #992096 - Ensure version in URL
    
    * Documents the configure_via_auth parameter
    * Ensures that if configure_via_auth is used (the default), that
      if the management_url that is returned does not contain a version
      identifier, the client class' DEFAULT_DOC_ROOT is appended
      appropriately.
    * Adds some log debugging statements into the base client class so
      that the URL being configured/constructed is more easily identifiable
    
    Change-Id: I307a24231b59f7a183ed669f679976cc3f8ec21c

commit 621c392240ebda86a3602a87b1d72016ae85351d
Merge: 5c446d0 bd305fa
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Apr 27 01:19:41 2012 +0000

    Merge "Merge registry context with common context"

commit bd305fa07b356365a54e419a4d63f71d798850ce
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Tue Apr 24 20:35:41 2012 -0700

    Merge registry context with common context
    
    Pull the extra methods defined in glance.registry.context:RequestContext into
    glance.common.context:RequestContext. This is necessary as the new v2 API
    implementation talks directly to the database.
    
    * Partially implements bp api-2
    
    Change-Id: Ia8c1fde511bdca69be0dcf61ce12976ace5f7dc3

commit 5c446d063a7d1e468644a53dc310e9bbc07ae4e7
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Sun Apr 22 19:51:48 2012 -0700

    Begin functional testing of v2 API
    
    * Ensure the schemas resource functionally works
    * Partially implements bp api-2
    
    Change-Id: I0bedda0276e0ae3a648d425030c434be9c1eb1b6

commit ba939295e3a5b79c1856b2d60800874fe5479e01
Merge: bfb00b1 223fbee
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Apr 24 18:52:47 2012 +0000

    Merge "Omit Content-Length on chunked transfer"

commit bfb00b1547c7a2b7c9cf7692a47a8f6178404237
Merge: 5bed23c c449d76
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Apr 24 18:10:24 2012 +0000

    Merge "Fixes LP #978119 - cachemanagement w/o keystone"

commit c449d76ff2e19fecf46f0830cefbc3255a29fb1c
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Tue Apr 24 13:06:44 2012 -0400

    Fixes LP #978119 - cachemanagement w/o keystone
    
    Removes section of glance-api-paste.ini that refers to
    an improper cachemanagement middleware without keystone
    
    Change-Id: I86a1a84aac16a8345b06ce83562f4508b49dac10

commit 223fbee49a55691504623fa691bbb3e48048d5f3
Author: Mike Lundy <mike@pistoncloud.com>
Date:   Fri Apr 13 19:53:16 2012 -0700

    Omit Content-Length on chunked transfer
    
    Content-Length and Transfer-Encoding conflict according to the HTTP
    spec. This fixes bug 981332.
    
    This also adds the ability to test both the sendfile-present and
    sendfile-absent codepaths; the sendfile-present test will be skipped on
    sendfile-absent platforms.
    
    Change-Id: Ibb017b4a43d89ffdb6b868648296603cfec7780d

commit 5bed23cbc962d3c6503f0ff93e6d1e326efbd49d
Author: Russell Bryant <rbryant@redhat.com>
Date:   Tue Apr 24 12:24:39 2012 -0400

    Fix content type for qpid notifier.
    
    Fix bug 980872.
    
    This patch fixes a regression I introduced in
    2d36facf14f4eb2742ba46274e04a73b5231aece.  In that patch, I adjusted the
    content_type for messages sent with the qpid notifier to be
    'application/json' to match a change that went into the kombu notifier.
    Unfortunately, it's wrong.
    
    I assumed based on the kombu change that notifications were being json
    encoded before being passed into the notification driver.  That's not
    the case.  The message is a dict.  So, just revert the change to set the
    content_type and let Qpid encode the notification as 'amqp/map'.
    
    Change-Id: Iea027409f6200109b97fed93073cff84bc915536

commit a9fb22483d9ebc08320dcf9019861ecd2e1feb63
Merge: 1a275d4 3a81aa9
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Apr 24 15:38:26 2012 +0000

    Merge "Remove __init__.py from locale dir"

commit 1a275d4fa284571a337043b425192b10a06c457a
Merge: 0aa0341 3de99a1
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Apr 24 09:49:13 2012 +0000

    Merge "Fix i18n in glance.notifier.notify_kombu"

commit 0aa03410282f32060f40df6cf2e7e6f208f36fd6
Merge: e4bfe50 39e6529
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Apr 24 02:18:57 2012 +0000

    Merge "Add a space to fix minor typo in glance help."

commit e4bfe5020d5426b9d2def07f28c034054fda87e7
Merge: df28738 0e10519
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Apr 24 02:08:43 2012 +0000

    Merge "Suppress pagination on non-tty glance index."

commit 3a81aa9fe2fd97563627a606f7eb95170ec005e4
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Mon Apr 23 09:40:55 2012 -0700

    Remove __init__.py from locale dir
    
    Previously, the __init__.py indicated that we have a custom locale package,
    preventing imports of the locale package that ships with python itself.
    
    * Fixes bug 977021
    
    Change-Id: Id4921a1efd1a223790cc8b52917d00b387e9cba6

commit 3de99a1831ce8550e70dc6b0f96051578b61e1e7
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Sun Apr 22 22:21:53 2012 -0700

    Fix i18n in glance.notifier.notify_kombu
    
    * Fixes bug 983829
    
    Change-Id: Ibc5ec12e97e69797d1952c020c3091f42480abec

commit df28738d1f693d5ae35d75dfcdad41706a012230
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Sun Apr 22 20:31:00 2012 -0700

    Override OS_AUTH_URL when running functional tests
    
    * Fixes bug 985671
    
    Change-Id: Ie4f4c13846de727647abe168aeb193a93f03e0bf

commit ca84ec7d5550c0978ac80fad7972e77c1c971107
Author: Ionu Arrii <iartarisi@suse.cz>
Date:   Thu Apr 19 14:16:45 2012 +0300

    remove superfluous 'pass'
    
    Change-Id: Icf959c47a0d63ed1805151a144b99623efc0a1ac

commit 6cc4b8ea2d4642ed0f2167abd6c0ebedd65853c1
Author: Yaguang Tang <heut2008@gmail.com>
Date:   Sun Apr 15 11:53:55 2012 +0800

    fix bug lp:980892,update glance doc.
    
    Change-Id: I5b231421be4dbb38a3af45783543bef50b74c09c

commit 39e652955096474819b6f940561aef4122576458
Author: Matthias Schmitz <matthias@sigxcpu.org>
Date:   Fri Apr 13 20:36:53 2012 +0200

    Add a space to fix minor typo in glance help.
    
    * Add space to fix minor typo in glance help.
    * Add myself to Authors as adviced in the review process.
    
    Change-Id: I9a656e5fce7184605eca98102f9f39a8799c84de

commit 0e105198063d1365a2147d83c85453f21646e333
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Wed Apr 11 11:40:08 2012 +0100

    Suppress pagination on non-tty glance index.
    
    Fixes bug 978610.
    
    Avoid the 'Fetch next page? [Y/n]' prompt interfering with
    redirected output.
    
    The native glance CLI will soon be superceeded by the new
    python-glanceclient, however this patch could still be useful
    to propogate from master to the stable diablo/essex branches.
    
    Change-Id: I16bc6156d7c7e9ed27aabcaa51211060ec24a824

commit 05a6124ea2fb48494d5c0b50a4917ad42b470052
Merge: c34bf10 5182c1e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Apr 12 18:22:14 2012 +0000

    Merge "API v2 controller/serialization separation"

commit c34bf105443a2b064817913b516529773bc3217a
Merge: 38a797d e4d04f5
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Apr 12 16:00:05 2012 +0000

    Merge "012_id_to_uuid: Also convert ramdisk + kernel ids"

commit 38a797d1f1392935a40c7afa9b65bb000f1c0575
Merge: 542cca1 93013cc
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Apr 12 15:16:46 2012 +0000

    Merge "Kill glance-api child workers on SIGINT"

commit 542cca173369ea0bf490f45c0a18261f9827ebc3
Merge: fa82103 936b6a6
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Apr 12 15:03:14 2012 +0000

    Merge "add postgresql support to test_migrations"

commit 93013cc5d5d3ab1a574e3110f80ff63f2ff76674
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Wed Apr 11 17:44:07 2012 +0100

    Kill glance-api child workers on SIGINT
    
    Fixes bug 978130
    
    Previously glance-api configured to run multiple child
    workers went in a respawn tail-spin when the parent is
    interrupted with crtl+c.
    
    This is now avoided by terminating the process group when
    SIGINT is received, in the same way as SIGTERM is handled.
    
    Change-Id: Ieca90f45e07cc3645a997bba493e0b9a9f08a470

commit fa82103f1cdb9bb26473df3a4ee9ddc077c0541e
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Thu Apr 12 11:27:18 2012 +0100

    Ensure swift auth URL includes trailing slash
    
    Fixes bug 979745
    
    Image objects in swift were previously leaked post-deletion
    due to a silent auth failure caused by the absense of the
    trailing forward slash on the swift connection auth URL.
    
    Change-Id: I9c73a2f75a6466e73801ababdd81db77701ccb20

commit 936b6a6e24b6b0678e54a3cebb2aefd6a0c7cdae
Author: J. Daniel Schmidt <jdsn@suse.de>
Date:   Wed Apr 11 16:11:04 2012 +0200

    add postgresql support to test_migrations
    
    fixes bug 908180
    
    Change-Id: Ic8afdfb3bce4c40c8cb47664dae053ec5e40d03c

commit e4d04f50adc2426f08872b0cececfe48f1d18683
Author: Adam Gandelman <adamg@canonical.com>
Date:   Fri Apr 6 20:59:39 2012 -0700

    012_id_to_uuid: Also convert ramdisk + kernel ids
    
    The original migration converts numerical IDs to UUIDs.  It updates
    image_members and image_properties that reference image_id, but stops
    short of updating actual properties that reference the new UUIDs,
    specifically kernel_ids and ramdisk_ids.  This breaks launching
    of instances in Nova whos images are associated with a kernel and/or rd.
    
    Also, this fixes an issue when migrating against non-sqlite
    databases where the actual conversion is executed twice.
    
    Fixes bug 975655
    Fixes bug 975651
    
    Update: Only update kernel_ids and ramdisk_ids in image_properties
            when converting to UUIDs
    
    Change-Id: I76ecabc5ee266e2e9765740721e8ec1722cc5a7c

commit f8766a8fb54bd91077ebfcdc546b1513e7604275
Merge: e400677 b8ce9ca
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Apr 11 19:33:37 2012 +0000

    Merge "search for logger in PATH"

commit 5182c1eb21c28a61d0a43a4f4615073470bcd0a5
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Tue Apr 10 21:53:28 2012 -0700

    API v2 controller/serialization separation
    
    * images and access are now separated into deserializers, controllers, and serializers
    * now using schemas to valide incoming requests
    * adding create methods for image access
    * removing ImageNotFound as it was only being generated by fakes, using NotFound until the backend is updated
    
    Change-Id: Ida3c1b117ee0147e818b74518e84ef9101cbdfc3

commit b8ce9caab211004555da3642ab6fb0b40bb85f9e
Author: J. Daniel Schmidt <jdsn@suse.de>
Date:   Wed Apr 11 15:19:55 2012 +0200

    search for logger in PATH
    
    fixes bug 978907
    
    Change-Id: I16a20982cc90f3857e20ab23e2b3f5d1aa2722a0

commit e4006778db0aa75da1958d0d59340e1d553e8c85
Author: Dan Prince <dprince@redhat.com>
Date:   Wed Apr 11 11:20:11 2012 -0400

    Set install_requires in setup.py.
    
    Inline shared version of setup.py from openstack-common. This can
    be removed once projects switch over to use the shared version.
    
    Updates setup.py so that it sets install_requires and dependency_links.
    
    Fixes issues where pip installing glance doesn't properly install
    dependencies.
    
    Fixes LP Bug #975483.
    
    Change-Id: I5a10b311cfde2fda4d4dac341dd866f868b72d0d

commit fc816ee0298de8abf0e0dc08b7c9505fb95c5824
Merge: 9327502 86eb836
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Apr 11 15:17:11 2012 +0000

    Merge "Minor grammar corrections."

commit 9327502f58ce1d7e869d953416dfff134fccc887
Merge: 4255bbf d15ec03
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Apr 11 14:42:01 2012 +0000

    Merge "Skip test depending on sqlite3 if unavailable"

commit 86eb83668511083298e6f5ecfcc80e395277e452
Author: Paul McMillan <paul.mcmillan@nebula.com>
Date:   Tue Apr 10 12:52:56 2012 -0700

    Minor grammar corrections.
    
    Fix its/it's, clarify a few other wordings.
    
    Change-Id: I4459e72e79caf84f4c69378cf20f7c443cf48b97

commit 4255bbfb2ee80abdca9c9858a7076bf4b52180be
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Wed Mar 28 08:33:39 2012 -0700

    Bootstrapping v2 Image API implementation
    
    * Adding barebones of images, access, schema, and root resources
    * Greatly simplify version negotiation middleware
    * Partially implements bp api-2
    
    Change-Id: I3ae72354d7ec7f3766aec164d305c52e7315200d

commit 6999c60d775ba1b2d35d0399f236d46b10d4fe0a
Merge: f0a0b1d 4e35808
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Apr 9 14:54:04 2012 +0000

    Merge "Fix db migration 12"

commit f0a0b1d8132a03fac959da2127853eb89b80b340
Merge: 0411fd2 35ed310
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Apr 9 04:07:43 2012 +0000

    Merge "Reorganize pipelines for multiple api versions"

commit 4e35808f94db8c17a20608e137e2940195821fac
Author: Sam Morrison <sorrison@gmail.com>
Date:   Mon Apr 2 11:22:10 2012 +1000

    Fix db migration 12
    
    * fix bug 976908
    
    Change-Id: I0248f825396d08688238e6d2ef37c8fcb49e8c9d

commit 0411fd29af3cebbc053709b79914286c16ec067b
Author: Josh Kearney <josh@jk0.org>
Date:   Thu Apr 5 17:52:34 2012 -0500

    Remove unused imports.
    
    Change-Id: I9d602ed429caff8ffb00e40f623c473c5425e1cc

commit 35ed3105552cf6c182c76b6f13f719bfe7eb596b
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Tue Mar 27 19:18:50 2012 -0700

    Reorganize pipelines for multiple api versions
    
    * Partially implements bp api-2
    
    Change-Id: Ie942c54e0ba294da661de870a95d685a9b8966de

commit d15ec03e5d6daf135dfcd9387122f5ade9b4a44c
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Thu Apr 5 09:29:01 2012 +0100

    Skip test depending on sqlite3 if unavailable
    
    Fixes bug 973626
    
    Add @depends_on_exe to declare a test dependency on the availability
    of an executable.
    
    Skip TestSqlite.test_big_int_mapping if sqlite3 not available on the
    local PATH.
    
    Change-Id: I1b7cf0636f79422f9f31f6a88a493791897a53b4

commit 8e9e0cadaf8ce246861cf661cd4927ba7480484a
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Tue Apr 3 11:22:07 2012 +0100

    Defaulted amazon disk & container formats
    
    Fixes bug 972014
    
    Default unset disk/container format to the corresponding container/disk
    format, where the latter is an amazon format requiring a strict match.
    
    Change-Id: I147df146940a21c368e95901343f36e1e3b7495b

commit f6bdb110c0f3bfa8297b4e75f3708719c04f85e2
Merge: f4d30e7 f28f16a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Apr 2 20:30:37 2012 +0000

    Merge "Compile BigInteger to INTEGER for sqlite"

commit f28f16a750ad134fad2ff663680b149ce77e31c9
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Mon Apr 2 18:55:35 2012 +0100

    Compile BigInteger to INTEGER for sqlite
    
    Fixes bug 966243
    
    Ensure BigInteger does not map to BIGINT for an auto-created
    sqlite registry DB, as this type is not supported by sqlite.
    
    Change-Id: I61f44fbe50ea406d2d593f8f53cab5da3af2222a

commit f4d30e76e68c9934c9035c62fb566802d5519353
Merge: 47af007 fea599e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Apr 2 16:18:44 2012 +0000

    Merge "Updated RST docs on containers, fewer references to OVF format."

commit 47af0073aed4035a8c8796811cc6022161c74457
Merge: 5eddae2 6999834
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Apr 2 16:10:36 2012 +0000

    Merge "Publish v2 in versions responses"

commit fea599efcc0dadc87869aee012c7b1da1f7e26ab
Author: Lorin Hochstein <lorin@nimbisservices.com>
Date:   Sun Apr 1 11:39:53 2012 -0400

    Updated RST docs on containers, fewer references to OVF format.
    
    Updated the RST documentation that discusses container formats, since they
    aren't really used right now.
    
    Changed some examples from ovf to bare, since in most cases, users just upload
    a bare image file.
    
    Change-Id: I844d7827c3de4df6cdddb9b963cc2f236a3e6767

commit 5eddae290dae6efc7c71cdbb35a3b76d37266451
Author: Bernhard M. Wiedemann <bwiedemann@suse.de>
Date:   Fri Mar 30 17:31:53 2012 +0200

    rename the right index
    
    fixes bug 953159
    This did not affect sqlite and mysql, because those can not rename indexes
    and thus used a separate sql file to drop and create the right one.
    
    Change-Id: Iab80a65464a591b732ecce4c00d04df50624e912

commit 257be28b8c77bd1fa3e402d2bd2f5ee67ac4e60e
Merge: 403afc5 0dc093b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Mar 30 09:56:00 2012 +0000

    Merge "Add MySQLPingListener() back"

commit 403afc528658702bb1aff681e43e9f628a31475c
Merge: 1df78db 308642e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Mar 30 01:40:45 2012 +0000

    Merge "Test coverage for update of image ownership"

commit 1df78db43fe27c808aade4e9dc5bc4ed33efb7de
Merge: a17f7de 4955b46
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Mar 30 01:31:48 2012 +0000

    Merge "Run version_control after auto-creating the DB"

commit a17f7deeb5e6ab5eeb05108644d4a96fcf26dde6
Merge: c8a6bf4 da66de0
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Mar 29 22:18:34 2012 +0000

    Merge "Allow specifying the current version in 'glance-manage version_control'"

commit c8a6bf45b1cf34a5b61ab1aedb287771426aaf94
Merge: f439f41 8b7a830
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Mar 29 18:02:24 2012 +0000

    Merge "Reject excessively long image names."

commit f439f412855227bdaaf89fef16ba5bbceb954415
Merge: 9fd589c 633f831
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Mar 29 17:53:52 2012 +0000

    Merge "Add support for auth version 2."

commit 8b7a830c047e112b3004f4949a5b857371368508
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Thu Mar 29 17:39:11 2012 +0100

    Reject excessively long image names.
    
    Fixes bug 966240
    
    Image names longer than 255 characters are rejected with 400 BadRequest
    on creation or update.
    
    Change-Id: I460ffee547496829cbf198b50bca564978abe7f3

commit 308642e4a3fafa17b80d0e9227b9c9f92ccd18a5
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Thu Mar 29 11:23:50 2012 +0100

    Test coverage for update of image ownership
    
    Assert the expected behaviour occurs for update of image ownership
    by admin (success) and non-admin users (fails with 403 Forbidden).
    
    Change-Id: I1895f6a30c3c50526955c2fc131c8c3b0817d365

commit 0dc093b98faf8e256ddc48f9dafb4d061662f0e3
Author: Adam Gandelman <adamg@canonical.com>
Date:   Wed Mar 28 17:08:13 2012 -0700

    Add MySQLPingListener() back
    
    The use of wrap_db() to catch low-level problems in the connection
    pool appears to be incompatible with new versions of sqlalchemy
    (0.7.4/precise).  This re-instates the use of a event listener to
    catch the error of 'mysql has gone away'.  Keeps the wrapping
    logic in place for use before the connection pool has been constructed,
    specifically to allow glance to retry its initial database connection on
    service startup.
    
    Fixes bug 967887
    
    Change-Id: Ia732377d3404104b8acf7fe4ada164ec7ecf705f

commit 9fd589c869dbfefd76af135ed16365ae5bdda954
Merge: 622901d f0a9f97
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Mar 28 08:52:02 2012 +0000

    Merge "Allow yes-like values to be interpreted as bool"

commit 633f83109f0e6185f6960912565194436b2aaf3f
Author: Juerg Haefliger <juerg.haefliger@hp.com>
Date:   Tue Mar 27 08:29:58 2012 +0200

    Add support for auth version 2.
    
    Implements version 2 authentication for the Swift backend.
    Fixes bug 944946.
    
    Change-Id: I614ad03374a2e31a945f12fb9588947022203f1f

commit 4955b4617fa6ad41cc10cc126da4cfc3655f1b9d
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Tue Mar 27 15:03:06 2012 +0100

    Run version_control after auto-creating the DB
    
    Fixes bug #966241
    
    Currently, we auto-create an unversioned DB. This makes it awkward to
    later upgrade it, especially since our 'glance-manage version_control'
    command doesn't support retroactively versiioning it.
    
    This is easily avoided by running version_control() after creating the
    DB.
    
    Change-Id: I935c06fcbcd3611c65d464850ca05445129f905f

commit da66de06763dd872f139491930cf1deb6a723b06
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Tue Mar 27 12:23:47 2012 +0100

    Allow specifying the current version in 'glance-manage version_control'
    
    Fixes bug #966242
    
    The version_control command is a bit useless since you can't actually
    specify what version to  use and it defaults to version=0.
    
    Allow the user to specify a version:
    
      $> glance-manage version_control 9 # set the diablo version
    
    and default to the latest version if none is specified.
    
    Also, allow db_sync to be supplied a version for the case where we're
    upgrading an unversioned DB.
    
    Finally, re-work the argument handling in glance-manage to more easily
    handle optional args.
    
    The tests are extended to test using db_sync for upgrades and to test
    placing an existing database under version control.
    
    Change-Id: I231dc710554198bfd1fdcb82c3c3768963f64bd8

commit 69998343f38b744a6adca77c83a45b3a87d2c7c6
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Tue Mar 27 19:18:50 2012 -0700

    Publish v2 in versions responses
    
    * v2 is EXPERIMENTAL for now, as there is no actual implementation
    * Partially implements bp api-2
    
    Change-Id: Ie942c54e0ba294da661de870a95d685a9b8966df

commit 622901d725a379d81ff878035567c2f45f14f0a1
Merge: 9e7dc21 12757d7
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Mar 27 22:38:28 2012 +0000

    Merge "Ensure functional db connection in configure_db()"

commit f0a9f97bfaf367497a86d283b10a31bd72f79524
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Tue Mar 27 09:44:49 2012 -0700

    Allow yes-like values to be interpreted as bool
    
    * Accept 'YES', 'yes', 'Y' and 'y'
    * Remove duplicate function bool_from_header_value
    * Fixes bug 965563
    
    Change-Id: I593a50117fd339a8ab281a8daad734770ca9960c

commit 9e7dc210fcf0126b131b7390b6c4c5ee44e302e1
Merge: 9e784cd 6005cb7
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Mar 27 15:43:48 2012 +0000

    Merge "Support owner paramater to glance add"

commit 6005cb7e41408912b5ae56d5f23859bcfb217969
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Fri Mar 23 11:32:10 2012 +0000

    Support owner paramater to glance add
    
    Fixes bug 962998
    
    Allow the owner to specified as a first class image attribute
    when creating a new image via the CLI, as it is currently for
    image update.
    
    Also added a simple fakeauth pipeline to allow the user, tenant
    and admin status of API requests to be easily controlled by
    functional tests.
    
    Change-Id: I0f83d55d4a96ad3632fb238ad1758ec3f00ed3fd

commit 9e784cd5312e10d7a2be38224354f3a34f34eab3
Merge: 98405b2 12098c1
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Mar 26 16:38:54 2012 +0000

    Merge "Adding versioned namespaces in test dir"

commit 12098c15962ac85df738ef1e5152a77bcd62c6a5
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Sun Mar 25 13:13:43 2012 -0700

    Adding versioned namespaces in test dir
    
    This is being done in preparation for the v2 API.
    
    Change-Id: Ie2fc4df77740b6d1cd629a21942850fd24eb7d60

commit 98405b2a1f88b1ac68746b16d59fd8f5a98f9814
Author: Bhuvan Arumugam <bhuvan@apache.org>
Date:   Wed Mar 21 16:21:39 2012 -0700

    Typo.
    
    * doc/source/configuring.rst
      Fix typo.
    
    * Authors
      Add my name in this file.
    
    Change-Id: I23cea08560a02897c85d031bd0f16f22d7d84db0

commit 12757d70fe6cf0d0fe6e46c5ee09a4f4d3efbd49
Author: Adam Gandelman <adamg@canonical.com>
Date:   Fri Mar 23 18:23:54 2012 -0700

    Ensure functional db connection in configure_db()
    
    During initial database setup, ensure we can physically connect
    to the database and allow a failed connection to make use of the
    new retry mechanism instead of registry startup failing outright.
    
    Fixes lp bug #959426.
    
    Change-Id: I1c87b19913c4204465e5d2027f2f184f0f358fd0

commit 2d36facf14f4eb2742ba46274e04a73b5231aece
Author: Russell Bryant <rbryant@redhat.com>
Date:   Fri Mar 23 08:55:28 2012 -0400

    Set content_type for messages in Qpid notifier.
    
    Fix bug 963050.
    
    This patch is the Qpid equivalent for a patch that just went in for the
    rabbit/kombu notifier.  Glance encodes the message in json format before
    passing it in to the notifier.  Explicitly set the content type for the
    messages to 'application/json'.
    
    Change-Id: I2f83f51487541b951f3eca0ae4d160a64f5a3db1

commit c1b7b9c5aead3ab7c9b1e9e7670a670c76d9b7e3
Merge: f78b49d 85eb4df
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Mar 22 21:57:26 2012 +0000

    Merge "Fixes lp959670"

commit f78b49df1c74b60bf1bfecd1a58376327f4ea9bf
Merge: 47384f7 801c39a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Mar 22 18:49:32 2012 +0000

    Merge "Avoid leaking secrets into config logging."

commit 801c39ace66c7866a80aea3f26f5848afb416ee8
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Thu Mar 22 16:02:19 2012 +0000

    Avoid leaking secrets into config logging.
    
    Fixes bug 962385
    
    Configuration option values are logged when debug is enabled,
    which is in turn exposed via the glance-logcapture nose plugin
    when tests fail in Jenkins.
    
    Allow options to be declared secret so that their value is
    obfuscated before logging.
    
    Also proposed to openstack-common as:
    
      https://review.openstack.org/5694
    
    Change-Id: Ifdd1696f40c069f83c160afb0bf399da21796b8a

commit 85eb4df48082fd5c8402e17a4e290e7ff7f48dd5
Author: Matt Dietz <matt.dietz@rackspace.com>
Date:   Mon Mar 5 04:23:47 2012 +0000

    Fixes lp959670
    
    Manually sets the content_type in the notification message body. This allows any
    tools dependent on the content_type to function correctly.
    
    Change-Id: I496c005b84df5f4aa2c18ab2b3a4ab136b840111

commit 47384f7b56ebc4479dfb6cca02a5fe642e1f2bb0
Author: Dan Prince <dprince@redhat.com>
Date:   Wed Mar 21 21:10:23 2012 -0400

    Send output of stty test cmd to stderr.
    
    Send the output of the stty test for terminal size to stderr.
    
    Fixes LP Bug #961820.
    
    Change-Id: Ifc46632c9cf8bffb2dec7ef48f17157bf8ae1199

commit 56c7ba73deac0c2fa9ee1887e953428c40782114
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Tue Mar 20 22:07:02 2012 +0000

    Use unique per-test S3 bucket name.
    
    Addresses bug 955527
    
    Avoids a race between the S3 testcase body and the bucket clean-out
    in the S3 test teardown, running near concurrently in the Jenkins
    python26 and python27 builds.
    
    Change-Id: I10f013b02bb74db2cbfc692ed372121d21bca3fb

commit 773b3a89f51af406b22811dccc0ccc7cd2478700
Merge: cb15f06 4150aec
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Mar 21 15:40:10 2012 +0000

    Merge "Specify location when creating s3 bucket."

commit 4150aecfcb1ae2314638301e2db6e808071dc148
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Wed Mar 21 11:54:21 2012 +0000

    Specify location when creating s3 bucket.
    
    Fixes bug 961050
    
    Avoids bucket creation failure when a region-specific S3 endpoint
    (e.g. s3-eu-west-1.amazonaws.com) and also bucket create-on-demand
    are configured.
    
    Change-Id: Ieba9c535ccb961a1f81bd2632b5ac49c23ac7901

commit cb15f0651a6a69a52709caa8aae3713400d45686
Merge: 086e4f3 3f462fb
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Mar 21 12:32:56 2012 +0000

    Merge "Fixed db conn recovery issue. Fixes bug 954971."

commit 086e4f32d88a119b0f29cf0cb6630d15cbea6cf1
Author: Thierry Carrez <thierry@openstack.org>
Date:   Tue Mar 20 23:01:09 2012 +0100

    Open Folsom
    
    Bump version to 2012.2 to formally open Folsom development.
    
    Change-Id: I3d86442fdd545842cbc1505cbc478e88747af90d

commit 15d9c8f371dd76bfd20b5718a662409ef3dff8f7
Author: Joe Gordon <jogo@cloudscaling.com>
Date:   Mon Mar 19 18:41:15 2012 -0700

    Update 'bin/glance add' docstring *_format options
    
    fix bug 960627
    
    * 'container_format' from glance/registery/db/api.py CONTAINER_FORMATS
    * 'disk_format' from glance/registery/db/api.py DISK_FORMATS
    container_format
    
    Change-Id: I842a2c6ff96030c863ef916e74fcba8dd952ae6e

commit b0a608c09f0cd83b8ab3cccc8a3851bc3c98733c
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Tue Mar 20 09:17:52 2012 -0700

    Ensure all unauthorized reponses return 403
    
    * Clean up authorization vs authentication failures internally
    * Remove ambiguous exception.NotAuthorized in favour of exception.Forbidden for authorization failures
    * Add exception.NotAuthenticated to make authentication failures more clear
    * Fixes bug 956206
    
    Change-Id: I39ce0fcd77d4f06273040a2aa4913a9be911ceab

commit c4426e6352e0022498f80cb857b1f6b987020873
Merge: e0e7dcd a2dc56a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Mar 20 19:29:58 2012 +0000

    Merge "Avoid leaking s3 credentials into logs."

commit e0e7dcd5abcdb7bbdf5959d829e43718beab48f1
Merge: 17397a9 23c222a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Mar 20 18:53:16 2012 +0000

    Merge "Avoid glance-logcapture displaying empty logs."

commit a2dc56aaf2a43cc5e3db2ed901ccbdc5eb56857c
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Tue Mar 20 18:10:57 2012 +0000

    Avoid leaking s3 credentials into logs.
    
    Sanitize the S3 URI of access and secret key before logging.
    
    Change-Id: I12c74ddf8ab01848308c661c0fcbbb4f852a69b6

commit 23c222a70d75ea44959eaa8b3509f7bfdd5e1e22
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Tue Mar 20 17:17:00 2012 +0000

    Avoid glance-logcapture displaying empty logs.
    
    Stop polluting python26 test results with empty glance log
    captures for skipped tests.
    
    Change-Id: I7c6cfe35093c99142fc4f66aa95e1dc6cfad1b03

commit 17397a9ce70fff416acd7c9be52d94a9ed7d2330
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Tue Mar 20 08:08:59 2012 -0700

    Add 'publicize_image' policy
    
    * Allow deployers apply RBAC rules to setting the is_public image attribute to True
    * Add docs for publicize_image and manage_image_cache policies
    * Fixes bug 960261
    
    Change-Id: I100a6c93377617cc0e774b6ee3a69e857a05c260

commit 4a093a45b3846c2416bec373b6107be589fb6afc
Merge: 04937d8 c00ba7d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Mar 20 15:04:12 2012 +0000

    Merge "tox tests with run_tests.sh instead of nosetests"

commit 3f462fbf9a2b9cfe6ac39d87fe5b327ba82e9dac
Author: Unmesh Gurjar <unmesh.gurjar@vertex.co.in>
Date:   Tue Mar 20 12:07:39 2012 +0530

    Fixed db conn recovery issue. Fixes bug 954971.
    
    This implementation wraps the db method calls and retries the method if an attempt failed due to db connectivity issues. Defines 2 new configuration parameters viz sql_max_retries and sql_retry_interval (values default to 10 and 1 respectively).
    This implementation does not have any overhead in the normal case, as opposed to MySQLPingListener implementation, which does a 'select 1' query every time a connection is checkout from the pool.
    
    Change-Id: I24240f22bca445b9ab76a1594631b5eaca393b4d

commit 04937d813c1077afe050ede9fae0388c1ffedfdb
Merge: f5603c8 f6ba144
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Mar 20 00:58:53 2012 +0000

    Merge "Don't use auth url to determine service protocol"

commit c00ba7db26b618e0c1b0ffe4af9865af228a3171
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Mon Mar 19 18:26:34 2012 +0000

    tox tests with run_tests.sh instead of nosetests
    
    In order to ensure the glance-logcapture plugin is loaded dynamically,
    we configure tox to drive tests with the run_tests.sh script intead of
    calling nosetests directly.
    
    This is intended as a temporary measure, pending promotion of the
    glance-logcapture plugin to openstack-nose.
    
    Change-Id: I556c751f4c2d31c1cbacd42d835ab436fb8f6988

commit f6ba144af86f7d41f6b2c6d895b557dd407f11b5
Author: Mark Washenberger <mark.washenberger@rackspace.com>
Date:   Fri Mar 16 19:06:00 2012 -0400

    Don't use auth url to determine service protocol
    
    Change the behavior of the command line glance client so that it no
    longer assumes that the glance service always has the same protocol type
    as the authentication service. Determine protocol from the given glance
    service url. If no url is given, allow users to specify the protocol on
    the command line with the --ssl option. If --ssl is not given, default
    to using http.
    
    Change-Id: I949c2ac429c67c3d1752a7b6fc840aa9e45fca8c

commit f5603c87282c2b25be9ba5af304be777e0f53766
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Mon Mar 19 10:41:53 2012 -0700

    Use tenant/user ids rather than names
    
    * Add script that migrates image owners from user/tenant names to ids
    * Fixes bug 950364
    
    Change-Id: I157cb010ed0f8997bd2e1794e9c3b66eba75e36b

commit 265df1ebe85c9d6b133f94bcf84e1b472f080263
Merge: a5056e6 b3be2e4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Mar 19 17:56:30 2012 +0000

    Merge "Update context middleware with supported headers"

commit a5056e6265216e70af66a9cf695004737927ca81
Merge: e364fc1 094ba9d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Mar 19 17:14:57 2012 +0000

    Merge "Updating version of Keystone"

commit e364fc1eac533e8c282df14a813be26113ea8a56
Merge: c5cb723 2e94076
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Mar 19 17:02:16 2012 +0000

    Merge "Disambiguates HTTP 401 and HTTP 403 in Glance. Fixes bug 956513."

commit b3be2e48657fd3f3ab045b250b836c8e4a892418
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Mon Mar 19 08:50:24 2012 -0700

    Update context middleware with supported headers
    
    * This gets us off of deprecated headers, but doesnt get us away from using
      tenant name or user name
    * Fixes bug 957176
    
    Change-Id: I506299c392e30586759d253d4106d39917114e8a

commit c5cb723abb120cf6ea2041dffb1d6ca457e93cdb
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Mon Mar 19 11:42:57 2012 -0400

    Fixes LP #957401 - Remove stray output on stderr
    
    * Removes a stray print statement that was in the
      API functional test
    * Does a NOOP log_message method to the request
      handler used in glance.tests.functional.store_utils
      to prevent output in test runs frmo the HTTP server
    
    Change-Id: I663593d9d666d35d3c2c1655598ef68304726fd4

commit 085f567e097bcfbf6a05ac168e75b9f2d0c19507
Merge: 0e00516 1f0c4ba
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Mar 19 15:39:53 2012 +0000

    Merge "check connection in Listener. refer to Bug #943031"

commit 0e0051604eb3f8a65cbb7fda447d5266e86dadcf
Merge: a53c5c2 fdb56c8
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Mar 19 15:28:22 2012 +0000

    Merge "Avoid tests leaking empty tmp dirs."

commit a53c5c26782194738c0122dec75aac4c0a0c40bf
Merge: c5ae321 5638fab
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Mar 19 14:40:44 2012 +0000

    Merge "Do not error when service does not have 'type'."

commit c5ae3213a875cd63427b32f685472965ba464902
Merge: 8cb9275 5bd453b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Mar 19 13:17:50 2012 +0000

    Merge "Remove keystone.middleware.glance_auth_token"

commit 1f0c4ba67aced9a7ad857cddc0602b243bf38a10
Author: Peng Yong <ppyy@pubyun.com>
Date:   Mon Mar 19 00:23:03 2012 +0800

    check connection in Listener. refer to Bug #943031
    
    Change-Id: I78ec4304a4122c2854799d42737ba3b7bbb76137

commit fdb56c815c5d860236e02a7773f8a8d86b582b72
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Sun Mar 18 17:18:25 2012 +0000

    Avoid tests leaking empty tmp dirs.
    
    Stop the leakage of empty temporary dirs from TestConfigOpts,
    which is regularly causing the Jenkins build to fail.
    
    Change-Id: I0aee6bf55f49adbef948bc56d045639a75455e1a

commit 8cb92751c8686dfe0ac78b4d5156af8d2a9686ee
Merge: 9681f40 2145c24
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sun Mar 18 17:13:23 2012 +0000

    Merge "nose plugin to capture glance service logs"

commit 5bd453b14e3ea10600241e29ac09d0a35a27460b
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Fri Mar 16 15:44:09 2012 -0700

    Remove keystone.middleware.glance_auth_token
    
    * The use of this middleware is no longer necessary
    * Fixes bug 957501
    
    Change-Id: I2536babe6b34aa0cb6aca2b3e768ac85800f93e7

commit 094ba9db22bde4cd06669098313c8aaefc487aa2
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Fri Mar 16 15:27:18 2012 -0700

    Updating version of Keystone
    
    * Remove invalid Keystone + Glance functional tests
    * Fixes bug 957181
    
    Change-Id: Id6c2dfc8b80c3a8913bf054fd97831f7e58c892d

commit 9681f401307a3f625d15b61d61fd421c502bd9e5
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Thu Mar 15 11:17:31 2012 -0700

    Add policy checks for cache manage middleware
    
    * Add checks for 'manage_image_cache' policy
    * Limit 'manage_image_cache' policy to 'admin' role by default
    * Fixes bug 954608
    
    Change-Id: Ie8d79201f39db5a9d8dd0d943056e33dc8498c21

commit 2145c24edbb97d5f53ba25260f5c5a4baa1832a9
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Fri Mar 16 20:52:44 2012 +0000

    nose plugin to capture glance service logs
    
    Adding custom nose plugin to capture entire glance service logs
    for failed tests.
    
    Disabled by default, enable by setting:
    
      $ NOSE_GLANCELOGCAPTURE=true ; ./run_tests.sh
    
    Change-Id: I8a3bd9529ec6adb8b98804e0ddc266a7ea8eca08

commit e1fae1d4bb7b86a800cb4be4418a4144599f2a70
Merge: 29b035b eff04c5
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Mar 16 20:35:25 2012 +0000

    Merge "Add admin_role option"

commit 29b035bcc53a514028e60076692e31a0772b8d5c
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Thu Mar 15 21:04:56 2012 +0000

    Add new UnexpectedStatus exception.
    
    Raise UnexpectedStatus as opposed to a generic Exception when
    an unexpected HTTP status is seen by the glance client.
    
    Further fix for bug 952618
    
    Change-Id: I222c7553e1a687aec0f6dde8215e4400ea6be2cb

commit 5638fabe4b5f63bdcb68b8e8d237584b259589b8
Author: Brian Lamar <brian.lamar@rackspace.com>
Date:   Thu Mar 15 12:52:58 2012 -0400

    Do not error when service does not have 'type'.
    
    Although 'type' should be present, it would seem a NoServiceEndpoint
    exception would be more appropriate in the case of a misconfigured
    authentication service.
    
    Fixes bug 956178
    
    (Patch Set 2) Updated to add logging
    
    Change-Id: Ic8f552d8921107664cdd472f8476a9bd04322131

commit 2e94076ca43ee3f31b1fc7f46b4c137d36bcd7db
Author: Gabriel Hurley <gabriel@strikeawe.com>
Date:   Thu Mar 15 16:09:08 2012 -0700

    Disambiguates HTTP 401 and HTTP 403 in Glance. Fixes bug 956513.
    
    Change-Id: I82865293f60eabaf3bc40b40dc9c8612b12a6d1b

commit eff04c5612e613580e89349858d3e9ae4f5cc64c
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Thu Mar 15 16:36:43 2012 -0700

    Add admin_role option
    
    * Allow a deployer to define the role that should give an authenticated
      user admin privileges. Defaults to 'admin'
    * Fixes bug 956547
    
    Change-Id: I018b9c438a12c527833ed8e2e6c377a93fde9130

commit 9f2de6c1e4f0e78c35f8bbbb530b46b793acbde9
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Fri Mar 16 10:53:00 2012 -0700

    Remove references to admin_token
    
    * Fixes bug 957193
    
    Change-Id: Id9e03dd195f4d859a983703b1ed1db0700ffd29d

commit 8a533f9cfeda10bb759b0aa68757e4cea2ce4b43
Merge: d759821 d453def
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Mar 16 00:16:03 2012 +0000

    Merge "Remove glance-cache-queue-image"

commit d453def814dbfd41be8060712124b910b9484dae
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Thu Mar 15 14:25:52 2012 -0700

    Remove glance-cache-queue-image
    
    * bin/glance-cache-queue-image duplicates functionality provided by
      bin/ glance-cache-manage, and it is currently broken. Let's just remove it.
    
    Change-Id: Ib18be2116055154047df6ca9b4c335323c8b2dde

commit d759821b287398f1422af862abaf133ed23e0736
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Thu Mar 15 14:14:14 2012 -0700

    Remove dependency on apiv1app from cachemanage
    
    * Cache management middleware shouldn't depend on being deployed around
      the glance api v1 app. This breaks that dependency in favor of an
      isolated mapper in the cache management middleware.
    * Fixes bug 954596
    
    Change-Id: I3f4f56eac285163d1ce9c7dc1cef5178b16eefb6

commit e2e88d8aad7b9f7f2700bbb160058131f7e6d4ef
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Thu Mar 15 12:55:39 2012 -0700

    Return 403 when policy engine denies action
    
    * Fixes bug 956206
    
    Change-Id: I0447a1a86fed2456c912395a0ab7d6e0aba03f66

commit 3ae0ef012b6a571be14b747dd8f8e9694f145aa0
Merge: 0a19061 6619298
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Mar 15 18:50:16 2012 +0000

    Merge "Ensure copy and original image IDs differ."

commit 0a19061141de1fb70c5e3dc1a5e47f11f5b068fe
Author: Dan Prince <dprince@redhat.com>
Date:   Thu Mar 15 13:28:20 2012 -0400

    Add error checking to get_terminal_size.
    
    Adds returncode error checking to get_terminal_size so that
    it doesn't spew errors to console when running glance commands
    in a shell without a TTY.
    
    Fixes LP Bug #956202.
    
    Change-Id: I42e155d168da1f4f25c0dea9ad9768686bd654ce

commit 223ed0658a1ac45b575166ece6a2c16661e2e493
Merge: 77f0f32 c593722
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Mar 15 17:18:33 2012 +0000

    Merge "Well-formed exception types for 413 & 503."

commit 77f0f325f2abdca400f5414cecac39ec75b66171
Merge: 3a8103e 182b71e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Mar 15 16:47:40 2012 +0000

    Merge "Include babel.cfg and glance.pot in tarballs"

commit c5937221b50614b36d46e77827ab5ad1fd815bd6
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Wed Mar 14 11:24:59 2012 +0000

    Well-formed exception types for 413 & 503.
    
    Fixes bug 952618
    
    Raise well-formed exception types when 413 or 503
    status returned to client.
    
    Change-Id: I26118ff7ec7ba968b303435287d0eb3ff4bd443f

commit 6619298fc17b0cf8b9c0bd0be53162139c802eee
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Thu Mar 15 13:44:56 2012 +0000

    Ensure copy and original image IDs differ.
    
    Ensure the copy_from tests have unmarshalled a distinct ID for the
    copied image, in order to eliminate the possibility that the subsequent
    deletion of the original image impacts on the existence of the copy.
    
    Eliminates one bizarre and unlikely explanation for the test failures
    reported in bug 955527.
    
    Change-Id: If8d0720f6d08cdc57a3e01431bd3460d95a868a9

commit 182b71e9f2e2c502bd42b5c6132b93d9ce2a4f8e
Author: Thierry Carrez <thierry@openstack.org>
Date:   Thu Mar 15 14:05:01 2012 +0100

    Include babel.cfg and glance.pot in tarballs
    
    Ship babel.cfg and glance/locale/glance.pot in generated tarballs.
    Fixes bug 955977.
    
    Change-Id: Ib1b00fae9c3cc752183f38ea88554a06dd706d38

commit 3a8103e68cc27c9fc881b6fe6cd5d96d873aeb88
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Tue Mar 13 15:33:33 2012 -0700

    Updating authentication docs
    
    * Update docs to reflect correct attribute names for configs and env vars
    * Remove old env var conversion tool
    * Fixes bug 952405
    
    Change-Id: I45b2519fe97e76987a9e0acda14b303ba75afd02

commit 50e5d3544d1cadbfb1f682d3de8a37dfbc5867dc
Merge: 2eeb000 65b1b84
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Mar 15 00:52:34 2012 +0000

    Merge "Change CLIAuth arg names"

commit 2eeb0001c4b387cb69309a205ac720f5cd41cfa4
Merge: 45b453b ee2d212
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Mar 14 22:25:01 2012 +0000

    Merge "General cleanup"

commit 45b453b27695d3c10b417b02b19777fee236c2da
Merge: 66c3d31 b6b28d1
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Mar 14 22:09:13 2012 +0000

    Merge "Add note about cache config options"

commit 66c3d312199c0ee40cc4f926076a0c173bb02c50
Merge: 6be4e3f ce33576
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Mar 14 22:01:01 2012 +0000

    Merge "Update cli docs"

commit 6be4e3fdcda230fee6b0cee7b35e41ebc90584d6
Merge: 5f0d40b 691deeb
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Mar 14 21:52:48 2012 +0000

    Merge "Remove 'community' doc page"

commit 5f0d40b3afd19be5f5d4ef1ae3aaaf71f2c06e00
Merge: f1bc67c d9f4cbf
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Mar 14 21:41:59 2012 +0000

    Merge "General docs cleanup"

commit ee2d212f81a20d31ea6a815453911d01e39a1c84
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Wed Mar 14 13:29:01 2012 -0700

    General cleanup
    
    * Reorder imports
    * Remove unused code
    * Add missing copyright header in glance.api.v1.members
    * Pass in 'pool' to glance.store.scrubber.Scrubber._cleanup
    * Fix NameError in glance.api.v1.images.Controller: request -> req
    * Fix except block in glance.notifier to properly catch multiple exceptions
    
    Change-Id: I30d895b5ff1246e8d637720ef2f4aacab9cf7ede

commit d9f4cbfa7543b6deda8e0ad6aaa968ed423094ea
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Tue Mar 13 15:49:57 2012 -0700

    General docs cleanup
    
    Change-Id: If60b8f4bca81add9353fe1e0c6e26eb3d4230d53

commit f1bc67c24bb3165acaf87b7bbdc48b23a8559534
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Tue Mar 13 15:46:05 2012 -0700

    Remove todolist from docs
    
    * Fixes bug 954543
    
    Change-Id: Ib6ca8bbed18f1967108825b8b219a7d46336d11d

commit b4844500a6a722892b91539877b9ca4c1a1f6ed0
Merge: c52d73e 6e2f39d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Mar 14 18:20:18 2012 +0000

    Merge "Removing registry spec from docs"

commit c52d73e304aaca0f937f58add7bec2b24998c3ee
Merge: 55eb458 51a06aa
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Mar 14 17:49:11 2012 +0000

    Merge "Retry sendfile on EAGAIN or EBUSY"

commit b6b28d1ed45ea725f5d23c9a249a8ba32024cb4c
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Wed Mar 14 10:07:34 2012 -0700

    Add note about cache config options
    
    The image cache configuration needs to be duplicated between glance-api.conf
    and glance-cache.conf. This adds a note in the documentation to help clarify
    that fact.
    
    Change-Id: I125a56fecadc89d127570581c3ddb5d3faa3475c

commit 65b1b84decefdd0b07895d5cf38d2f26ac407972
Author: Dean Troyer <dtroyer@gmail.com>
Date:   Tue Mar 13 20:44:03 2012 -0500

    Change CLIAuth arg names
    
    Change the argument names used for common Keystone authentication per the
    updated http://wiki.openstack.org/CLIAuth:
    
    --auth_url -> --os_auth_url
    --password -> --os_password
    --username -> --os_username
    --tenant_id -> os_tenant_id
    --tenant_name -> os_tenant_name
    --auth_strategy -> --os_auth_strategy
    --region -> os_region_name
    --auth_token -> os_auth_token (--auth_token is depricated but remains for compatability)
    
    Fixes bug 954530
    
    Change-Id: Ib7ff3325e5885852aeb3fcca9c5ad665b611e020

commit 51a06aab1c153ff30d71b0ce393cc015063ba7da
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Wed Mar 14 12:31:03 2012 +0000

    Retry sendfile on EAGAIN or EBUSY
    
    Addresses bug 954430
    
    The sendfile call is redriven after a blocking select()
    to ensure the socket is now writeable.
    
    Change-Id: I68242c76593405f78e30324c2913cead63463c77

commit 55eb4580b2f1a9ddaec5193b3d2c6bd6c4bfbaa7
Author: Derek Higgins <derekh@redhat.com>
Date:   Wed Mar 14 14:53:21 2012 +0000

    Add module name to ClientException
    
    Fixes Bug #955127
    
    Change-Id: I12c1d02de2ce06b840f4a726bc528d39d39d4979

commit ce33576e832fa933bfb381b5806ea2c49026bc3c
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Tue Mar 13 18:57:41 2012 -0700

    Update cli docs
    
    * Add current examples
    * Remove happiness
    * Remove extraneous example flags
    
    Change-Id: Ia41d2b4763bba58ef60f140b24a0c925a8d68fca

commit 691deeb4a31d2dcd2156afae9c2c2076825470ce
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Tue Mar 13 18:21:58 2012 -0700

    Remove 'community' doc page
    
    This page is duplicated several times over on the wiki, let's get rid of
    it rather than worry about keeping it up to date.
    
    Change-Id: I09a9c093b708526d6c73eb270b05131bfb715af0

commit 6e2f39d69b6a4c936982a5c941b1ffa0b57e94a7
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Tue Mar 13 16:01:08 2012 -0700

    Removing registry spec from docs
    
    * Rewords how we refer to to our 'reference' implementation of the registry
      API. glance-registry is an implementation detail of the main glance API, not
      an example of a community-driven API spec
    * Remove duplicate 'gettingstarted' information
    * Fixes bug 954554
    
    Change-Id: I889f61a399c398897f2146b756b2c3c310847718

commit 1615a1fc57da85caae147064c45967d90a9b73f6
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Tue Mar 13 15:21:40 2012 -0400

    Fixes LP#934492 - Allow Null Name
    
    * Modify bin/glance to allow nullable name property,
      in accordance with API spec
    
    This changeset also adds a fix for Swift functional
    tests where HTTPS locations weren't being properly
    constructed.
    
    Change-Id: Ibad2d3ab150ee347449b4e9b3b9e941ce7a0fc6f

commit 101e3ef9f9c7cc1ccb5f9dfb8827be809b77ef99
Merge: 0ccd9f4 7125728
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Mar 12 18:52:06 2012 +0000

    Merge "Refresh SSL cfg after parsing service catalog entry"

commit 7125728d51adf0ded308f622913660f2d2ce2697
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Mon Mar 12 17:58:15 2012 +0000

    Refresh SSL cfg after parsing service catalog entry
    
    Fixes bug 949838
    
    Ensure connection kwargs are re-evaluated after the keystone service
    catalog publicURL for glance has been parsed for potential SSL usage.
    
    Otherwise the attempt to create a HTTPS connection will fail with
    missing __init__() args if the client is using auth-free SSL
    (i.e. is neither validating the server's cert, not authenticating
    itself to the server).
    
    Change-Id: I31c2083616297a64541cc6648d420e724baaf9f4

commit 0ccd9f46fe5946249132e8dccd713af37cd12fa7
Merge: 4d41027 95efaf0
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Mar 10 00:33:04 2012 +0000

    Merge "Fix typo in tox.ini."

commit 95efaf0a67951bcbcabf008315ad3e6bda4fd1bd
Author: James E. Blair <jeblair@hp.com>
Date:   Fri Mar 9 23:55:42 2012 +0000

    Fix typo in tox.ini.
    
    My last commit message was right, the code was wrong.  It's tox:jenkins.
    Commands are invalid in tox: sections, so we'll get pip freeze run
    another way.
    
    Change-Id: Iafa21ff47cf5e3d8f57676be93e2fa6a0d0ab9b4

commit 4d41027d219429b44b1036c85b3fb4a09e530121
Author: Dan Prince <dprince@redhat.com>
Date:   Fri Mar 9 02:12:35 2012 -0500

    Glance cache updates to support Keystone Essex.
    
    Glance caching updates to support keystone service tenants:
    
     * Update glance-cache-manage so that it supports the same style OS_
      environment variables and CLI options for auth that bin/glance does.
    
     * Updates registry/client so that it supports Keystone KSL style
      service tenants. As services no longer use admin_tokens this is
      a requirement to be able to use caching w/ KSL.
    
    Fixes LP Bug #949486.
    
    Change-Id: I8d0e56a9ec0d20ef56ed2ce8b860d987ae159e01

commit b43b676e581efd0773a7f83715dcf2e834bd9c85
Author: Ken Pepple <ken.pepple@rabbityard.com>
Date:   Mon Feb 27 18:59:31 2012 -0800

    updates man page for glance-scrubber.
    this time with extra pep8 scrubbing powers.
    Fixes bug 908803
    
    Change-Id: I105cc3157fe839cc35ef5e1fc1a5f032b04d1c9d

commit c13dbdcf5a1a1aa72e7a4d34ab5f3f1fadf04858
Merge: 7041f19 4ef665a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Mar 9 16:06:58 2012 +0000

    Merge "Glance skip prompting if stdin isn't a tty"

commit 7041f19696e75c38c27e8dacaa7bbc8d56144af8
Merge: d6ba3b2 80cd81f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Mar 9 15:58:47 2012 +0000

    Merge "Replaced use of webob.Request.str_param"

commit d6ba3b23fffe85892a45c7785d644eb970bebc2d
Merge: 30dc759 630c9a5
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Mar 9 15:50:13 2012 +0000

    Merge "Fix deprecated warnings."

commit 30dc759f02a5d3332e6e93f4d5b06ccc5fe4b574
Merge: 21ab1a5 2773170
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Mar 9 15:42:02 2012 +0000

    Merge "Update paste file to use service tenant."

commit 21ab1a57ce9e3fb167b68bb421d65557ffbdd5d9
Merge: cb70ff9 9e640d0
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Mar 9 05:59:14 2012 +0000

    Merge "Update bin/glance to allow for specifying image id"

commit cb70ff9f5103b3e42c83cef6f95db99cf2bdfd36
Author: James E. Blair <jeblair@hp.com>
Date:   Fri Mar 9 02:06:05 2012 +0000

    Update tox.ini for jenkins.
    
    The tox documentation is wrong, it looks for [tox:jenkins] instead
    of [tox:hudson].  Also, run "pip freeze" before running tests from
    within the virtualenv so we have a record of all versions used
    in each test run in Jenkins.
    
    Change-Id: Id0f34247f4545268f21dacb860d2e0fe72677a11

commit 80cd81f714ab6da60130f450f5c96ad279649871
Author: Maru Newby <mnewby@internap.com>
Date:   Wed Mar 7 21:55:56 2012 -0800

    Replaced use of webob.Request.str_param
    
     * Changed webob.Request.str_param => webob.Request.param to
       ensure compatibility with WebOb >= 1.2.
     * Fixes bug 949677
    
    Change-Id: I59c5af17fdef0754862ef6a0fda99978036112d9

commit 2773170d737a2acbe2b132d8568c0b1507d428e5
Author: Dan Prince <dprince@redhat.com>
Date:   Wed Mar 7 18:17:34 2012 -0500

    Update paste file to use service tenant.
    
    Update the keystone section of api-paste.ini with example settings
    for the keystone service tenant.
    
    Remove the admin_token example lines.
    
    Change-Id: I6169ae727a07e75879b5e2e5c4099c9688c726c6

commit 9e640d01498c03e97ba808fbec9477f3e12f8595
Author: Brian Lamar <brian.lamar@rackspace.com>
Date:   Fri Mar 2 16:49:38 2012 -0500

    Update bin/glance to allow for specifying image id
    
    Fixes bug 945173
    
    Change-Id: Ic33db6ab846064b142cdb8e79a4fb7a0cb52b0c4

commit 630c9a594a97b3516476e3e04d516f08ec725f1f
Author: Chuck Short <chuck.short@canonical.com>
Date:   Wed Mar 7 10:44:31 2012 -0500

    Fix deprecated warnings.
    
    Fixes deprecated warnings when using sqlalchemy 0.7.4.
    Fixes bug 925609.
    
    Change-Id: I5ad5042dbc9785829694553f2657df3eb6e3ef20
    Signed-off-by: Chuck Short <chuck.short@canonical.com>

commit 3b229c394521e5b1b81e4629c6ff9c09e3b866c9
Merge: 91f88a0 bbf46b4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Mar 6 04:42:43 2012 +0000

    Merge "Remove trailing whitespaces in regular file"

commit 91f88a01202a4e7e93d7729544390743c4db2885
Merge: c6a626e d8f0c38
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Mar 6 04:34:53 2012 +0000

    Merge "Added first step of babel-based translations."

commit bbf46b45cd4c0beafed4dd83008db310fb79ec2e
Author: Hengqing Hu <hudayou@hotmail.com>
Date:   Sat Mar 3 12:09:51 2012 +0800

    Remove trailing whitespaces in regular file
    
    Change-Id: I0d015501492902ddf7fda20e0381fc21fbcaeb91

commit c6a626e24321ba47ea075132deae3f948faa2e51
Author: Jesse Andrews <anotherjesse@gmail.com>
Date:   Fri Mar 2 16:03:13 2012 -0800

    add git commit date / sha1 to sphinx html docs
    
    Change-Id: I9f92a459fbf83bb42ff2fa31c2fb9c09372c8138

commit 4ef665a7cc1af14814f9cade3768b64447a6542f
Author: Ken Thomas <krt@yahoo-inc.com>
Date:   Thu Mar 1 13:09:23 2012 -0800

    Glance skip prompting if stdin isn't a tty
    
    Don't have glance issue prompts if stdin isn't a tty.  Fixes bug 884116.
    
    In glance's user_confirm routine, check if stdin is a tty and if
    not, just return the default value. If it is a tty, then continue
    with the raw_input call to issue the prompt and get the response.
    Latest patch includes recommended change to check for isatty attr before
    using it.
    
    Added myself to Authors.
    
    Change-Id: I8134668b8382b44618c86972190f3d7d98f55e52

commit 8d46288e9cfb10745adfb06a510ed93433a7a9c5
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Tue Feb 21 15:07:51 2012 +0000

    Allow region selection when using V2 keystone
    
    Fix for bug 936798. Allow a client to select which
    region endpoint they want from the service catalogue.
    
    The region can be set via the environment variable
    OS_REGION_NAME or via the '-R/--region' command line
    option.
    
    If a single image endpoint is returned from keystone,
    the client will use that even if no region was specified
    (the default). Where multiple endpoints exist a region
    must be provided.
    
    Change-Id: I6797f8ddf88d5875caf194913082c3fe24c86585

commit 1229d8df69b5823c1291e2862e1ecfaa79b4135a
Merge: e653a00 95dc869
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Feb 29 17:44:52 2012 +0000

    Merge "Fix update of queued image with location set."

commit e653a0032d21729ebd4ec4edd0045cad0f0ab430
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Mon Feb 27 22:57:12 2012 +0000

    Disallow file:// sources on location or copy-from.
    
    Fixes bug #942118
    
    For security reasons, file:// URIs local to the glance services
    should not be supported as external sources (as specified via the
    x-image-meta-location or x-glance-api-copy-from headers).
    
    Change-Id: I43763cbefba95153434c7dcdcce3765ed04e05fe

commit 63f3af7c46296792f3ef06cbec7c1965d7087b6a
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Tue Feb 28 11:08:21 2012 +0000

    Progress bar causes intermittent test failures
    
    I'm seeing intermittent failures on:
    
      glance.tests.functional.test_misc:TestMiscellaneous
        test_api_treats_size_as_a_normal_property
    
    with a 'glance show' command failing with:
    
      STDERR: /bin/sh: line 1: $'\b\b\b\b\b\b[100%]': command not found
    
    apparently due to leakage of the progress bar output associated
    with the previously executed 'glance add' command.
    
    For the same reason, I see failures on:
    
      glance.tests.functional.test_bin_glance:TestBinGlance
        test_show_image_format
    
    Work-around by enabling silent-upload so that test are reliably green.
    
    Change-Id: Ib23e0a1f042d8e7950bddc485696a69338cf8620

commit d8f0c382ef1445ba8394c78ff7b50832451b9c8b
Author: Monty Taylor <mordred@inaugust.com>
Date:   Mon Feb 20 11:46:46 2012 -0800

    Added first step of babel-based translations.
    
    Change-Id: I34e3f49e96cf6e68306770781e8114e56a6b3556

commit b563deb7970f7611e10007a959851d538dfcbb0a
Merge: 45d0d3d 2090314
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Feb 27 23:31:10 2012 +0000

    Merge "Add checksum to an external image during add."

commit 45d0d3d0b96ff5238cb09cde40c12a5ea643b169
Merge: 0613daa 7db2075
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Feb 27 22:48:15 2012 +0000

    Merge "Complete fix for modification of unowned image"

commit 7db20754a0c9d853ff0a5e283dd7d483ab0c2755
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Mon Feb 27 12:59:52 2012 -0800

    Complete fix for modification of unowned image
    
    * Fully fixes bug 923941
    
    Change-Id: Ia155a4d76e75498629996aaddfc8fe0b41ce6760

commit 95dc869e3c36daaaee8da81f5d1701c938d1f8af
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Fri Feb 24 09:50:17 2012 +0000

    Fix update of queued image with location set.
    
    Fixes lp 939484
    
    When a queued image is updated with the x-image-meta-location header,
    the image size is retrieved from the external store if available and
    the metadata set appropriately.
    
    More importantly, the image is also activated at this point, otherwise
    it remains perpetually queued and cannot be retrieved via GET.
    
    Change-Id: Iae8b06479dcaa5e47785f646b1ebec202fe75371

commit 0613daa931d897fd3a91feef5e9747cdf60ebfe2
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Thu Feb 23 13:25:12 2012 +0000

    Support copy-from for queued images.
    
    Fixes lp 939481
    
    An image may be added referencing an external source via either
    the x-image-meta-location or x-glance-api-copy-from headers.
    
    Similarly, a queued image may be associated with an external source
    via the x-image-meta-location header.
    
    However previously a queued image could not have image content copied
    from an external source via the x-glance-api-copy-from header.
    
    This patch addresses this asymmetry in respect of POST versus PUT.
    
    Change-Id: I81848ba3a5d41e7e5b69daec491e83307023f020

commit 20903144e307784d382b6dac5591cddec19fcaa4
Author: Brian Lamar <brian.lamar@rackspace.com>
Date:   Wed Feb 22 17:02:07 2012 -0500

    Add checksum to an external image during add.
    
    If 'location=' is set during 'glance add' look for the checksum
    parameter and use that for the checksum. Currently it looks like there
    is no other way to update the checksum and it is being entered as NULL.
    
    (Patch Set 2) Added tests
    
    Change-Id: I1521d1c4a12e43d38c3e13c0735526f4f7789952

commit d26f66bce505cf6f5080e7b3aeaef914da110fe1
Author: Monty Taylor <mordred@inaugust.com>
Date:   Sat Feb 25 17:24:39 2012 -0800

    Align to jenkins tox patterns.
    
    Split requires in to pip-requires and test-requires.
    Updated install_venv to know about test-requires.
    
    Change-Id: I739f42c8676c40e2203cc0bc4aa9763ffac999a9

commit 9593687d3d1959c8342b60e9b620879899628c2f
Author: Thierry Carrez <thierry@openstack.org>
Date:   Fri Feb 24 16:00:39 2012 +0100

    Fix MANIFEST.in to include missing files
    
    Fix MANIFEST.in to include missing files in generated tarballs.
    Fixes bug 940364.
    
    Change-Id: I3f07dba902e5e038d2224d0acdbd14f2b1078467

commit f6e91994f92a9ba6fe5ea6cb61a7b1f15d3b392f
Author: Derek Higgins <derekh@redhat.com>
Date:   Thu Feb 23 15:46:01 2012 +0000

    Fix exception name
    
    Fixes bug 939616
    
    DataInvalid thrown by get_terminal_size is not a defined exception name
    Also added details to Authors
    
    Change-Id: Ia321d62d15b074aca69a5d0e5646966d7e297023

commit 44461b41f42d8eb23cc780c395b3c0fc5f6813c9
Merge: d998278 c83bce1
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Feb 22 19:02:02 2012 +0000

    Merge "Support new image copied from external storage."

commit d998278162c90374229bd482eed0b0f00221662f
Merge: 76fec14 c0bce06
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Feb 22 18:51:52 2012 +0000

    Merge "Correct kernel/ramdisk example in docs"

commit 76fec1476ba6f9c0e7d44a5859e2fd5f1ba68ef1
Merge: 8efa62d d5539b2
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Feb 22 18:35:06 2012 +0000

    Merge "blueprint progressbar-upload-image"

commit c0bce060b89e50c135e1e0f888daf9c166e57e2c
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Wed Feb 22 02:30:15 2012 -0800

    Correct kernel/ramdisk example in docs
    
    * Fixes bug 937260
    
    Change-Id: I43ea7d5c1434cc9e1454f6915e2b76586383bb89

commit 8efa62d85b738a568b58c264e822414ccea8346e
Author: Justin Santa Barbara <justin@fathomdb.com>
Date:   Wed Feb 15 09:42:09 2012 -0800

    Create sorting/pagination helper function
    
    Change-Id: I5e9f3ba8298e50345ab4983db96a3f0ce90cab80

commit c83bce1ce69bf704fbbe6ce944094c14e79996d2
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Thu Feb 9 14:23:32 2012 +0000

    Support new image copied from external storage.
    
    Implements bp retrieve-image-from
    
    Added support for a new header:
    
      x-glance-api-copy-from: URI
    
    where URI is a HTTP, S3, or Swift location that's accessible to the
    glance API service. Where present, the image content is copied from
    the external store to the backend store currently configured for
    the glance API service.
    
    Impedence between the representation returned by Store.get() and
    the implicit requirements of Store.add() required careful iterator/
    filelike wrapping.
    
    Also rationalized the S3 and Swift functional test setup logic and
    added a new decorator-based mechanism to allow a functional testcase
    require multiple backend stores to be available and configured.
    
    Change-Id: If783a09c273832b8926aabc60b7eba8b3ab956d6

commit d5539b2ade1477c0e183c874be5818ad173307a8
Author: Reynolds Chin <benzwt@gmail.com>
Date:   Thu Feb 2 14:26:43 2012 +0800

    blueprint progressbar-upload-image
    
    The goal of this blueprint is to make cli more informative.
    Adds optional animated progressbar upload to the Glance CLI tool.
    This animation is spawned by a separated thread and the following information will be shown:
    
    1. running progressbar
    2. percentage of data has been transferred
    3. bandwidth
    4. ETA for transfer completion
    5. status such as uploading or stalled
    
    The animation can be disabled by adding the flag --silent-upload to the command "glance add"
    
    Change-Id: If954268c6d7b52c975f6c358134be4f587541aa8

commit f380c9e5745ff802ea8ec4fac8346c6e4d6b5261
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Wed Feb 22 15:28:20 2012 +0000

    Avoid TestClient error on missing '__mro__' attr
    
    The TestClient unit test fails with:
    
       AttributeError: class Zeros has no attribute '__mro__'
    
    on Python 2.6 running on Ubuntu Lucid.
    
    Resolve by defining Zeros as a new-style class.
    
    Change-Id: I97f8eaac31d34a68613e9b30a177191a9de281b0

commit 5f3137133054284ced41d3e6702e1dad4591c9c7
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Mon Feb 20 21:49:17 2012 +0000

    disk/container_format required on image activate
    
    Fixes lp 937216
    
    The initial change[1] to require the container and disk formats be
    explicitly set was enforced on the initial image POST, regardless
    of whether the image content accompanied that request (either in
    as the entity-body, or externally specified via x-image-meta-location).
    
    This turned out to be overly restrictive, as these formats may not
    be known to the caller until the image content is supplied via a
    subsequent PUT on the new image.
    
    Now we only enforce the strict requirement for these formats to be
    non-empty when the image is activated (as opposed to the initial
    enqueue).
    
    [1] https://github.com/openstack/glance/commit/62c913c3
    
    Change-Id: I89e068f35fd7da427b547b18cdea4ae84ab3ec87

commit 62c913c3ad4db1a03461f51304fac885196df8ca
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Fri Feb 17 13:46:49 2012 +0000

    Require container & disk formats on image create
    
    Fixes lp 933702
    
    For images created via the glance CLI, the container and disk formats
    were previously defaulted if not explicitly set. However if created via
    the python or REST APIs, these attributes were not defaulted if unset.
    
    There is no real sensible default for these formats, so now an image
    create fails with 400 "Bad Request" if the format metadata are missing.
    
    Also we ensure unset image metadata are not reported in x-image-meta-*
    headers in order to disambiguate None and empty string values.
    
    Change-Id: I8189383f5f9adf42a8cdac7f8dc7e9327baf46da

commit f8f9f17112671872262fcde9671ce392cf1af35c
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Wed Feb 15 16:04:07 2012 +0000

    Support non-UTC timestamps in changes-since filter
    
    Fixes glance aspect of lp 837464
    
    Prevously only Zulu time was supported in the changes-since filter,
    i.e. timestamps formatted as %Y-%m-%dT%H:%M:%SZ
    
    We now support arbitrary timezones, with the offset from UTC expressed
    via the ISO 8601 hh:mm notation.
    
    Microsecond accurracy is also optionally supported in timestamps.
    
    Notes:
    
    - glance.common.utils.parse_isotime(), isotime(), & normalize_time()
      are prime candidates for promotion to openstack-common, as these
      methods will be useful in nova also
    
    - this patch introduces a new dependency on python-iso8601, which
      has already been packaged for Fedora, EPEL and Ubuntu/Debian.
    
    Change-Id: I4c80522bcaa14feef93f5f9fbcaaca6a74b6a5f4

commit 45f9e05572303b5bd8ea8ee3f179bb2269bb091c
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Thu Feb 16 20:24:39 2012 +0000

    Return 503 if insufficient permission on filestore
    
    Fixes lp 919257
    
    Return 503 "Service Unavailable" status from POST /images request
    where there's insufficient permission to write image content to
    the backend filestore.
    
    Change-Id: I0c4e8bb1e70d6542852a86903a4a2a200dd23f01

commit 3b8ff189a16eb6f5f8c36ac49bc1f97cf645e8c4
Author: Dan Prince <dprince@redhat.com>
Date:   Fri Feb 17 11:51:42 2012 -0500

    Adds README.rst to the tarball.
    
    Fixes LP Bug #934320.
    
    Change-Id: Ib16ad8d5d1c418c2b3fd94b6bd427d53d30577ad

commit 1d2356c8642f61bfa05226110a18cafcef55c6f0
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Thu Feb 16 18:26:38 2012 +0000

    Ensure StorageFull only raised on space starvation
    
    Additional fix for lp 919255
    
    Limit StorageFull to cases of genuine disk space starvation (ENOSPC or
    EFBIG), in order to avoid confusion with 413 "Request entity too large"
    status being returned from POST /images for issues unrelated to space.
    
    Change-Id: Ib5e68e5d988d0f541803ffb3f37ddf88ac24e9dc

commit 941e160dc24096fd79a7f8dc4b6e2cd11c7c1e1a
Merge: b2eb008 3af64e5
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Feb 16 15:09:33 2012 +0000

    Merge "Require auth URL if keystone strategy is enabled."

commit 3af64e56d23d3adddc1ded2e2c00e995d30444a8
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Tue Feb 14 11:08:01 2012 +0000

    Require auth URL if keystone strategy is enabled.
    
    Fixes bug 925681
    
    The glance CLI now fails fast if the keystone authentication strategy
    is enabled, but the --auth_url option or OS_AUTH_URL environment variable
    is not set.
    
    Change-Id: I73bfd4f19a3d882ad53d3d2c914ce11e48ce291d

commit b2eb008a7958d931c99af1b2b7f6c9369aeffc66
Merge: b90575d 59ca8b0
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Feb 15 20:25:55 2012 +0000

    Merge "Function uses 'msg' not 'message'"

commit b90575d8e9b8001b1dc7ae5cfb4cc77e74151b69
Author: Adam Gandelman <adamg@canonical.com>
Date:   Tue Feb 14 17:01:59 2012 -0800

    003_add_disk_format.py: Avoid deadlock in upgrade
    
    The connection used to query existing images needs to be closed
    earlier to avoid deadlocking later calls thru sqlalchemy.
    
    Fixes bug 932466
    
    Update: Update my email in Authors
    
    Update: Revert Authors email to original, add git commit email
            to .mailamp.
    
    Change-Id: Ic248fdfe3933437928f0b393d8cde993b96bf2cb

commit 59ca8b0b44bbb2276d7e5903bfe9d14a6a26d901
Author: Johannes Erdfelt <johannes.erdfelt@rackspace.com>
Date:   Wed Feb 15 18:58:45 2012 +0000

    Function uses 'msg' not 'message'
    
    Fixes bug 932986
    
    Change-Id: Iafc70145b7bc9d71fef19db0f303a65468b934cb

commit bd4d6328617641642c1152a3defe7330fb8fb86c
Merge: 7990cb4 0f0fe2b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Feb 15 13:44:47 2012 +0000

    Merge "New -k/--insecure command line option"

commit 7990cb4e0c0528f6d4694fa0faf81597ea56d6ba
Author: Justin Santa Barbara <justin@fathomdb.com>
Date:   Mon Feb 13 13:27:44 2012 -0800

    Fix paging ties
    
    Bug #930543
    Bug #930544
    
    Change-Id: Ifad1ea61f3ecbf58af9bc7f0bc635e69246f6ece

commit 0be0aa80db486e6538d8d83cb49b5a19039a9a3c
Merge: 40b5ed7 f0832fd
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Feb 14 22:19:09 2012 +0000

    Merge "Add a generic tox build environment."

commit 40b5ed733efd005e4a9ebbe0a0f7e6f844f9d043
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Tue Feb 14 17:22:17 2012 +0000

    Ensure sane chunk size when pysendfile unavailable.
    
    Fixes lp 932183
    
    Previously, small and erratically-sized HTTP chunks were sent
    when pysendfile was unsupported on a particulat platform.
    
    Now, non-terminal chunks will be of size 64k as long data is
    available.
    
    Change-Id: Ic26e4d701ad22a21f06d7142f6ce91583acb5816

commit 0f0fe2ba1b772e6964241c0631683b306fff23c0
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Thu Feb 9 18:10:42 2012 +0000

    New -k/--insecure command line option
    
    Fix for bug 929591.
    
    Change glance to require server certificate validation
    by default when using https. The standard system
    CA file will be used if available (and an alternative was not
    provided).
    
    The --insecure option can be used by clients to skip server
    certificate validation if appropriate.
    
    * This change will impact Nova clients accessing glance over https.
      If the standard CA file is not suitable they will need to provide
      a CA file or else create an 'insecure' glance client.
    * Accesses to a https registry server must now perform server
      certificate validation.
    * If the package which provides the standard
      system CA file is installed then that file will be used by default.
      It probably makes sense for the glance package to have a
      dependency on whichever package provides the default CA bundle.
      (In Ubuntu this is 'ca-certificates')
    
    Change-Id: I7c83361ba0881559ec77d4baf10dfeb5b8e32185

commit f0832fdd886d4173908b7d4da574f47952d28a33
Author: Monty Taylor <mordred@inaugust.com>
Date:   Fri Feb 10 23:38:27 2012 -0800

    Add a generic tox build environment.
    
    Allow for the running of arbitrary commands inside of a venv
    so that we don't have to make tox envs for every blessed thing we want to
    do.
    
    Change-Id: Ia6f9e3cbeaef27ffe1e60b424c2a2d384e6bad0b

commit 56efd271ac08b4c0e0ce273b9cbc0c5952af05fa
Author: Hengqing Hu <hudayou@hotmail.com>
Date:   Sat Feb 11 12:43:25 2012 +0800

    Fix pep8 error
    
    Fixes bug #930536
    
    Change-Id: I17afbd17e5df3ac44e59b8b8d194d48da508e5d2

commit ce2a79c0347308349617c7ac4d93fa14f08c14b7
Merge: c77f4dd 2fa1ed0
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Feb 10 22:52:05 2012 +0000

    Merge "Implement blueprint add-qpid-support."

commit c77f4dded47708e14a145ccc42f40a5cd061217b
Author: Mark Washenberger <mark.washenberger@rackspace.com>
Date:   Fri Feb 10 16:35:35 2012 -0500

    Update Authors file
    
    Change-Id: I0a49cfb901c2b4733b27b663c2116182f651fdef

commit 2fa1ed0da18cd92c29afcebaa34b15ecbe58bfd2
Author: Russell Bryant <rbryant@redhat.com>
Date:   Wed Feb 8 12:24:07 2012 -0500

    Implement blueprint add-qpid-support.
    
    This patch implements a new notification strategy that sends
    notifications to a message queue via Qpid.
    
    Change-Id: Ie2640139dcf735e428af63e9e87b3667a2b22eb5

commit c125a3744f1dd25a6facd1c6daf8fa4fde9b784a
Merge: 0da9d82 e7b32c1
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Feb 10 19:51:55 2012 +0000

    Merge "Include glance/tests/etc"

commit 0da9d829d2aadbe87017d6d013ba8ca44cc46858
Merge: 481929b 9c2c97f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Feb 10 19:45:49 2012 +0000

    Merge "Force auth_strategy=keystone if --auth_url or OS_AUTH_URL is set"

commit e7b32c13f83f6018ae470722657a08a3c7af5af8
Author: Chuck Short <chuck.short@canonical.com>
Date:   Thu Feb 9 13:41:51 2012 -0500

    Include glance/tests/etc
    
    Fixes bug 930344
    
    Change-Id: I277185a8b62d982dad597a3ac878608ce5e0de5c
    Signed-off-by: Chuck Short <chuck.short@canonical.com>

commit 481929b5c5dbca90762fe339e9e3224f7628ce2a
Author: Mark Washenberger <mark.washenberger@rackspace.com>
Date:   Thu Feb 9 12:59:49 2012 -0500

    Don't fail response if caching failed
    
    Fixes bug 929762
    
    Change-Id: I90761b69cc556b14fd4bdb931541804244b653e8

commit 9c2c97f3602204890ed3c911e5bde94eea3357d0
Author: Dean Troyer <dtroyer@gmail.com>
Date:   Wed Feb 8 15:21:04 2012 -0600

    Force auth_strategy=keystone if --auth_url or OS_AUTH_URL is set
    
    Change-Id: I316f501ffbad1f182a7c1f6a18641c608c0f2ea8

commit e4db87ce4c2757b734b5fc62a82e1076c3367af0
Author: Andrew Hutchings <andrew@linuxjedi.co.uk>
Date:   Mon Feb 6 18:35:49 2012 +0000

    Make Glance work with SQLAlchemy 0.7
    
    Fix execption caught during tests
    Fix test failure wiping out engine in use
    
    Fixes bug 892754
    
    Change-Id: I9de6f077af656730c95bc715c2b765b0c49c7d3c

commit 24c14d5a1c2cadc69aca8d66f00dade3f2c266bd
Merge: 7696ae5 8043962
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Feb 8 18:39:07 2012 +0000

    Merge "Respawn glance services on unexpected death."

commit 7696ae5f2402314b56d8e03dcbad97d9b2b529af
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Tue Feb 7 08:56:50 2012 +0000

    Use sendfile() for zero-copy of uploaded images.
    
    Implements bp support-sendfile
    
    Avoid needless client-side copying through userspace of uploaded
    image file content, using pysendfile to wrap the sendfile() system
    call instead of reading the file one chunk at a time.
    
    The existing iterator pattern is maintained for consistency and
    to allow send progress to be followed by wrapping the iteration.
    
    The performance gain only applies to the client-->glance API service
    leg, so whether the overall speed-up is noticeable depends on the
    image store in use. For example, it would be imperceptible with a
    storage backend showing relatively high PUT latency, such as S3,
    as the blocking Store.add() call would dominate.
    
    At the other extreme, uploading large images via the loopback to
    file-based store is about 60% faster. Detailed performance figures
    for more realistic scenarios to follow when hardware is available
    for benchmarking.
    
    Change-Id: Ia8c74e76d3d6c63e9a9b38ab455a4e6edb47fba9

commit ce35911f6f69f7d6af292cb3474d8e6b083c33af
Merge: eea25b4 8df4d1d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Feb 8 09:58:31 2012 +0000

    Merge "Blueprint cli-auth: common cli args"

commit 804396204e23ebb6c29c396396027bc3b09b0eab
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Mon Jan 30 11:13:28 2012 +0000

    Respawn glance services on unexpected death.
    
    Fixes bug 923894
    
    Add new '--respawn' option to cause glance services launched via
    glance-control to be monitored for unexpected death and resuscitated
    as necessary.
    
    This option will cause glance-control itself to remain running.
    
    Deliberately stopped services are not respawned, neither are rapidly
    bouncing services (where process death occurred within one second
    of the last launch).
    
    Change-Id: I1a9a99cce9b6ad43274836e39ebe4f29c19455af

commit 8df4d1df107b76cfa5fd60f7913291fd9c192190
Author: Dean Troyer <dtroyer@gmail.com>
Date:   Mon Feb 6 14:40:59 2012 -0600

    Blueprint cli-auth: common cli args
    
    Add OS_USERNAME, OS_PASSWORD, OS_TENANT_NAME and OS_TOKEN support
    to glance client binary.
    
    Fixes lp923936
    
    Change-Id: I9339b169eadbe198e6ed183cf1aeb42b99f3a7d9

commit eea25b41499baa62ce73967865c20d2856503bd2
Author: Monty Taylor <mordred@inaugust.com>
Date:   Mon Feb 6 13:15:38 2012 +0000

    Prep tox config for jenkins builds.
    
    Change-Id: Id81588d3a2aabc0931d5bf12f078d8f770305e69

commit c6c458e6b6cd39b94f89c112c477cee9da8f7f45
Author: Thierry Carrez <thierry@openstack.org>
Date:   Fri Feb 3 16:54:30 2012 +0100

    Get rid of DeprecationWarning during db migration
    
    Use proper syntax to set column type, which avoids printing
    silly warnings and future deprecation issues.
    Fixes bug 854163.
    
    Change-Id: Iab1c3e7a52d739a445cf52eb9a67f61a69075026

commit 300d4031a94b85539a30bde726131231008c80a6
Merge: bad4666 76b894b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Feb 2 23:48:51 2012 +0000

    Merge "Don't force client to supply SSL cert/key"

commit bad46661a2b65f67eae597afdc97b50af5fc5717
Merge: f7434b6 132c54f
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Feb 2 23:17:51 2012 +0000

    Merge "Add --capture-output option to glance-control."

commit 132c54f1739cbb201578a875b780f78c4d6b77a2
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Thu Jan 26 14:49:20 2012 +0000

    Add --capture-output option to glance-control.
    
    Fixes bug 923894
    
    Previously all stdout/err from glance services was discarded
    if launched via glance-control.
    
    The --capture-output option allows such output to be instead
    captured in the syslog.
    
    Non-termination output should be flushed to ensure timely
    arrival in /var/log/messages.
    
    Change-Id: I5c11ad4b9f7f321a3d1cab71e34c2a6707ef1b5e

commit f7434b61323032d34e7a035aa3dace31deab6df4
Merge: b5a434b 81ce7b4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Feb 2 22:12:21 2012 +0000

    Merge "Handle access restriction to public unowned image"

commit b5a434bcca3dc33c1fe23ab0b0c528941a2f90cf
Merge: 3092156 fdb7b21
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Feb 2 21:58:18 2012 +0000

    Merge "Fixes LP 922723"

commit 3092156ae53c3d80644e7c7afca0abbfc5d0e377
Author: Christopher MacGown <chris@pistoncloud.com>
Date:   Thu Feb 2 12:10:18 2012 -0800

    Add filter validation to glance API
    
    Fixes lp: #919250
    
    Change-Id: Ib47d9d107950f14404734b55486996dc0b095f0e

commit fdb7b21235669599b0d1f3d8b509a220cb7f16c5
Author: Wayne A. Walls <wayne.walls@rackspace.com>
Date:   Thu Feb 2 20:56:50 2012 +0000

    Fixes LP 922723
    
    Versions pycrypto in pip-requires
    
    Change-Id: Id053d8ed0bd4b8c5ae45c2d4727708ed790dbefe

commit 7c2e32511aafa7b0e50b0c9ba6fd942caec93860
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Feb 2 19:25:42 2012 +0000

    Typofix is_publi -> is_public
    
    Change-Id: I58d6de4387c7915acf1fc139ef9a0ad81bf64a91

commit dfe823a02c0a1f384ff0ad26fa3ea82b201ab6ac
Merge: c77776a 593e8c2
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Feb 2 18:42:00 2012 +0000

    Merge "Add --await-child option to glance-control."

commit 593e8c2fa745de2926c957ebacbefd55fa40071d
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Thu Feb 2 15:37:13 2012 +0000

    Add --await-child option to glance-control.
    
    Fixes bug 817032
    
    Previously an immediate non-zero exit status from service
    launch was not reflected in the exit status returned from
    glance-control.
    
    Now the parent glance-control process configurably waits for
    the child to exit ungracefully and if this occurs, it inherits
    the non-zero status code from the child.
    
    Change-Id: Ibbe92a5bf40d095951a572d78ae07026d8a9313d

commit c77776a9c9e6883b34f11204044a60564b506183
Author: Pavan Kumar Sunkara <pavan.sss1991@gmail.com>
Date:   Sun Jan 29 11:38:56 2012 +0530

    Fix Bug #919255
    
    Glance Add Image API returns 400 response for disk full scenario
    
    Change-Id: Ia275cfd423bb823583998167516878ced370547b
    Signed-off-by: Pavan Kumar Sunkara <pavan.sss1991@gmail.com>

commit 16b682d273dce16dc79bdb7f2532e0465cb61719
Author: Brian Lamar <brian.lamar@rackspace.com>
Date:   Wed Feb 1 11:24:15 2012 -0500

    Cap boto version at 2.1.1
    
    boto 2.2.x is not building and should be capped so it does not
    break the build process.
    
    Change-Id: I6a49e44458fb691fb3b60afc6871cf74031d3f40

commit 28f0dd425f151695420a3dee54362576c9d5ea3d
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Mon Jan 30 20:39:20 2012 -0800

    Simplify pep8 output to one line per violation
    
    Change-Id: Ia1df3d1fbdd21b1b8884848d27c3a2a567b51943

commit 81ce7b44be653599ab8917712f44f94f052ebb94
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Mon Jan 30 13:23:35 2012 -0800

    Handle access restriction to public unowned image
    
    Fixes bug 923941. Now we can return a 403 rather than a 404
    if we reject a modification for a public image.
    
    Change-Id: I71915f662c8e9e3ebf4326f47d0cd3bd08c03ac1

commit 28f2cae1612b1dbd854fa45859ac46c995b0d5d1
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Mon Jan 30 14:09:09 2012 +0000

    Check service catalogue type rather than name
    
    Fix for bug 904850. After authenticating with Keystone select
    the 'type' field from the returned ServiceCatalog json rather
    than the 'name'.
    
    Change-Id: I4e3d92a1ff58fa2be1669789fe371f61c53f652a

commit 2ce78382004a567defe98d8ccd196277a7cb66ed
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Sat Jan 28 16:39:06 2012 +0000

    Restore inadvertantly dropped lines.
    
    Fixes bug 852850
    
    Restore two lines inadvertantly dropped when rebasing after a
    merge conflict at patch set 3 in the following review:
    
      https://review.openstack.org/#change,3297,patchset=3
    
    Also improve the test case that should have caught this.
    
    Change-Id: I982b70ee157c19e7aeb7502b7173d8b0fc8c82a1

commit 4f9327ac9a98480512d623ca00cee50a087be09e
Merge: 08dbc2a c713c22
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jan 26 21:33:22 2012 +0000

    Merge "Few small cleanups to align with Nova"

commit 08dbc2a7cbe24c113d77b9634feadb5ab62adee9
Author: Russell Bryant <rbryant@redhat.com>
Date:   Thu Jan 26 12:26:06 2012 -0500

    Include the LICENSE file in the tarball.
    
    Change-Id: Ib51c9e8b02797d9daa956fe02a217b9e748b0c06

commit aaa18a02a5351365804a95349176666cf3602889
Author: Russell Bryant <rbryant@redhat.com>
Date:   Wed Jan 25 12:46:46 2012 -0500

    Change xattr usage to be more broadly compatible.
    
    This patch updates the xattr image cache driver to use methods that are
    more broadly compatible.  The issue here is that there is more than one
    xattr Python module out there.  Specifically, there are:
    
        https://github.com/xattr/xattr
        http://git.k1024.org/pyxattr.git/
    
    The previous glance code expected an interface available in the first
    version.  This patch changes the code to use an interface that is common
    to both of these.
    
    This makes all of the image cache tests working against the current pyxattr
    package in Fedora.
    
    Change-Id: I1fca66cfe914364c921408b676a06387d1de5c2a

commit 8ec2f81e597ba299ba181f1dea7ceb6a0757fa55
Author: Russell Bryant <rbryant@redhat.com>
Date:   Wed Jan 25 11:31:34 2012 -0500

    Fix mixed usage of 's' and 'self'.
    
    The first version of this patch fixed one misuse of 'self' when 's' was
    expected.  There were some other uses of 'self' that I missed.  This
    patch just changes these functions to use 'self' everywhere.
    
    Change-Id: I66b74f00e5416e3e67eb60cf6c505f70134e6ddb

commit 76b894b47a9dcd44098fd59eb22eb2fee599a7f9
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Wed Jan 25 11:34:34 2012 +0000

    Don't force client to supply SSL cert/key
    
    Fix for bug 921494. Clients should be able to
    connect using SSL without specifying a client-side
    key or cert.
    
    Change-Id: Iad65d1c77543184cfe7faa8aa07926a87cb14b43

commit c713c22a25872009281201d989f05a304bb1903c
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Tue Jan 24 21:50:55 2012 -0500

    Few small cleanups to align with Nova
    
    * Adds HACKING.rst -- with some modifications that do not apply
      to Glance
    * Renames README to README.rst
    * Remove old cruft with rfc.sh and BZR stuff
    
    Change-Id: I1ff640fcee71e4d9bafa28ddd83c779ac4d702d2

commit 180ae8964d0ab1bcde419aff06e2d299dbe242c9
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Tue Jan 24 15:51:48 2012 -0500

    Adds documentation for policy files.
    
    Implements interim-glance-authz-service
    
    Change-Id: Ifefa4174aa45a29fd58ab40c74b5eaf6fecb4f83

commit 971e4b6a53ccf7ddd23fee0175531792beddcc8b
Merge: 79cc925 7094e89
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jan 24 20:42:36 2012 +0000

    Merge "Client.add_image() accepts image data as iterable."

commit 79cc9254d949709f72b786d750a37cb1b9359eb6
Merge: 7df7586 6cac288
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jan 24 20:32:15 2012 +0000

    Merge "More flexible specification of auth credentials."

commit 7094e8926c623a59e5d5fa2b5a9cca13738a79fe
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Mon Jan 23 13:22:53 2012 +0000

    Client.add_image() accepts image data as iterable.
    
    Fixes bug 773562
    
    Allow the image data to be passed to glance.Client.add_add_image()
    via an iterator, in addition to the previously accepted images types
    (file-like or string).
    
    Change-Id: I1f90b9875f5610d478a5ed123fbf431501f1c2b6

commit 6cac288a87d0eba448394ac39981bf9f63238125
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Fri Jan 20 20:27:02 2012 +0000

    More flexible specification of auth credentials.
    
    Fixes bug 853933
    
    Add new --username|--password|--tenant|--auth_url|--auth_strategy
    switches to bin/glance to allow the username, password, tenant name,
    and authentication URL & strategy be specified on the command line.
    
    Avoid needlessly falling back to keystone v2 auth after a successful:
    
      GET /v1.0/tokens
    
    returns with the X-Image-Management-Url or X-Glance header set,
    as opposed to X-Server-Management-Url.
    
    Extend the keystone functional test support to ensure that the URL
    returned by keystone via the X-*-Url header contains the appropriate
    dynamically allocated port for the glance API service.
    
    Ensure the underlying $OS_* environment variables do not leak into the
    TestPrivateImagesCli functional tests, also explicitly exercise both
    noauth and keystone strategies.
    
    Change-Id: Iee8bf3745d65a9c57a9da803d5cf9ae5f343a159

commit 7df7586976f5256525d74ae322992e8073df1aa3
Merge: f66ff4f 3b2ef8e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jan 24 17:38:57 2012 +0000

    Merge "glance-control need not locate a server's config file (lp#919520)"

commit f66ff4f2e1f835c66e6800e57115b47ce308f47d
Merge: 53c8ad4 601fb31
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jan 24 17:27:37 2012 +0000

    Merge "glance-api fails fast if default store unsupported"

commit 53c8ad4b9d12eaef529c7ce6e1967693ed690778
Merge: 0db2cfa 946278d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Jan 23 21:49:24 2012 +0000

    Merge "Bug #909574: Glance does not sanity-check given image size on upload"

commit 601fb310ef7802a059a375b978e82eb31efafe68
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Mon Jan 23 09:55:06 2012 +0000

    glance-api fails fast if default store unsupported
    
    Fixes bug 852850
    
    Ensure the glance API server will not start if the class supporting
    the configured default store cannot be imported.
    
    Change-Id: I80a97dbc0af4737dbbc1bf0491e7cef222ec3454

commit 946278d1c709db2a5f850619ccd2d6ecf62e8f5a
Author: Ewan Mellor <ewan.mellor@citrix.com>
Date:   Wed Dec 28 21:25:25 2011 -0800

    Bug #909574: Glance does not sanity-check given image size on upload
    
    Don't allow an image size greater than 1 PiB.  Also, add an exception
    block catching and reraising HTTPError inside _upload.  This way, we don't
    fall into the Exception block below and log the full backtrace when the
    error has been diagnosed already.
    
    Adds unit test to verify 400 returned with supplied overlimit image size
    
    Change-Id: Ie745dffaf2fe43fdb7643c27d087e36d76b7c0e4

commit 3b2ef8e29e21ce1c00c33de8f3521b3c7cf8d241
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Mon Jan 23 08:18:57 2012 +0000

    glance-control need not locate a server's config file (lp#919520)
    
    Before converting to cfg, glance-control would use find_config_file() to
    locate the servers config file if the user did not explicitly specify
    it.
    
    With the change over to cfg, we screwed that code up. However, we should
    instead just allow the server to locate its own config file rather than
    trying to guess what it will use.
    
    Change-Id: I422839ae4c684ff2de3a0a96dd54c6b74ce6df97

commit 0db2cfadf5da692aa6f02abd20018f4aa3d49d2a
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Tue Jan 10 21:14:26 2012 -0500

    Bug#911599 - Location field wiped on update
    
    Adds unit test to verify behaviour required:
    
    * Location field may only be **edited** if the image is
      in a queued state, which indicates that the user issued
      a POST /images with NO location field and NO image data
    * Otherwise, Location field may not be edited and may not
      be read via the API server either.
    
    Change-Id: I42aba7bc8e2da6ac81b18b564ba096208406f893

commit 8d83124522e12c5aa3cfdc6d8616b63c402b9073
Merge: 71b0bb8 eb2ab3a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jan 20 20:08:33 2012 +0000

    Merge "Return 400 if registry returns 400."

commit 71b0bb8d12080589ca7b31bbfd01e675da9640a5
Merge: 0870747 eeb4d1e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jan 20 19:58:25 2012 +0000

    Merge "Add policy checking for basic image operations"

commit eb2ab3a40a7ddc6038a254c27870f92cfd012d24
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Fri Jan 20 13:31:47 2012 -0600

    Return 400 if registry returns 400.
    
    Fixes bug 919244.  The registry would return 400 for invalid input,
    which resulted in an exception.Invalid being thrown in the registry
    client.  There was no exception handler for this exception, so it
    got bubbled up and turned into a 500.  This should fix the problem
    by adding the missing exception handlers.
    
    Change-Id: I75ecfec1c0b0b4b3df1a8c9ace83e75d19527c93

commit 087074729cfc1b94dac0b771439d6a66009a649a
Merge: 2e8e628 41b981c
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Jan 20 19:27:50 2012 +0000

    Merge "Swallow exception on unsupported image deletion."

commit 2e8e628d7a320fdec45370a1e024373ee7164f2f
Author: Dan Prince <dan.prince@rackspace.com>
Date:   Fri Jan 20 11:17:01 2012 -0500

    Set url's on AuthBadRequest exceptions.
    
    Fixes LP Bug #919269.
    
    Change-Id: Ibc9c20e90e06ec4c235d07003fc01bcdf77c976f

commit eeb4d1ee29bf1c7a10755fc312229acfcebc9cde
Author: Brian Waldon <bcwaldon@gmail.com>
Date:   Tue Jan 17 15:43:13 2012 -0800

    Add policy checking for basic image operations
    
    Partially implements bp interim-glance-authz-service.
    This checks basic image operations: get_images, get_image,
    add_image, modify_image, delete_image. It looks for a
    policy json file next to our config files.
    
    Change-Id: I07f29c11934c68d38a6bdadd39f9dc841b61648a

commit 41b981c98d947ada3e8c83af8392e222ce1b00cd
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Thu Jan 19 22:07:25 2012 +0000

    Swallow exception on unsupported image deletion.
    
    Fixes LP #912897
    
    When the remote store does not support deletion of images (e.g. HTTP)
    the StoreDeleteNotSupported exception is now swallowed and logged as
    opposed to it being propagated back to the glance CLI.
    
    Also after a failed delete, we avoid falling through to the delayed
    delete logic.
    
    Change-Id: I6cc529f029750fc66a4d32e2076f29198b3d2093

commit b712949ec531055661357fc2fc79c169f2223999
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Jan 19 11:15:36 2012 -0800

    Ensure we only send a single content-type header
    
    Fixes bug 917438
    
    Change-Id: Ic71bd139f77ed7f291eca258c123deb30c7177ce

commit e893b248a2f541eb8409c552b17b43c67430d117
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Tue Dec 20 18:03:55 2011 +0000

    Multi-process Glance API server support.
    
    Implements blueprint multi-process-server. Allows several Glance API
    worker processes to be started, which can increase performance on machines
    with more than one CPU.
    
    Change-Id: I1cbb48945fd23afd71de3a30b80836b590c023a1

commit 1698eb10b597dc702977b7686edf9aed06e55702
Merge: ee38a16 097ced8
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jan 19 02:01:30 2012 +0000

    Merge "Make paste.ini file location configurable."

commit ee38a16a5eed53bde7234ec368bd8d1854ac684a
Merge: b1abca2 3956c54
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jan 19 01:43:48 2012 +0000

    Merge "Set size metadata correctly for remote images."

commit b1abca214d17b24619825c040fa70867f57b31be
Merge: bbfa3ed 5835b30
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jan 19 01:26:28 2012 +0000

    Merge "Avoid the need for users to manually edit PasteDeploy config in order to switch pipelines."

commit bbfa3edc06e7d16055af3dd500566425a262d28c
Merge: b4624ec 14593a3
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jan 19 00:55:22 2012 +0000

    Merge "Split out paste deployment config from the core glance *.conf files into corresponding *-paste.ini files."

commit 3956c546fb725a13784f6e1441a74be1680abd9d
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Tue Jan 17 23:21:15 2012 +0000

    Set size metadata correctly for remote images.
    
    Previously the size metadata was always zero'd for remote images,
    which was misleading and led to issues like:
    
      Bug 900959
    
    We now query the remote store (HTTP, S3 or Swift) with the
    equivalent of a HTTP HEAD in order to determine the correct
    image size without downloading.
    
    Where the size is available, the metadata is set appropriately.
    Otherwise it falls back to zero as before.
    
    Change-Id: I3093eba1b2fa023348558c45febee39e68e1a08f

commit 097ced8cb255604d07e13b5238f2423b719654b7
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Fri Jan 13 15:28:46 2012 +0000

    Make paste.ini file location configurable.
    
    Add an optional paste_deploy.config_file variable to identify
    a non-default location for the paste.ini file (the default for
    /path/to/component.conf is /path/to/component-paste.ini).
    
    Change-Id: Ibd7aefe95706fb50e4e353c14eb6dab0f948331f

commit 5835b30cc241e1dbad4ca2920ea05f19e3097cbe
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Tue Jan 17 11:39:06 2012 +0000

    Avoid the need for users to manually edit PasteDeploy config in order to switch pipelines.
    
    Define multiple pipelines in glace-api.conf to reflect the
    various supported deployment flavors (minimal, with caching,
    with cache management, with keystone-based auth etc.).
    
    Add an optional paste_deploy.flavor config variable to allow the
    user select the appropriate pipeline without having to edit the
    paste config (i.e. uncommenting lines as before). For example
    in glance-api.conf, a setting of:
    
      [paste_deploy]
      flavor = keystone+caching
    
    identifies the following pipeline in glace-api-paste.ini:
    
      [pipeline:glance-api-keystone+caching]
      pipeline = versionnegotiation authtoken auth-context cache apiv1app
    
    the advantage being that the user need not be concerned with
    the precise sequence of filters required to realize the QoS
    they desire.
    
    Modify the functional tests that patch configuration (i.e. the
    keystone and caching tests) to use the new deployment_flavor
    mechanism.
    
    Extend the TestConfigOpts to support option groups.
    
    Change-Id: Ide843ada11bce115b7dc650440397853c6409b03

commit 14593a3b9691bdb6920c7fefe98d1f817495abb9
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Fri Jan 13 00:31:00 2012 +0000

    Split out paste deployment config from the core glance
    *.conf files into corresponding *-paste.ini files.
    
    Fixes LP #815208
    
    Change-Id: I5acb8488cc25bb3c7dd735c8c2b0fe62fcea8e5e

commit b4624ec24240c1c15d4daed07afd19eb21474be4
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Tue Jan 10 17:49:42 2012 -0500

    Fixes LP Bug#913608 - tests should be isolated
    
    This reworks the stubs.FAKE_FILESYSTEM_ROOTDIR used in unit
    tests by making each test case create and destroy its own little
    sandbox in /tmp/test.*/images. Adds a base IsolatedUnitTest that
    tests needing to have an isolated filesystem_store_datadir and
    configuration can inherit from.
    
    Change-Id: I396f5127c6a687da8dcef3368e7ed0912efc9b3a

commit 6fd005465e70f3ac1c1581b10b4e01d041f50f23
Author: Eoghan Glynn <eglynn@redhat.com>
Date:   Mon Jan 16 14:55:42 2012 +0000

    Set correct Content-Length on cached remote images
    
    Override the image metadata size attribute with the actual
    cached image file size when setting the Content-Length header
    on the response to a GET of a cache remote image.
    
    This avoids an non-initial GET on a remote image failing when
    caching is enabled, as described in this bug:
    
      Bug 900959
    
    Change-Id: I7656bc971d982cce78ce1ed4cf7ea509f8bbdfa8

commit 195e6670c47352993c920a0dd490aa7e1fb8566e
Author: Chris Behrens <cbehrens@codestud.com>
Date:   Thu Jan 12 23:42:06 2012 -0800

    Implement retries in notify_kombu
    
    Fixes bug 915817
    
    Copies code from nova and includes improvements pending for nova as well
    
    Change-Id: Ib596f4bacc5f58c4507f4111cdfac273029018bc

commit b0181065d0fec61ee2ef2be0b39850d79deaafb6
Merge: 2be1efe b46401a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jan 12 21:40:21 2012 +0000

    Merge "Return correct href if bind_host is 0.0.0.0."

commit b46401a17b68dee4568e7ff01a5534a62eb9285f
Author: Pete Zaitcev <zaitcev@kotori.zaitcev.us>
Date:   Wed Jan 11 21:24:22 2012 -0700

    Return correct href if bind_host is 0.0.0.0.
    
    The existing code returns incorrect href= in the root document (aka
    "version" document) if the default configuration is used. If a remote
    system accesses Glance API, the netspec of href= contains 0.0.0.0,
    which cannot be used for further remote accesses. This happens because
    attempts to use local configuration or the bind address to reconstruct
    URLs are futile.
    
    The correct way resolve this problem is to use the Host: header
    of the HTTP request. As a bonus, it works with IPv6, should we ever
    support it.
    
    Change-Id: I661351b679c695bd6ab310104a3246dd3069f9c6
    Bug: 915621

commit 2be1efe281eb18ca753f79c6a2381c02466472a5
Author: Major Hayden <major@mhtx.net>
Date:   Thu Jan 12 14:42:14 2012 -0600

    Remove assertDictEqual for python 2.6 compatibility.
    
    Fixes bug 915604. Removes assertDictEqual from glance tests and replaces it with assertEqual.
    
    Change-Id: I1439516331b4e92051ccfce6abebe17a0516a52e

commit c2c805b7078cd6eff86293f67ef8d2d40e642f09
Merge: 76f24c3 e2f9d15
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jan 12 15:03:29 2012 +0000

    Merge "Add notifications for sending an image"

commit 76f24c3b68ce4a8f9f521f757f157d95afa013a0
Merge: 1590dad 8780360
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jan 11 16:21:57 2012 +0000

    Merge "LP Bug#912800 - Delete image remain in cache"

commit 1590dadcb495f97a3a2d86c13b5d0f847e6d5964
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Wed Jan 11 07:25:36 2012 +0000

    Add optional revision field to version number
    
    Add a revision field to the version number to account for releases from
    the stable branch, e.g. 2011.3.1.
    
    See http://wiki.openstack.org/StableBranchRelease
    
    Change-Id: Ibe3b69fcc7e7d09f17c8f6e68a0e7bb17afbfdce

commit 878036019af964e982e495183f099daa5a38fdfc
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Tue Jan 10 20:48:04 2012 -0500

    LP Bug#912800 - Delete image remain in cache
    
    Adds a functional test case that verifies that when an
    image is deleted and the cache middleware is place, that
    the image is properly removed from the image cache.
    
    Change-Id: I20fc4461bd5f53528b264536b248f596aff510af

commit e2f9d15e4cb99caa5ab146bc367def81b2fdf6fb
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Fri Jan 6 18:26:38 2012 +0000

    Add notifications for sending an image
    
    An image.send notification is to be sent to the notifier every time an image is
    transmitted from glance. This can be used to track things such as bandwidth
    usage.
    
    Addresses bug 914440
    
    Change-Id: If8b6504c4250fa6444d17d611de43d9704ca9aae

commit 7f4b1c58992cfe6343d4e2b8429a3757c9a1a945
Merge: 883bdd8 f8ae3c4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jan 10 16:19:45 2012 +0000

    Merge "Split notification strategies out into modules."

commit 883bdd8564e42b63b0d279c5c655c4cd4a1fcf6d
Merge: e27b0e1 d466cec
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jan 10 02:51:01 2012 +0000

    Merge "Fixes incorrect URI scheme for s3 backend"

commit e27b0e1c2775765be29bf38776ff1e7cd259e0f0
Merge: e4bd841 9633697
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jan 10 02:41:04 2012 +0000

    Merge "Add comments for swift options in glance-api.conf."

commit e4bd841b6db79187b7ee8923ad05d1d636b25926
Merge: 85a9160 4844917
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Jan 9 22:26:08 2012 +0000

    Merge "Bug #909533: Swift uploads through Glance using ridiculously small chunks"

commit 85a91606b12c5d8ddb42d4a1e7942f6bd0e75276
Merge: 1cff825 422c1e4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Jan 9 22:21:58 2012 +0000

    Merge "Remove doc/Makefile."

commit 48449171a73e9b470b3caa136f20d56cd1757bdc
Author: Ewan Mellor <ewan.mellor@citrix.com>
Date:   Wed Dec 28 21:13:55 2011 -0800

    Bug #909533: Swift uploads through Glance using ridiculously small chunks
    
    Remove the use of a temporary disk buffer when streaming to Swift.  This
    was added on the assumption that it was not possible to stream chunks to
    Swift direct from webob.Request.body_file.  That's not true -- a simple
    file-like object wrapping body_file does the job perfectly.
    
    This removes the need for swift_store_object_buffer_dir in the config file.
    It is also significantly cheaper, since there is one copy fewer.
    
    Fix the parsing of the swift_store_large_object_size and
    swift_store_large_object_chunk_size options.  These are
    specified in MB in the config file, but needs to be in bytes internally,
    because they are compared against the image_size parameter given to add().
    
    Update the unit tests to match.  This includes an additional check that
    put_object is called the correct number of times.  The unit tests missed the
    latter problem problem because there was no check that a small object is only
    uploaded in one chunk, and despite the comment to the contrary there was no
    check that the right number of chunks were written in the large-object case
    either.  Added these in all places where store.add is called.
    
    Change-Id: Ieb4cf68516b53bd16d2671e49e805b26118b3671

commit 1cff8250c64228cca52a7dd64820b030d3114db9
Author: Pete Zaitcev <zaitcev@kotori.zaitcev.us>
Date:   Thu Jan 5 15:39:55 2012 -0700

    Add Fedora clauses to the installing document.
    
    This change resolves 2 Fedora-related todo items in installing.rst.
    
    It also cleans up a bit:
     - fixes weird grammar
     - fixes improper list numbering
     - uses proper name for Red Hat, where space is necessary
     - replaces A/B syntax with A, B
    
    This is my first commit and I am adding myself to Authors file
    on a suggestion by Brian Waldon.
    
    Change-Id: I398ae8150d7912e0b61375a7bdc5aab1101f34bc

commit 422c1e4aa96f175ace645cb068a2d81f6d742642
Author: Russell Bryant <rbryant@redhat.com>
Date:   Tue Jan 3 16:07:05 2012 -0500

    Remove doc/Makefile.
    
    Use "python setup.py build_sphinx" instead.  There are some things that
    the Makefile did that setup.py does not do, but they will be easy enough
    to add later if anyone misses them.
    
    Change-Id: I430dcc027bac207af515fb7d927500db18320ba5

commit d466cec3576b12c61491c75c43ec2d839072890e
Author: Hengqing Hu <hudayou@hotmail.com>
Date:   Thu Jan 5 19:05:15 2012 +0800

    Fixes incorrect URI scheme for s3 backend
    
    Fixes bug #912094.
    
    URI scheme for s3 backend should be 's3+https', not 'swift+https'.
    
    Use s3.amazonaws.com instead of s3service.com to follow RFC2606.
    
    Indent reason for BadStoreUri exception in s3.py.
    
    Comments added for the following option in etc/glance-api.conf
        's3_store_host'
    
    Change-Id: Id456b287d82fe61711f0d738e61ccb599f0b5684

commit 9633697ae08bc222c07b96e777061c7d24f45273
Author: Hengqing Hu <hudayou@hotmail.com>
Date:   Thu Jan 5 10:27:30 2012 +0800

    Add comments for swift options in glance-api.conf.
    
    Fixes bug #771465.
    
    Comments added for the following two options in
    glance-api.conf
        'swift_store_auth_address'
        'swift_store_user'
    
    Indent reason for BadStoreUri exception in swift.py.
    
    Change-Id: Ife28e01a4e2344cf1e5a179752d244b68e45d348

commit b7796ecd8cff784bc3dd698510b66e0cdd5d30ab
Merge: bd33de4 2528e56
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jan 5 02:48:23 2012 +0000

    Merge "fix bug 911681"

commit bd33de49503dd6b821093a7adb16bc8239ce683b
Merge: d57031e aba34d1
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Jan 5 00:09:49 2012 +0000

    Merge "Fix help output for inverse of BoolOpt."

commit f8ae3c4995d8716c46750e3715532e3086a2645a
Author: Russell Bryant <rbryant@redhat.com>
Date:   Wed Jan 4 16:01:13 2012 -0500

    Split notification strategies out into modules.
    
    1) Add a Strategy class that defines the interface that a particular
    notification strategy must implement.
    
    2) Split each notification strategy out into its own module.
    
    This is in part just an attempt at some "code cleanup", but it also has
    an advantage that it is easier to make a particular notification
    strategy be optional and not impose a hard dependency on all of glance.
    
    Change-Id: Iab658637c56e764e2b3ec54c67e752db0cbfbe5c

commit d57031ed2608a965ac1ad14f67770dbdbb812b73
Merge: 41cd77a 668149d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jan 4 22:53:15 2012 +0000

    Merge "Set execute permissions on glance-cache-queue-image."

commit 41cd77a978a68374aa258d9fd7077a28dc1d7191
Merge: 5e5d2eb 58532a4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Jan 4 20:04:26 2012 +0000

    Merge "Add more man pages."

commit 2528e569d0a53248dd9cae9b1f6aa2da5f455cdd
Author: Yaguang Tang <heut2008@gmail.com>
Date:   Wed Jan 4 23:28:05 2012 +0800

    fix bug 911681
    
    need not to use optparse in  bin/glance-control.
    
    Change-Id: I3096a39fd0c26f9fa5243f7cc2bd25dd8d5235ea

commit aba34d190e5a453e314cb18fe59b9e4cca2708f9
Author: Russell Bryant <rbryant@redhat.com>
Date:   Tue Jan 3 19:38:26 2012 -0500

    Fix help output for inverse of BoolOpt.
    
    When a BoolOpt is used, it adds both the option and its inverse.  For
    example, there is "--verbose", and "--noverbose".  Previously, the same
    help text was used for both which didn't make any sense.
    
    This patch modifies the help text used for the inverse option.  It now
    simply says something like "The inverse of --<option>".  For example,
    the help text for --noverbose says "The inverse of --verbose".
    
    Change-Id: I3966fe9ec5ed6282d8a2902f06fc1487532064e0

commit 5e5d2ebde45d5c76b95e4f49ae15a18797265682
Author: lzyeval <lzyeval@gmail.com>
Date:   Wed Jan 4 09:20:53 2012 +0800

    PEP8 glance cleanup
    
    Fixes bug #911547
    
    All Object type comparisons should use isinstance()
    instead of comparing types directly.
    
    Change-Id: I9ddabd5cc7333fc63790b140ee52bf995a66cc9c

commit 58532a43738917dc7588f2bd5e96f658ce7ba64d
Author: Russell Bryant <rbryant@redhat.com>
Date:   Tue Jan 3 16:04:25 2012 -0500

    Add more man pages.
    
    A few man pages were already in place.  This patch uses the --help
    output from each executable to seed a man page for the rest of the
    executables, which include:
    
      - glance
      - glance-cache-cleaner
      - glance-cache-manage
      - glance-cache-prefetcher
      - glance-cache-pruner
      - glance-cache-queue-image
      - glance-control
      - glance-scrubber
    
    Fixes bug 911291.
    
    Change-Id: Ie0de990ff6617e7eb953f270a089c99bc340b4fe

commit 668149d70e83a7501f301ff9b77f3e1035d69571
Author: Russell Bryant <rbryant@redhat.com>
Date:   Tue Jan 3 16:27:52 2012 -0500

    Set execute permissions on glance-cache-queue-image.
    
    This file didn't have execute permissions set, while the rest of the
    executables in the bin directory did.
    
    Change-Id: I14db6f1fc8ba4af317c2189d1efa292df0f6ba54

commit 98b19af07b4cbe7bac124cfc7092be264ab84586
Merge: 2532c88 add97aa
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jan 3 16:22:20 2012 +0000

    Merge "Add ability to specify syslog facility"

commit 2532c886706e8f66ef36113afecc13d3d9d457bd
Merge: b132709 db29421
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Jan 3 15:23:53 2012 +0000

    Merge "Add a LICENSE file."

commit db2942166de266412ed1f9ccc9127afe32b5cdd4
Author: Russell Bryant <rbryant@redhat.com>
Date:   Tue Jan 3 09:31:23 2012 -0500

    Add a LICENSE file.
    
    The license file was missing in glance. The LICENSE file added here is
    copied in from nova.
    
    Change-Id: Ifae7610ea2c4d0db9cb4fc58a5639850f2b3e195

commit add97aa9f3a76e5c0e2316c4afaa43324e1aab6f
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Nov 8 15:01:16 2011 +0000

    Add ability to specify syslog facility
    
    Addresses bug 887596.
    
    Change-Id: Id5ae9bc2f37b39cdd4236d5df24273cda058e759

commit b1327095b395d83f0ba688e6e2886b18e4220ce0
Author: Monty Taylor <mordred@inaugust.com>
Date:   Mon Jan 2 13:26:44 2012 -0800

    Install an actual good version of pip.
    
    Change-Id: I0ce36bea05ba4c08818f61805bf052392976cd43

commit 7d61fefd26d396d5f4035484c9135f5c80623ff9
Author: Ewan Mellor <ewan.mellor@citrix.com>
Date:   Wed Dec 28 21:33:54 2011 -0800

    Bug #909538: Swift upload via Glance logs the password it's using
    
    Don't log the key used when creating a Swift connection.
    
    Change-Id: Ia9e7e6b7a14a6169b844ab40eb6adafeaf6d5542

commit 4d7f2afb1d756a1cf608acc09356d6ac906b6cf8
Author: Monty Taylor <mordred@inaugust.com>
Date:   Fri Dec 30 14:03:15 2011 -0800

    Add tox.ini file.
    
    The tox.ini drives the current test suite in multiple virtual envs, so this
    is a first step in trying to get multi-version testing.
    
    Change-Id: I9c28ee11aa7bbe1b221a72e0ee8cc51d788f73c9

commit fa1b0b1f784f1b68c8fc598965155b7f083b61dc
Author: Johannes Erdfelt <johannes.erdfelt@rackspace.com>
Date:   Wed Dec 28 16:05:05 2011 +0000

    Synchronize notification queue setup between nova and glance
    
    Fixes bug 901376
    
    Glance used a SimpleQueue which would end up with a direct queue with an
    exchange named the same as the queue. This was different than Nova, which
    uses a topic queue with an exchange named 'nova'.
    
    This change makes Glance use a topic queue with a configurable exchange
    name to match Nova.
    
    Change-Id: Ia014e4c00060abc2345289a54e45bbfdc6b7e8e5

commit 00ac2c725097567ab090079db799e70a6f549794
Author: Major Hayden <major@mhtx.net>
Date:   Wed Dec 28 10:17:52 2011 -0600

    Fixes keystone auth test failures in python 2.6.
    
    Fixes bug 909408.
    
    Change-Id: I18f5bf43f390c8a69f49e5f038acb9dcd80ca502

commit 18625fb89a9ee5f34c35795f465037b7240e0f13
Merge: a7b8cd1 391dd0e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Dec 27 16:37:37 2011 +0000

    Merge "Adds support for protecting images from accidental deletion."

commit a7b8cd1be3295422d8435f90f051effd087bd367
Merge: 1571cd8 c827316
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Dec 27 16:19:13 2011 +0000

    Merge "Fix for bug 901609, when using v2 auth should use /v2.0/tokens path."

commit 1571cd8f83cb80f2c89bd226883d7f802119bfb2
Author: Brian Lamar <brian.lamar@rackspace.com>
Date:   Thu Dec 22 14:22:48 2011 -0500

    Removed bin/glance's TTY detection.
    
    Fixes bug 907906
    
    The logic is sound: if location=XXX is specified, use that.
    If it's not specified, use sys.stdin to read image data. No need to
    error when location=XXX is specified and stdin just happens to be a TTY.
    
    Change-Id: I057312becad59b3dd7a71f94d25ebd032e1a7b52

commit 1e611fa1ae4f4185c50c114a5b41f5581b9358b6
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Wed Dec 21 13:00:07 2011 -0500

    Fixes request with a deleted image as marker
    
    Fixes bug 907461
    
    Change-Id: I5dbcd626ecdbd8dfcb1b1dca80813e07c190b9db

commit 391dd0e21122b3711b1fdd0391f8c82c99cbdccc
Author: Johannes Erdfelt <johannes.erdfelt@rackspace.com>
Date:   Fri Aug 26 14:51:50 2011 +0000

    Adds support for protecting images from accidental deletion.
    
    Implements blueprint protected-images.
    
    A new attribute 'protected' is now available to prevent an image from being
    deleted. If the image is protected a HTTP Forbidden (403) error is returned.
    The attribute can be changed via an update of the image.
    
    Change-Id: I72ba1c6499065441dc73e5ec2fa873d76c7f60d1

commit c827316cd3be96c5bf70b4fbba78e46f038b8a7d
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Thu Dec 8 13:19:51 2011 +0000

    Fix for bug 901609, when using v2 auth should use /v2.0/tokens path.
    
    Added relevant V1 and V2 auth unit tests.
    
    Also allow keystone authentication to work whether OS_AUTH_URL
    has a trailing slash or not.
    
    Change-Id: Ia94c759644c9394d72cc07999a1eb8eedda5ea3a

commit 1239f61c2b4ddad3087a2e4e59824fd000c5760e
Author: Brian Lamar <brian.lamar@rackspace.com>
Date:   Sat Dec 17 15:11:14 2011 -0500

    Updated glance.registry.db for bug 904863
    
    Changed sql-connection to sql_connection, updated add_group to register_group,
    and removed the 'registrydb' group designator.
    
    Change-Id: Id9bf38f067806b6f81b23296ed73774e820a577b

commit ea99d1c8f350b545276e91daa3c6304a28d3e185
Merge: 16a591a 105f1fc
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Dec 16 22:23:12 2011 +0000

    Merge "Ensure functional tests clean up their images"

commit 16a591a00d814882e1433ffc2413fc63d9591d78
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Dec 15 12:15:51 2011 -0500

    Removing caching cruft from bin/glance
    
    Fixes bug 888343
    
    Change-Id: Ief0ca93a073f8235afd98ca79f8033fef66260e3

commit 5620ddff24ecf783f37922aa435d71d301b27269
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Thu Dec 8 17:20:50 2011 -0500

    Fixes LP Bug#901534 - Lost properties in upload
    
    Adds test cases that verify the bug behaviour.
    
    Adds some logic to the main API images controller
    update() method that does the following:
    
    * If an image file is being uploaded, do not purge
      existing properties when updating metadata. The idea
      behind this change is that a very common scenario is
      to register an image entry with Glance with some
      properties (like instance_uuid, instance_type, etc) and
      then immediately upload an image (usually snapshots).
      We don't want to mark deleted the originally-registered
      properties during the image upload, which was what was
      happening.
    
    * Add ability to force Glance NOT to purge properties
      when calling PUT /images/<IMAGE_ID> if the
      X-Glance-Registry-Purge-Props: false
      header is passed.
    
    Change-Id: Ie66af8f052ab40d5dca7a3235fdbbb7de20372de

commit f1ccb596024f90a1bf15fb15ab0c3387f9ce780c
Merge: 2c94f6b 4ffe0e6
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Dec 15 03:37:05 2011 +0000

    Merge "Allow glance keystone unit tests to run with essex keystone."

commit 2c94f6b5816bbfbc03254d90285d54d16096e69c
Merge: 68de11c 57c4e9b
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Dec 14 21:15:21 2011 +0000

    Merge changes Iafa998a2,Ideedf77e,I3a86fc01
    
    * changes:
      Convert glance to use the new cfg module
      Add new cfg module
      Rename 'options' variables to 'conf'

commit 68de11cdab473036dfdf17df48deafd4677d926b
Merge: b535900 ba44d1c
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Dec 14 21:05:27 2011 +0000

    Merge "Add generic PasteDeploy app and filter factories"

commit b53590001b6e870ef0232284fe988898183d5c25
Merge: c062423 3bfe910
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Dec 14 15:01:39 2011 +0000

    Merge "Update glance caching middleware so doesn't try to process calls to subresources. Fixes LP bug #889209."

commit 3bfe910a33a2927351b0c5125d1c519aee41d6ef
Author: Dan Prince <dan.prince@rackspace.com>
Date:   Tue Dec 13 15:53:20 2011 -0500

    Update glance caching middleware so doesn't try to process calls to
    subresources. Fixes LP bug #889209.
    
    Change-Id: Id56a535418c70bdc91a81baabc53d0c9db758a29

commit 105f1fc0545e1e05f762f6d302ff4f687a889f2d
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Dec 13 14:21:11 2011 -0500

    Ensure functional tests clean up their images
    
    Fixes bug 903887
    
    Change-Id: I8772cf39a7de42b31c65f0b5dfb093693d38751a

commit c06242382e4de3afb67f198f86cdab76c49b00fa
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Dec 13 13:38:10 2011 -0500

    Remove extra swift delete_object call
    
    This only tries to delete the manifest once when deleting an image
    stored (chunked) in swift. Fixes bug 903768.
    
    Change-Id: I65b8f3389e9965a111c4e774f4d1b6f7bbe71a9b

commit 5fc3d42dd7d09ba7a0780f59ab270236ce7e8e49
Author: Thierry Carrez <thierry@openstack.org>
Date:   Mon Dec 12 16:45:48 2011 +0100

    Add missing files to tarball
    
    Add missing files from repository in tarball.
    Fixes bug 901217.
    
    Change-Id: Ib4f5efdce412c9255e13894df77d7e63c2ac6d05

commit 4ffe0e6dd01fc7fd92395994778eb27820a35d93
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Thu Dec 8 13:39:11 2011 +0000

    Allow glance keystone unit tests to run with essex keystone.
    
    Fix for bug 901672.
    
    Change-Id: Idc72797949e47bd75aeba45965e3c8b83571625e

commit d76a7d43a62d967220575a2a669bcea4484e4f31
Merge: d03e347 b23b8ef
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Dec 9 18:50:29 2011 +0000

    Merge "Add the missing column header to list-cached"

commit 57c4e9b6c686f1303c815698cc68b95bf9b033e7
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Mon Nov 28 14:37:58 2011 +0000

    Convert glance to use the new cfg module
    
    The changes here are substantial and widespread, but in summary:
    
      - We use cfg to parse the CLI and config files, rather than optparse
        and PasteDeploy
    
      - A schema is defined for all configuration options close to the code
        which uses the option
    
      - 2 ConfigOpts sub-classes are added to config.py basically just
        defining how to find config files; this means we can now use e.g.
        glance.conf for base config values which glance-api.conf can
        override
    
      - load_paste_app() is changed to load the paste app from the last
        config file in the stack and pass the app the ConfigOpts instance
    
      - The generic app and filter factories in wsgi.py are modified to
        pass a ConfigOpts instance to the apps and filters
    
      - A ConfigOpts subclass is added for the unit tests which writes out
        config values to a temporary config file and uses cfg to parse that
    
    I've tried to keep the switch as unobtrusive as possible leaving further
    cleanups for later e.g.
    
      - Moving PasteDeploy config out of the config files - I think it would
        be good to aim for having users modify the PasteDeploy config files
        only in fairly rare circumstances. To achieve this, we might define
        a number of common pipelines in the PasteDeploy config and allow
        the user to choose between those pipelines in the glance config.
    
      - We should add help strings to all the opts, even just for the sake
        of documenting them
    
      - We should move a bunch of the options into groups - e.g. all the
        rabbit options
    
      - We no longer rely on config files for default values, so the default
        config files could contain nothing but comments - i.e. explaining
        each option and showing what the default for it is - making it
        obvious where a user has explicitly set a value
    
    There are a couple of behavioural changes which I don't think are
    signifcant but are worth mentioning:
    
      - We used to support passing a config file as a positional argument
        but don't anymore; AFAICT, it was only used by glance-manage when
        launching servers and I've changed that to pass --config-file
    
      - log_opt_values() doesn't log unknown opts, so won't log any values
        for opts which get registered at runtime later
    
    Change-Id: Iafa998a2a8d860f1ad57e2cd2afee69686ed58ba

commit e5925473cd2d29024cbabd76250cc369a7090087
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Mon Nov 28 14:37:58 2011 +0000

    Add new cfg module
    
    As discussed on the mailing list and described here:
    
      http://wiki.openstack.org/CommonConfigModule
    
    The module implements an API for defining configuration options and
    reading values for those options that a user may have set in a config
    file or on the command line.
    
    The module will be part of openstack-common and glance will consume
    it from there once openstack-common makes a release with an API
    compatibility commitment.
    
    Change-Id: Ideedf77e5e16fa4e6ca742cfb49f5539c5a4a746

commit d03e347e7b69a1d34ce0f9418509e5dcebe18b4c
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Dec 8 13:11:11 2011 -0500

    Lock keystone to specific commit in pip-requires
    
    We'll use commit b9dde8d0e317203e349b8e4bca5bc9923c11974e. This will help ensure our tests don't fail due to a changing keystone trunk
    
    Change-Id: Ie9b8f0bd13b974817e8ce7de08033ab3f5bcce0c

commit b23b8ef2854610ef291396761874396231d5bc49
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Dec 8 13:00:09 2011 -0500

    Add the missing column header to list-cached
    
    Fixes bug 901768
    
    Change-Id: Ic313faba3587a2bfbc62bd81b6d6f5ad98a76ac5

commit 002d711fb7f16a6d5c7977e82e30837287b553b8
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Mon Nov 28 14:37:58 2011 +0000

    Rename 'options' variables to 'conf'
    
    In the common-config patch, I'm going to be using 'conf' as the name of
    the variable holding configuration values rather than 'options.
    
    This patch does the renaming across the codebase without making any
    functional changes.
    
    Change-Id: I3a86fc01fc76825d6d1e86af882eb8245828ce5f

commit ba44d1c384c58ae8059a44c0ef0afaacba40225f
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Mon Nov 28 14:37:58 2011 +0000

    Add generic PasteDeploy app and filter factories
    
    These generic factories allow us to dump the copied and pasted
    app_factory and filter_factory methods in the codebase.
    
    The main difference is the paste configuration changes from:
    
      [app:apiv1app]
      paste.app_factory = glance.api.v1:app_factory
      ...
      [filter:cache]
      paste.filter_factory = glance.api.middleware.cache:filter_factory
    
    to this:
    
      [app:apiv1app]
      paste.app_factory = glance.common.wsgi:app_factory
      glance.app_factory = glance.api.v1:API
      ...
      [filter:cache]
      paste.filter_factory = glance.common.wsgi:filter_factory
      glance.filter_factory = glance.api.middleware.cache:CacheFilter
    
    Apart from reducing code duplication, this will also allow us to have
    the generic factories inject other data into the apps and filters.
    
    Change-Id: I1d2be5630ab61d29b8948ff88d58e6e1b11c2e5f

commit 07dcb32106b1f4eca7f89c7ab6afc4b1bd3a1fef
Merge: 98b1ef3 37fc2b0
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Dec 6 21:53:07 2011 +0000

    Merge "Rename .glance-venv to .venv."

commit 98b1ef337ee63f239829b44aec4d05cea99f98ad
Author: Paul Bourke <paul-david.bourke@hp.com>
Date:   Mon Dec 5 15:56:18 2011 +0000

    Secondary iteration of fix for bug 891738
    
    A problem exists that images larger than large_object_size without a
    known image_size will fail to be segmented and hence fail to be added
    to swift.
    
    This patch alters the chunking process slightly:
    
    - Instead of reading min(large_object_chunk_size, bytes_left) from the
      stream, simply read large_object_chunk_size until we reach EOL(None).
      This works even when there is less than large_object_chunk_size bytes
      amount available.
    
    - The image_size can be determined from the combined length of each
      chunk read. If we are passed an unknown image_size this value can be
      used for the registry.
    
    Test Changes:
    
    - Fixed bug in fake_put_object which was highlighted by Jay when
      reviewing this changeset.
      The put of the manifest object needed to be moved inside the
      check for previous existence of a key.
    
    - Added test_add_large_object_zero_size to
      glance.tests.unit.test_swift_store:TestStore.
    
      This unit test demonstrates the bug and will test for regressions. It
      mirrors test_add_large_object but specifies an image_size of 0 to
      excercise the new code path.
    
    Change-Id: Ic8b78be5dce2281c80372ed446499f6d0bc07f40

commit 37fc2b00c0a8dd67221d83697609913aa78d89c7
Author: James E. Blair <jeblair@hp.com>
Date:   Mon Dec 5 11:23:40 2011 -0800

    Rename .glance-venv to .venv.
    
    This simplifies a number of Jenkins jobs which currently, other
    than directory names, could be the same for all OpenStack
    projects.  By renaming the virtualenv directory, the redundant
    Jenkins virtualenv build and copy jobs can be eliminated.
    
    Change-Id: I7916783d863e5184bad8293c3aed5ba119e374a9

commit d3e57489d82ad60d2860f10b59579958b1ae7443
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Mon Dec 5 12:23:12 2011 +0000

    Fix for bug 900258 -- add documentation for '--url' glance cli option.
    
    Change-Id: If6e72c159209c073a4941b90c4a31fa054c84cd2

commit 2da279408bbecf178126fed39e2ea26292ebcd60
Merge: b183f43 0e9c16d
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Dec 2 20:22:11 2011 +0000

    Merge "Add --url option to glance cli."

commit 0e9c16dccf27cc4f85e6772e1d2abfd820af7756
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Thu Dec 1 17:32:44 2011 +0000

    Add --url option to glance cli.
    
    Adds ability to select between http/https protocols.
    
    Fixes bug 898097.
    
    Change-Id: I1d20f314fb7dd8c5462c1f1ff22161ab59c35016

commit b183f43792e38f8210b15cac83a8a745938d22ae
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Wed Nov 16 00:57:27 2011 -0500

    Fixes LP Bug#850377
    
    Reworks Keystone functional tests to not depend on
    a local Keystone (or Glance client) installation path.
    
    Adds deps to tools/pip-requires with comments on
    why they are needed for installing Keystone via pip.
    
    Change-Id: I17c92e8ab37ef116d13e7b87719af4c0988450f9

commit 1ab63ff5c97cfcbcebd993b57e209c0dd17c2ee8
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Tue Nov 15 11:49:10 2011 -0500

    Fixes LP Bug#861650 - Glance client deps
    
    This patch addresses the dependency proliferation in
    the glance client stuff. It removes references to modules
    that contain non-client-necessary libraries (like
    eventlet, xattr, sqlalchemy-migrate and sqlalchemy)
    by restructuring the modules slightly.
    
    Note that the additional httplib2 dependency is because
    that is used in the authentication strategy stuff in
    glance.common.auth. This could be rewritten to use httplib
    instead, further reducing the dependencies of the client lib.
    
    IMPORTANT NOTE: This patch changes the default entrypoint
    for the Images API router application, and therefore this
    should be merged along with the packaging changes in this
    branch:
    
    https://code.launchpad.net/~jaypipes/glance/ubuntu/+merge/82318
    
    Change-Id: I5dbc8584fb77e3e011fb6ff3532f792f5103e242

commit 6bf61e8ce1882ea0f448aaffb7de8a826f19ea6e
Author: Lorin Hochstein <lorin@isi.edu>
Date:   Wed Nov 23 19:46:12 2011 -0500

    Added some examples for "glance add"
    
    Fixed some warnings.
    
    Change-Id: I9658c7458f3073b4bab93d0105d6ba174a4d0ca1

commit 0be6359d28c90252dc018d6903e5ffa66bc19b68
Merge: 105f792 03372c7
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Nov 28 03:47:41 2011 +0000

    Merge "Bug#894027: use correct module when building docs"

commit 105f792fa11e07cd0ad79e8730b3b8106fc18756
Merge: bf2b9d0 a7db2db
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Nov 23 17:41:21 2011 +0000

    Merge "Check to make sure the incomplete file exists before moving it during rollback. Fixes bug #888241."

commit bf2b9d01b3886377a0efc91b2a97302353208294
Merge: 49d67bd 8878046
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Nov 23 17:08:17 2011 +0000

    Merge "Fixes LP Bug#837817 - bin/glance cache disabled"

commit 03372c77aa2fddd61cb9b90d9aff553f90ca15d5
Author: Pdraig Brady <P@draigBrady.com>
Date:   Tue Nov 22 16:16:13 2011 +0000

    Bug#894027: use correct module when building docs
    
    Currently the wrong directory is searched for the
    glance module, requiring glance to be installed
    in the default system path, for docs to be buildable.
    Also the path was appended, so the default system version
    which may be completely different is referenced.
    This ensures that only local glance files are referenced.
    
    Change-Id: Ia226c90bbd24d7804401a7c9e444387c78a0f542

commit 49d67bd5051a7399d6108119ade54db92cae23f0
Author: Paul Bourke <paul-david.bourke@hp.com>
Date:   Thu Nov 17 14:46:11 2011 +0000

    Adds option to set custom data buffer dir
    
    Implements blueprint custom-disk-buffer
    
    When pushing an image large enough to be chunked into either a Swift
    or S3 backend, the chunks are buffered to /tmp.
    
    This change allows a user to define an alternate directory via the
    configuration files.
    
    Change-Id: I2660b6e5a76cbfd43834384b129550b66bb9afce

commit 1f28b6ca7efb9bed12052c10af71e57773693970
Author: Paul Bourke <paul-david.bourke@hp.com>
Date:   Mon Nov 21 16:50:23 2011 +0000

    Fix bug 891738
    
    Compute image size for the registry in the case where none is specified.
    
    Change-Id: Ic21adf4865d0f481db9bd362cfaeeebd0942c974

commit db10a10f55ad3df67718a45a8522c7f1f219a743
Merge: 5650bd2 7cb8d13
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Nov 17 19:05:21 2011 +0000

    Merge "Casting foreign_keys to a list in order to index into it."

commit 5650bd22b7926c8b40b3af5e9e190780ab6b7760
Author: Monty Taylor <mordred@inaugust.com>
Date:   Wed Nov 16 13:09:18 2011 -0200

    Added missing depend on nosexcover.
    
    Also reverted sqlalchemy.
    
    Change-Id: I815635ef618304123de89f6a10e97cd353e1237b

commit 6eb28314591382366bb07e32b856420fc6cc82f2
Author: Monty Taylor <mordred@inaugust.com>
Date:   Thu Nov 10 12:08:39 2011 -0500

    Removed some cruft.
    
    Removed builddeb.sh - we don't use it.
    Removed a reference to pep8 skipping vcsversion due to bzr bug.
    Updated sqlalchemy in the pip-requires to allow/use 0.7.1 or later to match
    Nova installs.
    
    Change-Id: I2da2b39efd0b1b192a490509a44cb1f641b86092

commit a805a281f4c7811adaa112dc05f693e6a4e0cc5a
Merge: e56cb99 d105e95
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Nov 15 19:57:27 2011 +0000

    Merge "Fixes LP Bug#885341 - Test failure in TestImageCacheManageXattr"

commit 88780460895ccf77747c2db4450919e9daa17020
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Mon Nov 14 18:40:17 2011 -0500

    Fixes LP Bug#837817 - bin/glance cache disabled
    
    This patch removes the cache management commands
    from the main bin/glance client and puts them in
    a bin/glance-cache-manage program. It also adds
    a number of cache management calls to manage the
    cache queue via the HTTP API.
    
    The reason I moved the cache management commands
    into a separate utility is that I'm thinking towards
    the future, where we have a separate admin API, and
    having a separate management utility seemed like the
    best way to go.
    
    Change-Id: Ic916a72f39516a06be27ea6c8ef69eb9e1a70936

commit e56cb998c578ff1b6b0ba47d3f693c871db6c7fa
Author: Rick Harris <rconradharris@gmail.com>
Date:   Tue Nov 15 07:11:36 2011 +0000

    Separating add vs general store configuration.
    
    Fixes bug #888816
    
    Change-Id: Ic8ce8956f28e07a4c67026bff8da7fa7512b7839

commit d105e954a82030cac21a1e5461ae8f507af54758
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Mon Nov 14 13:54:22 2011 -0500

    Fixes LP Bug#885341 - Test failure in TestImageCacheManageXattr
    
    This bug was due to insufficient checking that not only was
    python-xattr installed, but also the device that the image
    cache dir lives in is actually able to have xattrs written
    to files (user_xattr in fstab). The fix adds a number of checks
    for xattr support on the device, both in the image cache configure()
    methods and in the test cases themselves (using @skip_if_disabled)
    
    Adds a functional test case for queue/prefetch of images into
    the image cache.
    
    Change-Id: I09b3d008fc00564031b0534155430ed0856e9e9c

commit 9657fd258152e85311480ac2f68f4539ca9ef42a
Merge: cc4e83b f394327
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Nov 11 19:11:29 2011 +0000

    Merge "Making prefetcher call create_stores."

commit f394327f3869b8b820f1fdd345c7e6073dd82820
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Nov 11 18:39:31 2011 +0000

    Making prefetcher call create_stores.
    
    Fixes bug 888383
    
    Change-Id: Ia3adc6a30f16f889cd344f8cb3fca4a071871fe4

commit cc4e83bc8988711f0a3dcc996c3db4bd23cafd65
Merge: a18e60c 94dcf3a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Nov 11 18:17:19 2011 +0000

    Merge "Using Keystone's new port number 35357."

commit a18e60c4aa1801147ce80581f19aefc2b4b606cf
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Nov 11 17:53:54 2011 +0000

    Fix handle get_from_backend returning a tuple.
    
    Fixes bug 889182
    
    Change-Id: Ieecb4cc5653be6c4e4004bf8c8d95c8d287fb7ae

commit 7cb8d131bff574e9a62e2ed08e227cc2f0639ed3
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Nov 11 00:51:58 2011 +0000

    Casting foreign_keys to a list in order to index into it.
    
    Fixes bug 888839
    
    Change-Id: I66307cb355120b992913c8a1d8d5855b30f70504

commit 94dcf3acd0b3ef7adcb61b90bf4bdcc733cf61ac
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Nov 10 23:33:45 2011 +0000

    Using Keystone's new port number 35357.
    
    Fixes bug 888753
    
    Change-Id: I22894a31ee54edd6d00ac3458ea4a2f8842aa4a0

commit 0a394707bee38182d980b2ea1906c2aaa6f1c389
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Nov 10 23:22:46 2011 +0000

    Adding admin_token to image-cache config.
    
    Fixes bug 888802
    
    Change-Id: If1fa7c4a6ba09b86ddba0ceff9a922aa6a9d27af

commit 5885b619adc8dcea3f76ceb0430cb58aa888f476
Merge: 4213a1e 1d2e290
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Nov 10 21:43:38 2011 +0000

    Merge "Gracefully handle image_cache_dir being undefined"

commit 4213a1e9dabda4e9174678ce46a0d80da38ded3e
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Nov 10 15:47:05 2011 -0500

    Removing assertGreaterEqual
    
    Python 2.6 doesn't support this, so we should use assertTrue
    instead. Fixes bug 888711
    
    Change-Id: I78a0603bc4979ae3831394ea57f12fd328e03573

commit 48d407932c9688c8efd7b84f90463f0fd792f859
Merge: fb7a42c 854d66e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Nov 10 19:08:23 2011 +0000

    Merge "Adding tests to check 'glance show <ID>' format"

commit fb7a42cf0be3ab45e4bcc075a7b50338eb67d4c2
Merge: 0135c42 1f979ca
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Nov 10 18:10:06 2011 +0000

    Merge "Allow glance-cache-* find their config files"

commit 0135c4265380988a5a02b1cefa837b919fd1a8f4
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Nov 10 10:33:07 2011 -0500

    Correcting image cleanup in cache drivers
    
    Fixes bug 888382. Includes some removal of unused code.
    
    Change-Id: I53923bcf1fe13d63f7242cf328eb53e37d28285e

commit 854d66ec65caeda872163e17ececc3dc8fa0f710
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Nov 9 21:06:35 2011 -0500

    Adding tests to check 'glance show <ID>' format
    
    Prevent regression on bug 888370
    
    Change-Id: I7dedc31cd19c242af25b8a947dbe936a1ed2eb13

commit 98cefb7fc8430ad92b002d2300fd2085c71c9750
Author: Dan Prince <dan.prince@rackspace.com>
Date:   Wed Nov 9 20:47:27 2011 -0500

    Update 'glance show' to print a valid URI. Fixes bug #888370.
    
    Change-Id: Ibe8d7974eb2dfca79953b473b904df55daafa748

commit 1d2e29063f359a8187fbcc39d4d00ce203c6193c
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Nov 9 20:43:03 2011 -0500

    Gracefully handle image_cache_dir being undefined
    
    This abstracts out the 'set_paths' method of our two cache drivers into the
    base driver for now. It raises an exception when image_cache_dir is not
    defined. Fixes bug 888340
    
    Change-Id: Ib0be8c9b29ba1efebd03a0cdb8d001a003fc236f

commit c7f7040836a56872e92ac33009ebbc45f831f4e9
Merge: 2c66c69 ec99ac3
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Nov 10 01:04:07 2011 +0000

    Merge "Add some test cases for glance.common.config"

commit 2c66c6972de9bd5c364228061bf3de27aad746fe
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Tue Nov 8 21:34:01 2011 +0000

    Remove unused versions pipeline from PasteDeploy config
    
    Since the version negotiation middleware was introduced, versions
    pipeline app in the config is unused. Consequently, the versions
    app factory is unused too.
    
    Change-Id: I2d50432de215e51c1e52f8d68eaa0820e9b5bd0b

commit 1f979ca757162b55bc120eb87990f70819a4266f
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Wed Nov 9 22:51:20 2011 +0000

    Allow glance-cache-* find their config files
    
    By default, glance-cache-cleaner looks for glance-cleaner.conf but
    its actual config file is glance-cache.conf.
    
    Change the find_config_file() argument to conf_name and make it an
    optional argument to load_paste_app(). This allows us to specify
    a different config file for the glance apps than their app name.
    
    find_config_file() is also changed to raise an exception if no
    config file is found.
    
    Change-Id: Iec71218f5b2f0a7f057ea02f4549bd743892cc65

commit ec99ac38ae80bded04b18b5807fe2d9cdac1a432
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Wed Nov 9 22:51:20 2011 +0000

    Add some test cases for glance.common.config
    
    Test cases cover find_config_file(), load_paste_config() and
    load_paste_app()
    
    Change-Id: I2b5feea90881ccf80ac3c04b909686409a0a5c0e

commit b82998684ac969d1639b6f002e2040522fb43cf7
Merge: 3f33db7 2a5a0e9
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Nov 9 22:40:01 2011 +0000

    Merge "Fixes LP Bug#878411 - No docs for image cache"

commit 3f33db71bbd25dd3ce323c2d962e2a3a450219e7
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Nov 9 16:10:45 2011 -0500

    Fix name error in cache middleware
    
    Fixes bug 888284
    
    Change-Id: I9ecb19901feabc5da0c5bc35e8535530e76e08a9

commit a7db2db948626e6727a88f50319306bf48dcc1d9
Author: Dan Prince <dan.prince@rackspace.com>
Date:   Wed Nov 9 14:26:11 2011 -0500

    Check to make sure the incomplete file exists before moving it during
    rollback. Fixes bug #888241.
    
    Change-Id: I98bca574a26f9ab7173ac593d3b32b68d78d2360

commit f6d8437d5bdc81309f850a8d6f9628438b5353da
Author: Dan Prince <dan.prince@rackspace.com>
Date:   Wed Nov 9 13:26:11 2011 -0500

    Fix global name 'sleep' is not defined in wsgi.py. Fixes bug #888215.
    
    Change-Id: I02a43dfaf3cb0505e14b7f942bb64f3e94dbf4fa

commit 2a5a0e9a355e64545da3165c1f2aea049e0eb9fa
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Tue Nov 8 11:50:04 2011 -0500

    Fixes LP Bug#878411 - No docs for image cache
    
    Adds documentation on managing the image cache
    
    Adds a simple CLI program to queue an image for
    caching.
    
    Change-Id: I2b4c9708c521fdcfaf1c6b8f07505e130923c4b7

commit c8de988a8d8f695d32cacb088ff4bc8b5bb6c2fc
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Tue Nov 8 21:45:55 2011 +0000

    Fix typo in the cached images controller
    
    Change-Id: Iffd7bf6d476b7422baa519066885688e49af8eaf

commit 8f122d954bb35d18f0afb38aa2822cd1741f05f0
Author: Mike Lundy <mike@pistoncloud.com>
Date:   Tue Nov 8 10:57:27 2011 -0800

    load gettext in __init__ to fix '_ is not defined'
    
    gettext.install needs to be run on every potential entrypoint; this
    resolves bug #885529 (the python standard library includes a noop
    gettext library for this purpose). This is also how nova does it.
    
    Change-Id: I4ceaa4782461ebf6d27836336f288d79ba15cf2d

commit 5e6fb33b22c868e8ce2638198c27f3e3a099318a
Author: Stuart McLaren <stuart.mclaren@hp.com>
Date:   Fri Oct 28 15:58:49 2011 +0100

    Adds option to encrypt 'location' metadata.
    
    Implements blueprint swift-location-credentials
    
    When the new option is enabled the location metadata
    (which may include user credentials) is encrypted
    before being sent to the registry server.
    
    Change-Id: I072e3f5c81f187435b1c156627076d5fde087af5

commit 2674e8bbbcd340d2161c08d272b57acd18684eb8
Author: Tomas Hancock <tom.hancock@hp.com>
Date:   Thu Nov 3 12:07:34 2011 +0000

    Fix LP Bug#885696 two issues with checked_iter
    
     The error message raised by IOError needed %locals() added
    
     If there is no cache in the pipeline image_meta['size'] appears to be of
     type str on my system. Thus the compare of expected_size and bytes_written
     always failed even when the values should have matched.
     Unconditionally convert expected_size to int to resolve this.
     Curiously image_meta['size'] is of type int if the cache is in the pipeline.
     This latter fix could be removed if the typing is resolved
    
    Change-Id: I05eadce2b5ceb8eb7939acb41668aff089270e21

commit bc7aeb4a0a1295f90f7ea8824a1c8bf5313fafb7
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Wed Nov 2 11:18:16 2011 -0500

    Fix Keystone API skew issue with Glance client.
    
    Fixes bug 878927 by applying Roman Sokolkov's patch.
    
    Change-Id: I9877131c7df65a58e75e6be47f29e9b0a0c2705e

commit 268450cddff0b0cd61c48f1160d625272ef9b2f0
Author: Brian Lamar <brian.lamar@rackspace.com>
Date:   Wed Nov 2 12:04:29 2011 -0400

    Fixed test failure in Python 2.6.
    
    A recent commit by myself broke tests in Python 2.6...this fixes
    the issue I created.
    
    Change-Id: I01eea54cc318d265de6c17fb18568ebdbbaf3acb

commit cef073049a70b9d6b5bf90678890924e1c3abb7a
Author: Brian Lamar <brian.lamar@rackspace.com>
Date:   Fri Oct 14 16:46:14 2011 -0400

    Glance redirect support for clients.
    
    Includes functional tests, and small re-working of the BaseClient class.
    
    (Patch Set 2) Updated wrapped to be more explicit about what it is doing.
                  To be clear, this is not a general-purpose decorator but a
                  specific decorator for the _do_request method of BaseClient.
    
    (Patch Set 3) Updated to slightly refactor the _do_request call based
                  on the greate feedback which pointed out after a redirect is
                  encountered the client will still be 'pointed' to the redirect's
                  host/port/etc. This issue should be solved now and test written.
    
    (Patch Set 4) Fixed PEP8 issue
    
    Change-Id: I95a93eb0d920ce57d260423d130eae178705eca3

commit 2e953d684adb5713f3803331768e29daac568c2f
Merge: 25da026 2418efd
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Nov 1 20:15:05 2011 +0000

    Merge "Fixes LP Bug#882185 - Document Swift HTTPS default"

commit 25da02654a288704469562ced24ff3cd70764beb
Merge: b20fef5 dcc8847
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Nov 1 20:01:50 2011 +0000

    Merge "Fixes LP Bug#884297 - Install docs should have git"

commit b20fef5ac1d06fb092562d3c2e4ae6ab5353ce46
Merge: bd00433 25bae72
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Nov 1 16:59:18 2011 +0000

    Merge "Add "import errno" to a couple of files."

commit 2418efd7b79ee7703ee8270b0f48b1fcb7819829
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Tue Nov 1 12:32:53 2011 -0400

    Fixes LP Bug#882185 - Document Swift HTTPS default
    
    Documentation should mention Swift auth address
    HTTPS by default.
    
    Change-Id: Ibe0fc1c3590961eb4e025a2fc86b54ac82d9d63d

commit dcc884708a1a08dcbc7d39975dc8f488ca090a93
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Tue Nov 1 12:28:12 2011 -0400

    Fixes LP Bug#884297 - Install docs should have git
    
    Updated installation docs to reference Git, not Bzr/LP
    
    Change-Id: I166e10efafd8d0941e5239671668841e863718e9

commit 25bae72c254242839766eced9f457ee56c2a3131
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Tue Nov 1 11:22:48 2011 -0500

    Add "import errno" to a couple of files.
    
    Two files were missing "import errno"; added it.  This fixes
    bug 884382.
    
    Change-Id: If6e6eea33f5db91e317e4c874f74b268bd34e7f6

commit bd00433233ef2eb19a923b47db30dd43da22d741
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Nov 1 11:14:59 2011 -0400

    Consolidate glance.utils into glance.common.utils
    
    Change-Id: I2512b1d3d47f7d3f45707aa5774d9b4b3cb5c26e

commit 45c72807835fe884901c49652b70701ecfc0e475
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Nov 1 10:14:36 2011 -0400

    Correcting exception handling in glance-manage
    
    Fixes bug 884432
    
    Change-Id: I76c0a97e502dd05b4c56c84fa640d1f0e0cd48ae

commit 1ccc0e2f132d80cdfc480a601d9c2b3c5184bff7
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Fri Oct 28 17:01:38 2011 -0400

    More cache refactoring - Management Middleware
    
    Fixes LP Bug#883236 - Cache management needs refactoring
    
    Refactors cache management middleware by simplifying
    the middleware to image cache calls. The middleware
    now only contains calls for retrieving records of
    which images are cached, queueing an image to be
    cached, deleting a single cached image, and deleting
    all cached images. I removed the special calls for
    reaping invalid or stalled images, as that is handled
    by the cache cleaner utility...
    
    Adds functional test case with caching and cache
    management middleware enabled.
    
    Made a slight change to the way the functional test
    creates a config file: now it adds the configuration
    files used to start servers to $TEST_DIR/etc/$SERVER.conf
    so that test runner can see the config files that
    caused failures for tests.
    
    TODO: Add test case for queue, then run prefetcher, then
    check image is cached...
    TODO: Add docs for cache management API
    TODO: Make bin/glance gracefully handle cache not existing
    
    Change-Id: I76e95ffeeabc079b48b5ce2aeb6520cbdbf6d1e1

commit 6970aa883aaeba8f37cec75f3e07499c57ff702a
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Fri Oct 28 11:45:57 2011 -0400

    Fixes LP Bug#882585 - Backend storage disconnect
    
    Adds a checking iterator to wrap the main image_iter
    returned via the show() method on the images controller.
    This checked_iter validates that the image is fully
    transferred from the backend storage and raises an
    IOError if the chunked reads do not transfer the expected
    number of bytes.
    
    Change-Id: Icf9b303aa8c2c9c728581d59029fd2c29ddb6da5

commit ceab6b3ed4d46aa19ee33dd69560a695c1cdd141
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Sep 27 14:25:44 2011 -0400

    Convert image id value to a uuid
    
    This just changes the value of image.id, leaving the key name alone. We also
    enforce image ids provided on an image create be a uuid. Implements
    blueprint uuid-image-identifiers
    
    Change-Id: I22ba69550ccbc04a24d680748d60414d2d0f1a99

commit 071a880f2419ef6020440b1271a17538b28e423f
Merge: 5677bfa 39c8557
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Oct 26 17:01:27 2011 +0000

    Merge "Adds Driver Layer to Image Cache"

commit 5677bfa44d1d3cbf0f764b09947df454f916b8d0
Merge: 258aa13 e46c0a6
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Oct 26 16:28:50 2011 +0000

    Merge "Removing glance-upload"

commit 258aa1356ca0e3e6de0b1cdd54b3736e592d3995
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Oct 25 22:41:42 2011 -0400

    Remove 'location' from POST/PUT image responses
    
    The 'location' field is already removed from GET calls, so we should
    also remove it from POST/PUT operations. Partially fixes bug 880910.
    
    Change-Id: I4f7d8d0309c8a3e10d0c2a99573ca0fa808c93be

commit e46c0a620619758e22f7f73e7668ffe5c95d722b
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Oct 25 22:02:10 2011 -0400

    Removing glance-upload
    
    The glance-upload tool targets a very specific use-case that is easily
    handled by simply using the standard glance client. It's not worth keeping
    around. This addresses bug 767344.
    
    Change-Id: Ie7cf42ba517b744a2a440deb15336c0ee372b2e7

commit 39c855743423175beca6955ed30c15b9c40f9129
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Fri Oct 21 16:10:32 2011 -0400

    Adds Driver Layer to Image Cache
    
    Fixes LP Bug#879136 - keyerror: 'image' when doing nova image-list
    Fixes LP Bug#819936 - New image cache breaks Glance on Windows
    
    This patch refactors the image cache further by adding an
    adaptable driver layer to the cache. The existing filesystem-based
    driver that depended on python-xattr and conditional fstab support
    has been moved to /glance/image_cache/drivers/xattr.py, and a new
    default driver is now based on SQLite and has no special requirements.
    
    The image cache now contains a simple interface for pruning the
    cache. Instead of the logic being contained in
    /glance/image_cache/pruner.py, now the prune logic is self-contained
    within the ImageCache.prune() method, with pruning calling the
    simple well-defined driver methods of get_least_recently_accessed()
    and get_cache_size().
    
    Adds a functional test case for the caching middleware and adds
    documentation on how to configure the image cache drivers.
    
    TODO: cache-manage middleware...
    TODO: cache management docs
    
    Change-Id: Id7ae73549d6bb39222eb7ac0427b0083fd1af3ec

commit d521d6529e0d0cdd1138823e0ee5be0e5d87e21c
Author: Brian Lamar <brian.lamar@rackspace.com>
Date:   Mon Oct 24 16:25:21 2011 -0500

    Removed 'mox==0.5.0' and replaced with just 'mox' in tools/pip-requires.
    
    I was getting an error from pip stating: Could not find a version that
    satisfies the requirement mox==0.5.0 (from versions: ).
    
    Potentially pip is messed up, but all tests seem to run with the latest
    version of mox (0.5.3).
    
    Change-Id: Id6a38766290a20d752177e8d272284b7b632156b

commit ea748f9131c082d7048593359e9557b0779e3a4c
Merge: 8f926f7 17b79b0
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Oct 24 17:00:11 2011 +0000

    Merge "Add .gitreview config file for gerrit."

commit 8f926f71903616464e78c63cfc68624c1fe423b6
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Oct 24 12:17:42 2011 -0400

    Removing duplicate mox install in pip-requires
    
    Change-Id: I62864aa1d177a758c2cac3bc3e768c5e833703e9

commit 17b79b0220ab5de9e8ba4911764fe0d59d843a5f
Author: James E. Blair <james.blair@rackspace.com>
Date:   Thu Oct 20 13:44:58 2011 -0400

    Add .gitreview config file for gerrit.
    
    Change-Id: I61524c310738b77df8809495ce5b7822e76562f1

commit efcdac3649a413c5b06ed1661545a2970f71b1fd
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Oct 20 21:54:06 2011 -0400

    Making TCP_KEEPIDLE socket option optional
    
    Not all implementations of the python socket library support
    TCP_KEEPIDLE, so only try to set it when supported. Fixes bug 879195.
    
    Change-Id: I2f062a346a60c69f52d23f70332d7c9da4ecdf35

commit 5ae43a0e15d8cdb0f217e5dd143834915c7d8fe6
Merge: d874893 ad9e9ca
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Oct 20 15:32:46 2011 +0000

    Merge "Overhauls the image cache to be truly optional"

commit d874893ed409838737ab5f21ff8fdd2712647402
Merge: e764565 56e15f6
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Oct 20 14:40:13 2011 +0000

    Merge "Fixes LP Bug#844618 - SQLAlchemy errors not logged"

commit ad9e9ca3f741af714b9faf46224bf12e4a2693bd
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Tue Oct 18 09:27:27 2011 -0400

    Overhauls the image cache to be truly optional
    
    Fixes LP Bug#874580 - keyerror 'location' when fetch errors
    Fixes LP Bug#817570 - Make new image cache a true extension
    Fixes LP Bug#872372 - Image cache has virtually no unit test coverage
    
    * Adds unit tests for the image cache (coverage goes from 26% to 100%)
    * Removes caching logic from the images controller and places it into
      a removeable transparent caching middleware
    * Adds a functional test case that verifies caching of an image
      and subsequent cache hits
    * Removes the image_cache_enabled configuration variable, since it's
      now enabled by simply including the cache in the application
      pipeline
    * Adds a singular glance-cache.conf to etc/ that replaces the
      multiple glance-pruner.conf, glance-reaper.conf and
      glance-prefetcher.conf files
    * Adds documentation on enabling and configuring the image cache
    
    TODO: Add documentation on the image cache utilities, like reaper,
          prefetcher, etc.
    
    Change-Id: I58845871deee26f81ffabe1750adc472ce5b3797

commit e76456532c5dadbc3039b33f595878c2ab8f894e
Merge: d3a31b3 a9d4cdd
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Oct 19 15:05:53 2011 +0000

    Merge "Fixing functional tests that require keystone"

commit a9d4cddcd2c6c5eaab165c22e7e50079001bb1fb
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Oct 18 18:39:32 2011 -0400

    Fixing functional tests that require keystone
    
    Fixes bug 878200. Tenants switched to be keyed on id rather than name, and there was one error in the members controller.
    
    Change-Id: Ib14015f9ab852107ea368e3aa330de9d15f03527

commit 56e15f6993e85376eb6e3fb4928b0cb8f6df1fda
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Thu Oct 13 11:56:19 2011 -0400

    Fixes LP Bug#844618 - SQLAlchemy errors not logged
    
    Logs any import errors or SQLAlchemy connection failures
    to the glance registry log so that there is some indication
    that a driver module is not installed or there is a problem
    with the sql_connection configuration string.
    
    Adds test case that verifies log output and error raised.
    
    Change-Id: Ib86c353350530d6de62e577df57602d1762879f9

commit d3a31b372ec0ad5955534598135782ce043f6eea
Merge: 6ca5c56 eec5c1a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Oct 18 14:48:01 2011 +0000

    Merge "Adds SSL configuration params to the client"

commit 6ca5c56079a173c00ae2876c1fd05d82dfe1a9e9
Merge: 9385a39 5b27c66
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Oct 17 17:38:58 2011 +0000

    Merge "Better document using Glance with Keystone."

commit 9385a39bec46ee97ca7f8215b8cfd619590e6484
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Thu Oct 13 13:09:35 2011 -0500

    Additions to .gitignore
    
    Installing or testing glance adds several files that are not currently
    ignored by git, leading to cluttered displays of modified files.  This
    causes the 'build', 'dist', and 'glance.egg-info' directories to be
    ignored, reducing the clutter.
    
    Change-Id: I3f0ca3f99fcf6cfe0480fbf5755908ee411552ea

commit 5b27c663b932c30aa7e40a84e55b85223a1d9d2f
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Thu Oct 13 12:02:59 2011 -0500

    Better document using Glance with Keystone.
    
    Addresses bug 871803 by expounding on what configuration should
    look like.  Also fixes the example config files, which generally
    had the authentication setup completely wrong.
    
    Change-Id: I44b2b8bd340ca95b5a2c2e9408797b0308000a65

commit 6aacf2388a03a138502d1ed05dce6c3bfb0502cc
Author: Tomas Hancock <tom.hancock@hp.com>
Date:   Wed Oct 12 16:08:10 2011 +0100

    Fixes LP Bug#872276 - small typo in error message
    
    Add a missing s to a % formatted print statement
    Add my name to Authors file
    
    Change-Id: Ib086fb9bee6f55a3bd89f3108269050c6eb0f8b9

commit eec5c1afa15ae80fa9403fb6bc3271e902afb070
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Tue Aug 9 16:08:50 2011 -0400

    Adds SSL configuration params to the client
    
    * Adds SSL configuration params to all client classes
    * Adds unit test for bad SSL client configuration
    * Refactors the registry methods to no longer need
      configuration options passed, and to configure the
      registry client once, on images.Controller.__init__
    * Adds glance-api.conf options for SSL support in
      registry client connections.
    * Adds SSL CA file socket wrappers via a client auth
      HTTPS connection class
    * Adds server SSL support, but not functional tests
      for SSL support yet. Still need to research self-signed
      cert generation for tests...
    * Updates documentation for bind and startup options
    * Adds functional test case for secure communication
      with API server stood up with SSL supprt. Note it is
      not very DRY. There is some DRY cleanup to do in the
      future...
    
    TODO: Integrate options with bin/glance CLI tool
    
    Change-Id: Ie9fcd36337cc93fd5beeabb9186ad5e93ae2a0f0

commit e2555e1665a8d12d2699928a692d1ef62ae41ed6
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Tue Oct 11 12:57:40 2011 -0400

    Increases test coverage for the common utils
    
    Adds test case for the isotime stuff and removes
    unused legacy utility functions
    
    Change-Id: I6fa2bb6e2699b1050039fa03d1c0a5ecbd651d73

commit 53db059772d8c89facd17970fc967ef2fa1866c5
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Mon Oct 10 13:44:22 2011 -0400

    Refactoring/cleanup around our exception handling
    
    Fixes LP Bug #820643 - import_class() does not
    report original exception.
    
    * Makes ALL exceptions now use base exception class
    * Removes unused exception classes from Nova
    * Removes unused code in glance.common.utils
    * Adds unit tests for bool_from_string and import_class
    
    Change-Id: If6775eb3ce85390bc5d579dff6c59c6066e77e9b

commit dc0e6151c08160c3bde3e633e70b638c69b6c330
Merge: a915076 ee6f91e
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Oct 10 15:52:37 2011 +0000

    Merge "Port Authors test to git."

commit ee6f91ed97a7d94febdf9e6cd985a4c225be06b8
Author: Monty Taylor <mordred@inaugust.com>
Date:   Fri Sep 23 17:43:46 2011 -0400

    Port Authors test to git.
    
    Change-Id: I27bb6b3951422ad32e5e0225765b1056c5b3ffc5

commit a9150768884670fb8b15fd295d7a544e8b0127da
Merge: fe1f165 25e2ba4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Oct 6 13:16:46 2011 +0000

    Merge "Fixes LP Bug#860862 - Security creds still shown"

commit fe1f1650a25acb3cf0a5654e32326d6a2fb02e22
Merge: 4230051 7c4d935
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Oct 1 17:50:21 2011 +0000

    Merge "Refactoring registry api controllers"

commit 42300518eab9982596a5eb774cf65a2d04e00395
Author: Josh Durgin <josh.durgin@dreamhost.com>
Date:   Thu Sep 22 13:02:03 2011 -0700

    Add RBD store backend.
    
    To use this you'll need the latest version of Ceph from git,
    which will become version 0.37.
    
    Change-Id: Ia2126395525759eb8c11df055bdc6f286dea97b9

commit 25e2ba4e6a60956cfd7f8ca9457698fd0f4d3747
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Thu Sep 29 16:00:44 2011 -0400

    Fixes LP Bug#860862 - Security creds still shown
    
    This removes the X-Image-Meta-Location entirely from
    GET /images/<ID> and HEAD /images/<ID>
    
    Previous fix only removed from GET /images and GET /images/detail.
    
    Doh.
    
    Change-Id: Ib6c124e196688a77a3a0090bf9174a1daffb78bb

commit e068296d6d39059ea1505e8ca5e9b86432c5228e
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Sep 28 16:51:30 2011 -0400

    Extract image members into new Glance API controller
    
    Replacing method names with more common controller actions and simplifying the API router. Also refactors how members.py
    imports and uses webob.exc.
    
    Change-Id: I975b2095980cfc56408fa76b47cf830cdd650ff2

commit 7c4d93502697c03d244a57f47cc90a8db6408df1
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Sep 29 10:01:46 2011 -0400

    Refactoring registry api controllers
    
    Break up images and members controllers in the registry api and restructure it to be more like the glance api. This is
    in preparation for the future split.
    
    Change-Id: I81e6c74815cf15adebb526b31614fd2e63982c3d

commit 47c03a348031d25fafd56ed3c74c5376f21b1cf0
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Sep 27 15:43:33 2011 -0400

    Returning functionality of s3 backend to stream remote images
    
    Fixes bug 860872. Also refactoring swift remote image tests to pull location data from registry now that it is unavailable from the main
    api.
    
    (Update) Fixed minor feedback for Waldon from Vek.
    
    Change-Id: I159958da8ed4187da2e22392fe341042eedfd056

commit 634e6932a39bce348594aba1607ba4603ae5f382
Merge: 2b43f89 4847ceb
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 27 13:59:48 2011 +0000

    Merge "Make remote swift image streaming functional"

commit 4847ceb59fe35481fd42ddc9369b7d3814eca721
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Sep 26 17:37:45 2011 -0400

    Make remote swift image streaming functional
    
    Fixes lp 850425
    
    Change-Id: I117d45f7d5b1991296736b7915857e8764aad30d

commit 2b43f89e2cb7e0d89b9f2a957b4ae25c2cb496d7
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Sep 26 16:57:59 2011 -0400

    Improving swfit store uri construction
    
    Fixing bug 860010
    
    Change-Id: I1b414fafb492f3cafd5a1e857d55e8a8d3fa9a8a

commit 1bb0600efb444fa4d8a27e876a8c002324746c1e
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Fri Sep 23 17:28:50 2011 -0400

    Fixes LP Bug #850685
    
    Handle 300 Multiple Choices gracefully in client
    
    This patch adds a new exception MultipleChoices that
    is now raised when the client encounters a 300 from the
    server, with a helpful error message indicating the likely
    cause is that the caller has forgotten to include a version
    string in the request URI.
    
    Change-Id: I3ccc2686bea30a770751fde605c78a3b7c5930b6

commit c81ebbcc5a985857e6c86c4b068c15585ddcad80
Author: Brian Lamar <brian.lamar@rackspace.com>
Date:   Fri Sep 23 16:30:01 2011 -0400

    Do not allow min_ram or min_disk properties to be NULL and if they are None, make sure to default to 0. Fixes bug 857711
    
    Change-Id: I0660b39b19a219e7999468839c0672e0c4911d88

commit 8805302edb452d0d57f49634bcb2a716e42590cd
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Sep 7 14:12:05 2011 -0400

    Implementing changes-since param in api & registry
    
    Change-Id: I1d462b555f20ae6b28968b257cc5c22de65276e7

commit e7d06e409e9cd3fbd92c50d7eb32682fe3a7df23
Author: Rick Harris <rconradharris@gmail.com>
Date:   Tue Sep 20 18:06:48 2011 -0500

    Documenting nova_to_os_env.sh tool
    
    Change-Id: I4a416e01e4333b43a75944ace01e8b0abe3ec2a3

commit 20b7c6975872bfa157f760e6fbe15c135cdd36e6
Author: Alex Meade <alex.meade@rackspace.com>
Date:   Tue Sep 20 14:24:50 2011 -0400

    Added min_disk and min_ram properties to images
    Fixes LP Bug#849368
    
    Change-Id: I3e17370537144d117d99af5fa5a21df830b7c7ed

commit ec4af4bea756574fc5d834d4bb079fc856961d55
Merge: e7ec4a1 ef19685
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Sep 19 20:27:15 2011 +0000

    Merge "Fixing bug 794582 - Now able to stream http(s) images"

commit ef196858801d64cef7b0ef0789e01526718bc3ce
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Sep 15 17:30:08 2011 -0400

    Fixing bug 794582 - Now able to stream http(s) images
    
    Change-Id: Ic04dfe32acc21ff068ef0964541c47eee41fbe3b

commit e7ec4a1d02d30999c437e41735ac491dc1376965
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Mon Sep 19 14:42:11 2011 -0400

    Fixes LP Bug#755916 - Location field shows creds
    
    Removes the Location field from the return of the
    API server's GET /images/detail and GET /images/<ID>
    calls. The Registry server API was unchanged, as the API
    server needs to call the Registry server in order to
    find location information...
    
    Change-Id: I914456ad3879f19fa0b55c8a89b8217c193193d8

commit 6c60376f9d2140c5a397e6fca7ab4c6ce7b91fc9
Merge: 5f14075 7ce40a7
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Sep 19 15:06:22 2011 +0000

    Merge "Fixes LP Bug #804429"

commit 5f14075081a3b9789a82df3d074b28d72041788b
Merge: f45db5e 4b5e795
Author: Jenkins <jenkins@review.openstack.org>
Date:   Sat Sep 17 21:45:58 2011 +0000

    Merge "Fixes LP Bug #833285"

commit 7ce40a7486b23a400dca4112c6ab36658912dcef
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Fri Sep 16 14:48:03 2011 -0400

    Fixes LP Bug #804429
    
    The try: finally: block which called conn.close() in the
    http store driver was flawed and the connection was not
    being properly released. This changes the
    http_response_iterator generator to accept the HTTP connection
    and close it on final yield.
    
    Change-Id: I545a7f5c93ccd196a99b50e8464778e075b549d8

commit f45db5e754cd30461f47fe1b65f8cf3681d05874
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Thu Sep 15 18:49:40 2011 -0400

    Fixes Bug #851216
    
    Fixes a recurring issue with tests that were
    decorated with the @runs_sql decorator where the
    file-based SQLite registry database used in those
    tests was not being properly cleaned up, which was causing
    some random-looking failures when python setup.py test was
    run for the DEB builders on Jenkins.
    
    According to Monty, files needed in testing do indeed need
    to be in MANIFEST.in, so I added the test_migrations.conf
    file to that. Sorry, BrianW!
    
    Change-Id: I6535b999921d159de5d957f6b70df3c13310e449

commit 4b5e795e085dd2ade9d2b8e93a0572878397d826
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Thu Sep 15 22:01:29 2011 -0400

    Fixes LP Bug #833285
    
    Large objects, uploaded to Swift using the large object
    manifest method, are uploaded in chunks/segments in the
    Swift store driver.
    
    Unfortunately, doing a DELETE on the object only deletes
    the manifest, leaving the chunks/segments orphaned. This
    patch makes the Swift store driver check for the existence
    of an object manifest, and if found, deletes all intermediate
    chunks, then deletes the object manifest itself.
    
    Adds a functional test to check the segments are actually
    deleted.
    
    Change-Id: Ib5787581a57e419393faca198d867db757fc03b3

commit 7268f2c991c8fab2064d6927898866fb62dee699
Author: Brian Lamar <brian.lamar@rackspace.com>
Date:   Thu Sep 15 11:44:52 2011 -0400

    Fixes bug 851016.
    
    Fixed test_migrations.py so that it runs migrations again. It will also now fail if test_migrations.conf cannot be found.
    
    Change-Id: I669cc1dda1dc247dc86c6e271b00d296f8445a15

commit 70a5e9c3e199fd860a0fe0345d91945631840410
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Sep 14 17:14:39 2011 -0400

    Fix keystone paste config for functional tests
    
    Change-Id: I67685911ae087e245b3622cde890263a14e875a1

commit 6396b78efcd49aa46c7d7206669123d23c07957c
Merge: 3cb7b9b 27b3df2
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 13 18:02:01 2011 +0000

    Merge "* Scrubber now uses registry client to communicate with registry * glance-api writes out to a scrubber "queue" dir on delete * Scrubber determines images to deleted from "queue" dir not db"

commit 3cb7b9b5a261ccc16bcd5b464114d957fda57f4e
Merge: d5099cc ee8c8ba
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Sep 13 16:11:10 2011 +0000

    Merge "Updating image status docs"

commit ee8c8ba8f532a7704a63f9b8572fe00942cdab19
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Sep 9 16:41:46 2011 -0400

    Updating image status docs
    
    Fixes lp bug#844932
    
    Change-Id: Iee4571a2ebdd295f4324e02cde65a96fb53aceb9

commit 27b3df281f8ce3a5fee7a32cd2cf4881b28ab819
Author: Jason Klker <jason@koelker.net>
Date:   Tue Aug 16 12:38:12 2011 -0500

    * Scrubber now uses registry client to communicate with registry
    * glance-api writes out to a scrubber "queue" dir on delete
    * Scrubber determines images to deleted from "queue" dir not db
    
    Change-Id: Ia5574fc75f1a9c763bdef0f5773c2c182932b68a

commit d5099cca70e20588ffd35b77b24785698269d3c9
Merge: 9337103 6cfff16
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Sep 12 23:08:10 2011 +0000

    Merge "Fixes LP Bug#845788"

commit 9337103675b502b18dc3f75e67e14a489e1ebcce
Merge: 3595cf7 be6d629
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Sep 12 15:48:32 2011 +0000

    Merge "Adding Keystone support for Glance client."

commit 6cfff16f2dc22a870bfe3808a7895dfbbaa11369
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Fri Sep 9 13:03:19 2011 -0400

    Fixes LP Bug#845788
    
    glance.client.image_update needed to calculate size so that Glance's Swift
    driver can do chunking properly for large objects.
    
    Change-Id: Iafe8034a710cff53a0caa3ae5e9ee3a3adda19f8

commit 3595cf750085e966cc8f9a6f3d7f12a01341a7bf
Author: Thierry Carrez <thierry@openstack.org>
Date:   Thu Sep 8 20:49:28 2011 +0200

    Open Essex
    
    Switch version to 2012.1
    
    Change-Id: I7a484997bbd033f11256cacc19a5a19c416c7eeb

commit 136310e63884d5b4f042df8bf37f2bdc88c44114
Merge: 706a533 22d7864
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Sep 8 16:06:44 2011 +0000

    Merge "Update paste config files with keystone examples. see ticket: lp839559"

commit 706a53396c7a6e7dc8fca9d48d23bd9fab31162a
Author: Adam Gandelman <adam.gandelman@canonical.com>
Date:   Mon Aug 29 14:36:10 2011 -0700

    Remove PWD from possible config_file_dirs.
    
    Resolves bug #828719, which can potentially cause problems depending on
    what $PWD commands are executed in.
    
    Amendment: Also update documentation accordingly.
    
    Change-Id: Ib2ec4bb07222e51c86b7d8f8ce1dd0e6bb342a64

commit 22d7864a41c2bc3178612b6ea879aaebd44b41df
Author: Dan Prince <dan.prince@rackspace.com>
Date:   Fri Sep 2 09:32:01 2011 -0400

    Update paste config files with keystone examples.
    see ticket: lp839559
    
    Change-Id: Ie5d5011a601962bcc79cf69ef8db11029fcb866e

commit be6d6294f9878f2f5ce37b5532d5afb9c6b03142
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Aug 26 22:25:49 2011 +0000

    Adding Keystone support for Glance client.
    
    Implements bp pluggable-auth
    
    Change-Id: I2a6e3b1ab4c50200ece64a2e07bf81e9e6467efd

commit 09ea2718a219b13ea9cd67bf80d8fe83b499e153
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Aug 30 23:43:33 2011 -0400

    Fix cached-images API endpoint
    
    The recent chages that renamed 'id' to 'image_id' in the cached_images controller broke the API. This reverts a couple
    of those changes.
    
    Change-Id: I83345f87c7e5f1e35ef6646cb360819d489ec256

commit 3cd46135c9926684858b08f4583844b7dbab1ba7
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Tue Aug 30 20:45:03 2011 -0500

    Bug fix lp:726864
    
    rename 'id' to 'image_id' to avoid conflict with builtin id function
    
    Change-Id: I79605275bf2607331f5b74076cb5689f071c92d5

commit b2381cc702efa4a70384be93f707774e46934451
Merge: 3b14923 d29d2fb
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Aug 30 21:48:11 2011 +0000

    Merge "Fixes Bug: lp825024"

commit d29d2fbea9bd8aa48d11cc3d999b1e4d4d1f1f8e
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Mon Aug 29 20:24:53 2011 -0500

    Fixes Bug: lp825024
    
    Added 'size' to the unsupported_fields array in image_add().
    
    Added a test case to functional/test_misc.py that tests for this bug.
    
    Change-Id: Ib223b31656cd75de0b95a0186ea907f93b6c943e

commit 3b149234e725ce902728cea293e325b9eaa771b0
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Mon Aug 29 11:09:25 2011 -0500

    Add functional tests
    
    Adds functional tests to confirm the integration of Keystone with Glance.
    Also adds bug fixes for issues discovered while creating the functional
    tests.
    
    Change-Id: Ie20f8c93a10fbbe085b2ea39373897a058572775

commit ecbcc09ce5c337a84d8adf19f957529c4f76a075
Author: Mark McLoughlin <markmc@redhat.com>
Date:   Thu Aug 25 12:20:51 2011 +0100

    Switch file based logging to WatchedFileHandler for logrotate
    
    Fixes lp:772397
    
    FileHandler opens the logfile at startup, keeps the stream open and
    continues to log to it forever.
    
    If logrotate decides to rotate the file, it will rename the original
    file and a new file is created with the same attributes as the original
    file.
    
    The problem is that the process is still writing to the original file,
    not the newly created file. Traditionally, system daemons respond to
    a SIGHUP by re-opening log files and logrotate can be configured to
    deliver this signal on rotation.
    
    However, python has an elegant solution. WatchedFileHandler monitors
    the inode for the specified log file name and, if that ever changes,
    it re-opens the stream.
    
    Nova already uses WatchedFileHandler to good effect. See:
    
      https://code.launchpad.net/~soren/nova/logrotate/+merge/50292
    
    Change-Id: I7f693f133d230d65d7c94ebf3a2ec0c8b362f993

commit 501b14bf94c7b24361a4bd424e4ada4c89df7753
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Mon Aug 22 14:43:27 2011 -0400

    Fixes LP Bug #827660 - Swift driver fail 5G upload
    
    Fixes LP Bug #827660 - Swift driver fails to
    upload image files greater than 5GB. The swift
    store driver was not using the large object
    manifest methods required to upload objects
    greater than 5GB into Swift.
    
    Adds configuration options to specify the
    size in MB that an image file should be considered
    for large object manifest, and a configurable
    chunk size. We use a disk buffer of this size,
    adding chunks of the image file into Swift and
    then after all chunks are saved, add the manifest
    to Swift.
    
    Change-Id: I4b4421aa1bba584ab242016a041e864ef19d0214

commit bcc7ae3b73c5d953ef04494d118de8904a1a64c6
Merge: 57cbac0 40b98d3
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Aug 24 15:14:38 2011 +0000

    Merge "Bug lp:829064"

commit 40b98d32a0ed235cc01fe85b3f6498ad3fdd8d6a
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Wed Aug 24 10:03:07 2011 -0500

    Bug lp:829064
    
    Removed the fetchfile() and execute() methods.. all tests are passing.
    
    Change-Id: If32dff06911e9224da2a31fbc53b92db1b7bb0ca

commit 57cbac057028537fca5af4ed8ffaea4be67e8c64
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Wed Aug 24 09:29:58 2011 -0500

    Bug lp:829654
    
    Assert was not actually validating return data from api query.
    
    Change-Id: I2db2863c749bfabba201ae2d733330b7a71bef2d

commit 3554d5a755c267fbfee2185f666178e61b14ee49
Author: James E. Blair <corvus@gnu.org>
Date:   Tue Aug 23 07:53:25 2011 -0700

    Update rfc.sh to use 'true'.
    
    true is /usr/bin/true os OSX but is in the path
    on both GNU/Linux and OSX.
    
    Change-Id: Ic54b0eb965f87ddb26e8f18e4b317b6a2e90d8d3

commit 9d005656a222bb7031e5ba85baad7b7ba9007c96
Merge: a5f4f89 b339983
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Aug 23 02:58:45 2011 +0000

    Merge "Add rfc.sh for git review."

commit a5f4f89d8432570a770627e0179437d6a38db754
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Sun Aug 21 22:20:33 2011 -0500

    Addresses glance/+spec/i18n
    
    Added gettext wrappers on logger and exception strings.
    
    Change-Id: Ia16fd6452dda4835662fe07d2acdc7b510715fcd

commit 748a8f98dda9b15f54951db110058f1b845c8bff
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Thu Aug 18 22:15:42 2011 -0500

    Addresses glance/+spec/i18n
    
    Added gettext wrappers on logger and exception strings.
    
    Change-Id: Ia17689a0f176af1605bb9e8ea5a95f813d231181

commit b339983ecd1868dcf3c02f74c78d240dd29decbf
Author: James E. Blair <corvus@gnu.org>
Date:   Fri Aug 19 12:00:42 2011 -0700

    Add rfc.sh for git review.
    
    Adding tools/rfc.sh which facilitates an easier git/gerrit workflow
    described at http://wiki.openstack.org/GerritWorkflow
    
    Adding it to the repository is a pre-requisite, instructions on how
    to start using it will be sent to the mailing list soon.
    
    Change-Id: I4086b7c1a9fce4283a196f3aeb00be90c30f0e2a

commit 4fa35070cea6edf6d4f8477cd462ffbc6a2b0b4f
Merge: 091aae8 1e4be06
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Aug 15 21:37:40 2011 +0000

    Merge "Add support for shared images"

commit 1e4be06cb21277c9be2687678e432b3033b7b718
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Mon Aug 15 16:20:49 2011 -0500

    Add support for shared images
    
    Change-Id: I3822a3841e1c10717c180052f929688b9f21a841

commit 091aae8a6ddbe0bbe31df3ead927248496c363c6
Author: Johannes Erdfelt <johannes.erdfelt@rackspace.com>
Date:   Fri Jul 22 15:43:44 2011 +0000

    Add notifications for uploads, updates and deletes
    
    Change-Id: I372f77fe2d1a575f2108c9b8d1f69301c0d5eb5e

commit 78c718a9f5a7ef80ead51f2a277d230ce4796753
Merge: 7f058d7 2b4369a
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Aug 15 17:00:37 2011 +0000

    Merge "Bug Fix lp:825493"

commit 2b4369a26ecefa3ef12c3b3cbfc8f3798e9fc126
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Fri Aug 12 17:32:32 2011 -0500

    Bug Fix lp:825493
    
    Added gettext support in glance/common/client.py
    
    Change-Id: I6933cae26646050de1ef7b05724d1c77fa88b2cf

commit 7f058d7c50b65c5485a27403e460643ca09a460e
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Sat Aug 13 14:07:38 2011 -0500

    Bug fix lp:824706
    
    Added gettext support in glance/tests/__init__.py
    
    Change-Id: I1c52e4e98fc3b24ff077ae1cda880aebc7b5ea00

commit c451de83b9e279745e47024a4d60677353a0052e
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Aug 11 20:15:33 2011 +0000

    Adds syslog support
    
    Change-Id: I05ef04c77b68f0c68d86ae49a5fee68c2f86c80a

commit 388f2919147e9350fff75f68876693e473c9dbfe
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Aug 11 18:43:23 2011 +0000

    Fixes image cache enabled config
    
    Change-Id: I3081968436d877c584b292dfb9e2b3ed48fadeb9

commit ef9c7cb8f8870a7bdb978fe1a9b045366e91053d
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Aug 10 14:31:49 2011 -0500

    Improves logging by including traceback
    
    Also tests webob body handling functionally.
    
    Change-Id: Ib734acd1f23a461e91b262a29e894beb47e19c8b

commit 65538040bbff5879b2acdff61bf7aa2872780f06
Merge: b00b637 8a33e24
Author: Jenkins <jenkins@review.openstack.org>
Date:   Wed Aug 10 15:35:36 2011 +0000

    Merge "Addresses glance/+spec/i18n"

commit 8a33e24311ee8844d2250b78d3c6caf15a3a4d75
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Sat Aug 6 12:28:27 2011 -0500

    Addresses glance/+spec/i18n
    
    Added gettext.install to glance endpoints, setup.py, and run_tests.py. Wrapped all exceptions in common/exception.py with gettext.
    
    Included fix for bug lp:823676.
    
    Change-Id: Ied4381e1676227afea857acd01f4754e6a181106

commit b00b6373e34109b73d72f6e6229f4f2f595b8af4
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Aug 9 14:46:30 2011 -0400

    casting image_id to int in db api to prevent false matching in database lookups
    
    Change-Id: Ibcb79f0e27840dc5ec9ad18e497714f85e47f6fe

commit 934b30c04baea39d7ecb3d445166d5ec76f45cb3
Merge: c951c8b 0a5fbb4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Tue Aug 9 18:26:58 2011 +0000

    Merge changes Id20d6b1d,Ib0272500
    
    * changes:
      Removes faked out datastore entirely, allowing the DB API to be unit tested.
      Consolidates the functional API test cases into /glance/tests/functional/test_api.py, adds a new Swift functional test case, verified that it works on Cloud Files with a test account.

commit c951c8b51500aa74e76ab249c45092046b6fa462
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Tue Aug 9 09:58:01 2011 -0500

    Addresses Bug lp:781410
    
    Currently API throws a 500 error if it attempts to return an image
    that has been removed from the filesystem but still lives in the DB.
    Fixes it so the API now throws a 404 error when this happens.
    
    Change-Id: I8fcf53de7760d462b5f938c71cb29ee837d172af

commit 0a5fbb4cb4f881b9d719a18eec20bd5245803764
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Mon Aug 8 20:16:32 2011 -0400

    Removes faked out datastore entirely, allowing the
    DB API to be unit tested.
    
    Change-Id: Id20d6b1d84e2a3e0cd15d8fce2d9df37f51c5dbc

commit 2105d4efa7288c23d89a48fd584aa0853254f19b
Merge: 6cc1a15 72e2e31
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Aug 8 21:06:42 2011 +0000

    Merge "Add @skip_if_disabled decorator to test.utils and integrate it into the base functional API test case. The S3 functional test case now uses test_api.TestApi as its base class and the setUp() method sets the disabled and disabled_message attributes that the @skip_if_disabled decorator uses."

commit c42faa9e3359bcbf988c345349f311f78e8371e1
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Mon Aug 8 16:59:36 2011 -0400

    Consolidates the functional API test cases into
    /glance/tests/functional/test_api.py, adds a new
    Swift functional test case, verified that it works
    on Cloud Files with a test account.
    
    Change-Id: Ib0272500134e89d22d01240c3eabe632cb178b0d

commit 6cc1a157f9f840dceead43afb93481b1de45b101
Merge: de78df9 faebdec
Author: Jenkins <jenkins@review.openstack.org>
Date:   Mon Aug 8 18:36:56 2011 +0000

    Merge "breaking up MAX_ITEM_LIMIT and making the new values configurable"

commit faebdec11b4dc50e83645ad22719fb715ef36796
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Aug 5 13:14:46 2011 -0400

    breaking up MAX_ITEM_LIMIT and making the new values configurable
    
    Change-Id: I6655c50a871c75e748106884aa8ab5f1ebe274a3

commit 72e2e31fea41bc3c16083cce6abea51c028f259c
Author: Jay Pipes <jaypipes@gmail.com>
Date:   Mon Aug 8 12:56:30 2011 -0400

    Add @skip_if_disabled decorator to test.utils and integrate
    it into the base functional API test case. The S3 functional
    test case now uses test_api.TestApi as its base class and
    the setUp() method sets the disabled and disabled_message
    attributes that the @skip_if_disabled decorator uses.
    
    The S3 test case now tests all the methods that are tested
    for the filesystem store driver in test_api.TestApi
    
    Removed the test.functional.test_s3.conf file as it was no
    longer needed.
    
    Change-Id: I308d7a655c8c26339d0e2560634421935bbc8b5d

commit de78df90209753a0eec154eb93fb51a936f07935
Merge: 070afb6 853c3ec
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 5 20:37:41 2011 +0000

    Merge "Detect python version in install_venv"

commit 070afb604edd23d13e120bb376cc40d33a3595c6
Merge: 22c3e41 09a67e4
Author: Jenkins <jenkins@review.openstack.org>
Date:   Fri Aug 5 17:02:10 2011 +0000

    Merge "Adds swift_enable_snet config"

commit 09a67e4fb4e5c73cfa01451a7460a8c12d6f64da
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Aug 4 17:12:01 2011 -0500

    Adds swift_enable_snet config
    
    Change-Id: I7b798e2b4256a1b6c4694f0d126d2fa4604c95aa

commit 22c3e412cdf08052d40876304ac3c4c0a31a6b96
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Fri Aug 5 09:41:36 2011 -0500

    Fixes bug lp:821296
    
    Fixed exclude-dir to point to glance/tests/functional, now --unittests-only runs properly.
    
    Change-Id: I237225fb49f1f4a284682768e888a2e03585cdf9

commit 853c3ec5952607417fe53acd94004b68643c45a4
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Aug 5 01:16:00 2011 -0500

    Detect python version in install_venv
    
    Change-Id: I091fff876e959c55f7adeeb16d70cb5f5d68d789

commit 6ce80816fa61324ba430790eaf8c499b7924898b
Merge: 8f5bd2d 486deea
Author: Jenkins <jenkins@review.openstack.org>
Date:   Thu Aug 4 18:45:04 2011 +0000

    Merge "Implemented @utils.skip_test, @utils.skip_unless and @utils.skip_if functionality in glance/test/utils.py. Added glance/tests/unit/test_skip_examples.py which contains example skip case usages."

commit 486deeabd695bfd06a2aaf3c047e7206cd39f61f
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Thu Aug 4 11:00:00 2011 -0500

    Implemented @utils.skip_test, @utils.skip_unless and @utils.skip_if functionality in glance/test/utils.py. Added glance/tests/unit/test_skip_examples.py which contains example skip case usages.
    
    Fixed issue where ./run_tests.sh would not execute pep8. Fixed couple of pep8 violations in test_skip_examples.py
    
    Change-Id: Id6eaa8768b663b4638fbca0e3bdf72b74969150a

commit 8f5bd2dc1cc09559270eb877140231be64181b6e
Author: Monty Taylor <mordred@inaugust.com>
Date:   Thu Aug 4 08:51:04 2011 -0700

    Changed setup.py to pull version info from git.
    
    Change-Id: Ifdbdd6b587f5e4d0c255d4ed683bc81aeb8d95e4

commit 3aa1701e076db88c445518ef8176f7151b5df5c3
Merge: 2d4f267 54d233d
Author: jaypipes@gmail.com <>
Date:   Wed Aug 3 21:13:09 2011 +0000

    Removes the call to webob.Request.make_body_seekable() in the
    general images controller to prevent the image from being copied
    into memory. In the S3 controller, which needs a seekable file-like
    object when calling boto.s3.Key.set_contents_from_file(), we work
    around this by writing chunks of the request body to a tempfile on
    the API node, then stream this tempfile to S3.

commit 54d233db4fbfb3e969e393620adfe235f77a54cb
Author: jaypipes@gmail.com <>
Date:   Wed Aug 3 14:50:45 2011 -0400

    Make sure we're passing the temporary file in a read-mode file descriptor to S3

commit 8a0378fab0b8f8583d3e9d5b316420894b4ef3bf
Author: jaypipes@gmail.com <>
Date:   Wed Aug 3 14:05:23 2011 -0400

    Removes the call to webob.Request.make_body_seekable() in the
    general images controller to prevent the image from being copied
    into memory. In the S3 controller, which needs a seekable file-like
    object when calling boto.s3.Key.set_contents_from_file(), we work
    around this by writing chunks of the request body to a tempfile on
    the API node, then stream this tempfile to S3.

commit 2d4f26798a8948a86cedc6366488269144b50d3b
Merge: 2135402 d0ddbbc
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Aug 3 04:33:04 2011 +0000

    - removed curl api functional tests
    - moved httplib2 api functional tests to tests/functional/test_api.py

commit d0ddbbc74291e88f53f7719ddf01a8f8a9f49b44
Merge: 5682ec0 2135402
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Aug 3 00:15:22 2011 -0400

    merging trunk

commit 213540224f3a9757cf02053aad335326fa36fc8a
Merge: e2d6afd 327f752
Author: Soren Hansen <soren@linux2go.dk>
Date:   Wed Aug 3 03:48:17 2011 +0000

    Make tests a package under glance.

commit 5682ec0b888743cd4008d7f5c75d1f78353bdd54
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Aug 2 23:27:01 2011 -0400

    removing curl tests and moving httplib2 tests

commit 327f7525c067722a5e822e421120cdf283418e06
Author: Soren Hansen <soren@linux2go.dk>
Date:   Wed Aug 3 00:10:52 2011 +0200

    Move tests under the glance namespace.

commit e2d6afd54df70a1290c6746a1b6e45e7f11374f1
Merge: 99b8a56 0ae7a33
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Aug 2 21:23:37 2011 +0000

    Add filter support to bin/glance index and details calls

commit 0ae7a333a71167bad053eed9c4c877bca3f0cdf5
Merge: 336ec70 99b8a56
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Aug 2 17:10:33 2011 -0400

    merging trunk

commit 99b8a562592d8c0a9daa4080d5b1345ef8f76d8f
Merge: 4a041b8 64a2192
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Aug 2 18:38:20 2011 +0000

    Update registry db api to properly handle pagination through sorted results.

commit 4a041b8d6281238d9fd291bc98731fb09c7fa949
Merge: 22305dc 6cf9643
Author: jaypipes@gmail.com <>
Date:   Tue Aug 2 18:03:22 2011 +0000

    Our code doesn't work with python-xattr 0.5.0, and that's the version installed in RH/Centos :( Andrey has updated the RPM config to specify 0.6.0, and this does the same to pip-requires.

commit 22305dc6ceda437173dd274286bbc43e08f4feb7
Merge: 6a8ac4b 8c8bc7e
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Tue Aug 2 17:43:16 2011 +0000

    Replaced occurances of |str(e)| with |"%s" % e|.
    
    Except in bin/glance, where |unicode(e).split('\n')| makes more sense than |("%s" % e).split('\n')|

commit 6a8ac4b5120b78948826fea1b8654ba30f109f00
Merge: f52191b fe86dfe
Author: jaypipes@gmail.com <>
Date:   Tue Aug 2 17:38:19 2011 +0000

    First round of refactoring on stores.
    
    Refactors stores to be stateful:
    
    * Creates a new base Store class
    * Adds code for new Store modules to "register" with Glance
      and ensure that when the Controller(s) are spun up, that
      the stateful store objects are all created properly and passed
      configuration options. This allows us to refactor a bunch of code
      out of the various store adapters that is constantly re-checking
      configuration option values during each call to get/add/delete, etc
    * Removes the now-unnecessary repetitve option-checking code in the
      Swift, S3, and filesystem drivers

commit fe86dfe1d38cc5f76493c00d32751c0924a74d8e
Author: jaypipes@gmail.com <>
Date:   Tue Aug 2 11:43:05 2011 -0400

    Remove expected_size stuff

commit 3fae488716207694a7dc185c1ceb34be40ecb351
Author: jaypipes@gmail.com <>
Date:   Tue Aug 2 11:12:34 2011 -0400

    Make calling delete on a store that doesn't support it raise an exception, clean up stubout of HTTP store and testing of http store

commit 336ec70c6708f6e029a137191084cca1766ff7b4
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Aug 1 20:23:06 2011 -0400

    adding sort_key/sort_dir to details

commit e7b96f4dd3893c40f104e5019bdf3ad8e55772e8
Merge: 94361e0 64a2192
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Aug 1 20:01:20 2011 -0400

    merging lp:~rackspace-titan/glance/registry-marker-lp819551

commit 94361e037f7766fa5232dc93f83e3ae7c74fc085
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Aug 1 19:59:55 2011 -0400

    adding sort_key/sort_dir params

commit 64a2192ae9a6d183a9500193d754ede13f6c762d
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Aug 1 19:44:33 2011 -0400

    adding --fixes

commit 7b62744cf6d5ba595b7279f66e41d63f10c91cae
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Aug 1 19:42:50 2011 -0400

    adding complex test cases to recreate bug; updating db api to respect marker

commit 32cca0a25e9f678be9fd03dec3549b587b7cccc5
Author: jaypipes@gmail.com <>
Date:   Mon Aug 1 18:30:23 2011 -0400

    Add configuration check for Filesystem store on configure(), not every call to add()

commit c437a2a2aca81603cac4dc8e10637819fe67e984
Author: jaypipes@gmail.com <>
Date:   Mon Aug 1 18:10:31 2011 -0400

    Refactor S3 store to make configuration one-time at init versus every method call invocation

commit 6d63d1a38425c0bfceff751a606d2a1d55bfd998
Author: jaypipes@gmail.com <>
Date:   Mon Aug 1 17:32:06 2011 -0400

    Refactor Swift store to make configuration one-time at init versus every method call invocation

commit 742219216a9242fb9253e6d8af0928c23f109d0f
Author: jaypipes@gmail.com <>
Date:   Mon Aug 1 14:33:50 2011 -0400

    Forgot to add a new file...

commit 635a220e23fc2330c71f5df0aab9337e8c74e4a4
Author: jaypipes@gmail.com <>
Date:   Mon Aug 1 14:24:25 2011 -0400

      Refactors stores to be stateful:
    
        * Creates a new base Store class
        * Adds code for new Store modules to "register" with Glance
        and ensure that when the Controller(s) are spun up, that
        the stateful store objects are all created properly and passed
        configuration options. This allows us to refactor a bunch of code
        out of the various store adapters that is constantly re-checking
        configuration option values during each call to get/add/delete, etc
    
        Work TODO:
    
        * Remove the now-unnecessary repetitve option-checking code in the
          Swift, S3, and filesystem drivers

commit 6cf96437ef3745d9d64a2985189408543c91588e
Author: jaypipes@gmail.com <>
Date:   Mon Aug 1 11:42:58 2011 -0400

    Make sure xattr>=0.6.0 in pip-requires

commit 06b9130cdb0cb9fa34636e4e615d713b32c2b429
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Aug 1 04:18:09 2011 -0400

    updating documentation

commit d4eaab15c1da6e17d10fc2b9d6499d72e9d6cd6e
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Aug 1 04:07:59 2011 -0400

    making limit option an integer

commit d51e2a0c75ddfa0e8daa5d1f02163fbf5fd1d369
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Aug 1 03:59:50 2011 -0400

    updating broken tests

commit 0afa19d9d0588af7b46ce717108f316a227c68f6
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Aug 1 03:47:03 2011 -0400

    adding limit/marker to bin/glance details call

commit 30356837df158b2c46227b458de99df7c93eac5b
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Aug 1 03:26:22 2011 -0400

    adding limit/marker params to bin/glance index

commit 328f978a0f76a936dd0b12e27fd4d903793f9057
Merge: b9b980c f52191b
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Aug 1 02:29:09 2011 -0400

    merging trunk

commit f52191b09f0a74a7435cb3bc2734f8ff2ba54a3c
Merge: caa6dc1 857f2d6
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Sun Jul 31 16:15:29 2011 +0000

    Use of "%default" in help string does not work, have to use "%(default)s". Per the 4th example http://docs.python.org/dev/library/argparse.html#prog

commit caa6dc1637682fd8c8b8134b37ef8f24ce8a9aec
Merge: c21e554 ae980ab
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Sun Jul 31 16:13:47 2011 +0000

    Added nose-exclude to pip-requires.
    
    './run_tests.sh --unittests-only' adds '--exclude-dir=tests/functional' to noseargs.

commit ae980abbb671493d469eccbd0c28c21fb801a58f
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Sat Jul 30 00:12:44 2011 -0500

    Installed nose-exclude, ./run_tests.sh --unittests-only add '--exclude-dir=tests/functional' to NOSEARGS

commit 857f2d6824f7f471abfd2100116b32140616735a
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Fri Jul 29 23:30:35 2011 -0500

    This one has been bugging me for a while, finally found out how to use the local default variable in the help string.

commit 8c8bc7e53894824f3fabdd67e759d58497bc3233
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Fri Jul 29 22:28:42 2011 -0500

    adding --fixes to commit

commit 0c08a0404f872f66c1e8611d4ecdb62b19a9bcd1
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Fri Jul 29 22:26:00 2011 -0500

    Replaced occurances of |str(e)| with |"%s" % e|.
    
    Except in bin/glance, becaue |unicode(e).split('\n')| is prettier than |("%s" % e).split('\n')|

commit c21e55493267bfa3a7dc6365b833a8015bde5129
Merge: 59872c4 9b95371
Author: jaypipes@gmail.com <>
Date:   Fri Jul 29 18:58:58 2011 +0000

    Completes the S3 storage backend. The original code did not actually fit
    the API from boto it turned out, and the stubs that were in the unit test
    were hiding this fact.
    
    Adds a unit test that gets S3 testing up to snuff with the Swift backend.

commit 9b953715df2349344c53c9d23a4876ee387d09ac
Author: jaypipes@gmail.com <>
Date:   Fri Jul 29 14:45:36 2011 -0400

    Fix for boto1.9b issue 540 (http://code.google.com/p/boto/issues/detail?id=540)

commit ba7cd33d4705cb880c9bf1525fe227624a277fa9
Merge: 38cc809 59872c4
Author: jaypipes@gmail.com <>
Date:   Fri Jul 29 14:02:03 2011 -0400

    Merge trunk

commit 59872c45ca19657318d46b2dfb70c13af4ad44c3
Merge: df68907 4e79f47
Author: Johannes Erdfelt <johannes.erdfelt@rackspace.com>
Date:   Fri Jul 29 16:13:48 2011 +0000

    Remove unnecessary hashlib entry in pip-requires.
    
    Glance currently requires at least Python 2.5 (and actually 2.6 because of inconsistent use of with_statement) which includes hashlib as part of the standard library.

commit 4e79f47b413db1bcc6610c525d509a2cf91c891d
Author: Johannes Erdfelt <johannes.erdfelt@rackspace.com>
Date:   Fri Jul 29 16:02:46 2011 +0000

    Add myself to Authors (again)

commit 78e3738bba1f9733d08e9046e8b06f24f3bbdcfb
Author: Johannes Erdfelt <johannes.erdfelt@rackspace.com>
Date:   Fri Jul 29 15:31:43 2011 +0000

    hashlib exists all of the way back to python 2.5, there's no need to install
    an additional copy

commit 38cc809bb85ef905f45223396f9fbfe017afee08
Merge: d962ee0 df68907
Author: jaypipes@gmail.com <>
Date:   Thu Jul 28 19:01:40 2011 -0400

    Merge latest trunk

commit df689073566cc35276aafffc33623248527a5dc4
Merge: 2bd5283 a4f4d61
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 28 22:23:49 2011 +0000

    Adds image_cache_enabled config needed to enable/disable the image-cache in the glance-api.

commit 2bd5283a806e9dfca5e82d056c741b0d2bf9ecf7
Merge: 5ba923d a4fe58e
Author: jaypipes@gmail.com <>
Date:   Thu Jul 28 18:43:52 2011 +0000

    Add more unit tests for URI parsing and get_backend_class() (which is going away in refactor-stores branch, but oh well..)
    
    Now raising exception.BadStoreUri if glance.store.location.StoreLocation.parse_uri() is passed any URI that looks like this:
    
    swift://user:pass@http://authurl.com/v1/container/obj

commit a4fe58efec5c5f4da2ad59d7923ff3343c645d46
Author: jaypipes@gmail.com <>
Date:   Thu Jul 28 13:04:20 2011 -0400

    Added unit tests for swift_auth_url @property. It was broken. startwith('swift+http') matches swift+https first

commit 5ba923de665b54cca5757dfaaf0b41de2cb4dacb
Merge: 61f98ad 73a5d8e
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 28 16:08:47 2011 +0000

    Don't tee into the cache if that image is already being written.

commit d962ee01c993dc2946d8d313ccbb0f6adcd74eb6
Merge: dfc71f4 61f98ad
Author: jaypipes@gmail.com <>
Date:   Thu Jul 28 11:42:45 2011 -0400

    Merge trunk

commit 70b938937712f97017356f350ec14349ec4e8bb7
Author: jaypipes@gmail.com <>
Date:   Thu Jul 28 11:40:04 2011 -0400

    Re-add else: raise

commit a889225b527482fda639cb04a3c1ac2c0b5c5fb5
Author: jaypipes@gmail.com <>
Date:   Thu Jul 28 10:02:57 2011 -0400

    Final fixes merging Rick's swift_auth_url @property with previous URI parsing fixes that were in the S3 bug branch...

commit 44e3f009b161e47c4709bf3d5f8fdc01e1e7b804
Merge: 2253475 61f98ad
Author: jaypipes@gmail.com <>
Date:   Thu Jul 28 09:44:13 2011 -0400

    merge trunk

commit 61f98adf14605e59ce924dfbaa61e653b8fe1289
Merge: f8a1d0b 23a1457
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Jul 28 13:38:51 2011 +0000

    This updates the pep8 version in pip-requires and updates run_tests.sh to provide a '-p' option that allows for just pep8 to be run.

commit a4f4d6157c4ce1e273d4dc0eafdbe8fb027e1bda
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 27 19:50:04 2011 -0500

    Adding back image_cache_enabled config option for glance-api

commit 73a5d8e7a4f3f74d00dde5a6f05f8f12164ea402
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 27 19:44:29 2011 -0500

    Don't tee same image into cache multiple times

commit f8a1d0b9ba83d4c5b85a2cf7732540bbc88350d2
Merge: 65f49e2 64012c6
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 27 21:48:53 2011 +0000

    Fixes two things:
    
    * Swift client library requires scheme to be specified
    * Don't swallow exceptions on object get

commit 23a1457db90dfc2c6cb4bcb6e5a77b797ea6c7e6
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Jul 27 17:06:01 2011 -0400

    adding run_tests.sh -p

commit 64012c6e33e32c70370c389fc5a04c3b45f4f370
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 27 16:01:19 2011 -0500

    PEP8 whitespace fix

commit 663c8d958efcda0b84b9f7741d50476e04baff86
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 27 14:28:14 2011 -0500

    Swift client library needs scheme

commit 225347561ad0086f7faa2a6a3381501df1c75d6c
Author: jaypipes@gmail.com <>
Date:   Wed Jul 27 14:17:59 2011 -0400

    Add tests for bad schemes passed to get_backend_class()

commit 6e60538095c98854f45dc8fbef244d18f4ad479f
Author: jaypipes@gmail.com <>
Date:   Wed Jul 27 14:15:47 2011 -0400

    Add tests for bad URI parsing and get_backend_class()

commit 65f49e266c4eead5053cc75b0584bdcf61c21d33
Merge: 78ff123 4e0eb7a
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Jul 27 15:18:48 2011 +0000

    Include missing bin/glance-scrubber in tarball

commit 4e0eb7a70fe954bc38b7ebd1a497bc06a6bd3ce6
Author: Thierry Carrez <thierry@openstack.org>
Date:   Wed Jul 27 14:56:08 2011 +0200

    Include bin/glance-scrubber in tarball binaries

commit 78ff123b51c16097e1c1115162ba906d2df2cbe9
Merge: 400815c 5440497
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Tue Jul 26 17:03:56 2011 +0000

    One more auth_tok-related change, to make it easier for nova to use the client without violating any abstraction boundaries.

commit 400815cc4eea02ea1646326d3ab2383bd15d0b12
Merge: 29b3267 4b88b6b
Author: Jason Koelker <jason@koelker.net>
Date:   Tue Jul 26 16:18:47 2011 +0000

    Add fix for Bug #816386. Wait up to 5 min for the image to be deleted, but at least 15 seconds.

commit 4b88b6b9e462e9db513c794ce85e58a6b5bfeec5
Author: Jason Koelker <jason@koelker.net>
Date:   Tue Jul 26 09:59:22 2011 -0500

    remove superfluous if statement

commit b0f71e9c3929c7c874e13000b5e336851c039f12
Author: Jason Koelker <jason@koelker.net>
Date:   Tue Jul 26 09:55:02 2011 -0500

    Loop up to 5 min checking for when the scrubber deletes

commit dfc71f44f2441f06914faa0dabf689cc1ac01d0b
Merge: 0423d63 29b3267
Author: jaypipes@gmail.com <>
Date:   Tue Jul 26 10:26:19 2011 -0400

    Typo in error condition for create_bucket_on_put, make body seekable in req object, and remove +glance from docs and configs

commit 0423d6365634af9a2c992e639f8825beb17ece54
Author: jaypipes@gmail.com <>
Date:   Tue Jul 26 08:36:14 2011 -0400

    Add functional test case for checking delete and get of non-existing image

commit f92adbf05faa549fffb4474b54f551dec56e2d3e
Merge: 88062fe e0b57a7
Author: Jason Klker <jason@koelker.net>
Date:   Tue Jul 26 10:29:16 2011 +0000

    Merge diablo-3 development from trunk (rev160)

commit e0b57a73a3c3ed4172561d37623bac5eac5f146e
Merge: 88062fe 29b3267
Author: Thierry Carrez <thierry@openstack.org>
Date:   Tue Jul 26 12:11:38 2011 +0200

    Merge diablo-3 development from trunk (rev160)

commit 29b32674be5d20415e1b13ce71695077ec09ca6e
Merge: 8e9b9e5 21b3c82
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Tue Jul 26 02:34:03 2011 +0000

    New local filesystem image cache with REST managment API
    
    Additional changes include:
    
    * Added glance-reaper binary
    * Moved invalid cache entry reaping from glance-pruner to glance-reaper
    * Added stalled image detection and reaping
    * Added incomplete image listing (shows which images are currently being fetched)
    * Added percent progress to incomplete image listing and invalid image listing (useful when looking for failure trends)
    * Added ability to reap-invalid and reap-stalled directly from glance command. Helpful for testing and recovering from failures immediately (w/o having to wait for cron to kick off glance-reaper)
    * Renamed glance cache management commands. Now all start with 'cache-' and they better mirror the naming of 'image' commands
    * Fixed bug where print_help didn't have access to parser to print usage

commit 21b3c8229e2903fcf72387e3251b76dd7ecb97aa
Author: Rick Harris <rconradharris@gmail.com>
Date:   Mon Jul 25 17:01:26 2011 -0500

    PEP8 Fixes

commit 2a98e5d32318cddf051c53f5f1e804f5c549a3b4
Author: Rick Harris <rconradharris@gmail.com>
Date:   Mon Jul 25 16:59:56 2011 -0500

    Using DELETE instead of POST reap_invalid, reap_stalled

commit b6bf0b5891e1cec2fcac80019e40f54eddaf4c1f
Author: jaypipes@gmail.com <>
Date:   Mon Jul 25 16:47:51 2011 -0400

    Forgot to put back fix for the get_backend_class problem...

commit 2697b631d6e4eb85d3402bfbff68b56efc4af491
Author: Rick Harris <rconradharris@gmail.com>
Date:   Mon Jul 25 15:42:50 2011 -0500

    Adding logging if unable to delete image cache file

commit 679bda79c32e61e1ee6c4f83d48d4cd5cd6fcf0c
Author: jaypipes@gmail.com <>
Date:   Mon Jul 25 16:39:52 2011 -0400

    Add test case for S3 s3_store_host variations and fixes for URL bug

commit 5814897616f4e8a0fe67c386ef7599fb6fc2bdec
Author: Rick Harris <rconradharris@gmail.com>
Date:   Mon Jul 25 15:38:57 2011 -0500

    Ensure image is active before trying to fetch it

commit 54404971519facbf364b87d515f38ef76be30074
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Mon Jul 25 20:36:04 2011 +0000

    Boy, I'm an idiot...put this in the wrong branch directory...

commit 15900f5b222408ac7cbf2a6c4385abcd0483a177
Author: Rick Harris <rconradharris@gmail.com>
Date:   Mon Jul 25 15:23:41 2011 -0500

    Handling ZeroDivision Error

commit 8713c5028a45a7c91c81d0655fe265af6b452c07
Author: Rick Harris <rconradharris@gmail.com>
Date:   Mon Jul 25 15:05:26 2011 -0500

    Using alternate logging syntax

commit 4645b6bee9044fbc57edf1e7b3790f9180ffe143
Author: jaypipes@gmail.com <>
Date:   Mon Jul 25 15:00:23 2011 -0400

    Missing import of common.config in S3 driver

commit 2cd1949c9f07b6d13abdaadad61204a797987a76
Author: Rick Harris <rconradharris@gmail.com>
Date:   Mon Jul 25 13:55:18 2011 -0500

    Tighten up file-mode handling for cache entry

commit 8cd0510d4bb0ba81808de47a973d209013a0da3c
Author: Rick Harris <rconradharris@gmail.com>
Date:   Mon Jul 25 13:53:12 2011 -0500

    Adding request context handling

commit 957e4d1831c115a4fd596fc9c50edf2306ff23d4
Merge: b9dee1a 8e9b9e5
Author: Rick Harris <rconradharris@gmail.com>
Date:   Mon Jul 25 12:53:01 2011 -0500

    Merging trunk

commit 684d89117e85cfc603d3e6842b0617fca90c86d0
Merge: 6706e15 8e9b9e5
Author: jaypipes@gmail.com <>
Date:   Mon Jul 25 13:45:35 2011 -0400

    Fixed review stuff from Brian

commit 8e9b9e574f0871802153afa0adcc01177fff9b2a
Merge: 8d66dcb cbc5527
Author: Jason Klker <jason@koelker.net>
Date:   Sat Jul 23 05:13:59 2011 +0000

    Allow delaying the actual deletion of an image.
    
    If glance-api.conf has delayed_delete set to False or not set at all (it defaults to False) immediatly delete the image. If delayed_delete is set to True glance-api sets the status to pending_delete but does not call the backend delete. From the user's point of view it is actually deleted, and future calls will 404.
    
    A new daemon glance-scrubber is introduced which looks for pending_delete images that are older than a configurable interval and will actually delete from the backend the images.

commit cbc55273229678ddd1f1d6d82493ce16ac73548d
Author: Jason Koelker <jason@koelker.net>
Date:   Fri Jul 22 22:38:20 2011 -0500

    have the scrubber init a real context instead of a dict

commit e4eaef7bb802cfce70a238c55c27368bd7f1a079
Merge: 4587c9b 8d66dcb
Author: Jason Koelker <jason@koelker.net>
Date:   Fri Jul 22 19:07:38 2011 -0500

    merge trunk

commit 8d66dcbe2bcf73c252161994ebcb6390e2a422a8
Merge: 6cf282c c54c090
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Fri Jul 22 23:58:28 2011 +0000

    Adds authentication middleware support in glance (integration to keystone will be performed as a piece of middleware extending this and committed to the keystone repository).  Also implements private images.  No limited-visibility shared image support is provided yet.

commit c54c09048fc54ec7d5dce4f2e1709d0104c6991b
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Fri Jul 22 23:35:24 2011 +0000

    Take out extraneous comments; tune up doc string; rename image_visible() to is_image_visible(); log authorization failures

commit 4587c9b7622671f9d74e408c2eb09e14c4520225
Author: Jason Koelker <jason@koelker.net>
Date:   Fri Jul 22 18:08:43 2011 -0500

    use runs_sql instead of hackery

commit b9dee1abbbb6e5aa0264e1b6ac6238f4b0dae852
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Jul 22 17:26:15 2011 -0500

    Updating setup.py per bin/image_cache removal

commit b796cb70f9ebb042ec2e6f7a156c7dbe67e9f89d
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Jul 22 17:20:59 2011 -0500

    Removing bin/image_cache directory

commit 631d707a35aca2fea2f9be290416758da3a59689
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Jul 22 17:11:18 2011 -0500

    Removing cache enabled flag from most confs

commit 35d9da11783e885f37ab64d9b53bdb0d69267a59
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Jul 22 16:03:03 2011 -0500

    Removing imagecache from default WSGI pipeline

commit fba072aab4301f51b3078c34187a342ea04b7a94
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Fri Jul 22 19:57:56 2011 +0000

    Allow plugging in alternate context classes so the owner property and the image_visible() method can be overridden.

commit c2d591114f72d89707c5dad502882299a1014300
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Fri Jul 22 19:51:52 2011 +0000

    Make a context property 'owner' that returns the tenant; this makes it possible to change the concept of ownership by using a different context object.

commit 51edd723968d9ae605d133a070a6b9f641f2a297
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Fri Jul 22 19:02:48 2011 +0000

    Unit tests for the context's image_visible() routine

commit 59f9b7c2b13350dfc4b57ae25397096929f24391
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Fri Jul 22 19:02:08 2011 +0000

    We don't really need elevate()...

commit 652ecc461f29bd110528d3f706ed90631c43fe5f
Merge: edae975 6428277
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Jul 22 12:32:05 2011 -0500

    Merging in adding_image_caching

commit 64282776bd3d13179b0afacb52e2ee99362f4123
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Jul 22 12:27:07 2011 -0500

    Importing module rather than function

commit edae9756da2fdb6eca10468953820ec61c9ddbf2
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Jul 22 12:02:46 2011 -0500

    PEP 8 fixes

commit 11cd9dc8d1f6eb481709e4e8640f7554c01d1b4c
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Jul 22 12:00:09 2011 -0500

    Adding reap stalled images

commit 3da327fb86c594171cc8bd6355b09ef02340c271
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Jul 22 11:17:28 2011 -0500

    Returning number of files deleted by cache-clear

commit 234e694e34cf8dc544f38f2cbef6f311a9d73c6e
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Jul 22 11:11:37 2011 -0500

    Returning num_reaped from reap_invalid

commit 2c9c26216304e784f0a57195b995e51bdaf06891
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Jul 22 10:57:53 2011 -0500

    Moving bin to image_cache/

commit 6706e15699832fc4bd1c68a5f12c950914e2dfb4
Merge: 4825c94 6cf282c
Author: jaypipes@gmail.com <>
Date:   Fri Jul 22 11:39:22 2011 -0400

    Merge trunk and resolve conflicts. All tests passing for me...

commit 1f75e115e61df8e8485f036c9f713e9557f04d27
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Jul 22 01:02:56 2011 -0500

    Fixing comment

commit e54deefaff07fcc921f8c4115a7cd6b36cceff48
Author: Rick Harris <rconradharris@gmail.com>
Date:   Fri Jul 22 00:53:43 2011 -0500

    Adding reaper script

commit 89d5c0bc8e6e55d6647a05d16fd8ea9ff18d22a9
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 21 22:33:54 2011 -0500

    Adding percent done to incomplete and invalid image listing

commit ab5cf1c17fb95ca95399a0514a69fb0b9676c430
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 21 22:20:03 2011 -0500

    Renaming tmp_path to incomplete_path

commit dc5d6120206ccd08638db6b21f983509339c3d72
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 21 21:44:04 2011 -0500

    Renaming tmp_path to incomplete_path

commit cd43c66e03e2f98f4eb71aba161ce172f3e4ac0a
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 21 21:26:33 2011 -0500

    Renaming purge_all clear, less elegant variation

commit 32ba9f570bfd9b322077bdef7969f602999f4e12
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 21 21:18:01 2011 -0500

    Refactor to use lookup_command, so command map is used in one place

commit fcfae5227c92451b7601d8fed4869347671942c7
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 21 20:54:32 2011 -0500

    Refactoring to use same command map between functions

commit 771e8eab89f4eaa9b548d90b09db345d637aacaa
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 21 20:36:06 2011 -0500

    Renaming to cache-prefetching

commit f19313b80da4673630b113c35ef7533dca640efe
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 21 20:31:25 2011 -0500

    Renaming to cache-prefetch

commit d73ddf0f8c245f3aa46fbcd4f05ab64ac549056b
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 21 20:29:23 2011 -0500

    Renaming to cache-purge-all

commit 6026d70e01a05b80f10df00b0e80034e6dbaf637
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 21 20:27:26 2011 -0500

    Renaming to cache-purge

commit b281c7f9f5b3157ae7b38452126c2eafcbcbedb2
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 21 20:25:50 2011 -0500

    Renaming to cache-invalid

commit d2536f7e72ecbe3ab18ed447b19db75164f73cc7
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 21 18:58:05 2011 -0500

    Beginning to normalize names

commit 26baf11782a421b2c64f1cdbe8b94425ae61d8ec
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 21 18:50:20 2011 -0500

    Refactoring out common code

commit 12fd52bfcf891fe54bc9325e5c0356dc922068b8
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 21 18:22:18 2011 -0500

    Refactoring prefetch

commit 468e3ee15e77a40f4f9025de1557b7c4a575da9c
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 21 18:11:10 2011 -0500

    Refactoring purge

commit 885732386948df4990fdd1faa1cf5e3909bbd922
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 21 18:06:09 2011 -0500

    Refactoring purge_all

commit 4834976532233b7bcb744a9b7896308ca33fb9aa
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 21 17:54:17 2011 -0500

    Refactoring listing of prefetching images

commit 2f278a4f25d340bb7beab7bf38579c1e82fcaebc
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 21 17:50:42 2011 -0500

    Using querystring params for invalid images

commit ef2cde666c98847bd078c19f01ee80ab032dd838
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Thu Jul 21 22:38:27 2011 +0000

    Link incoming context with image owner for authorization decisions

commit 11b2f93dfea701c5cfdd3caee3a5819781e0c6b2
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Thu Jul 21 16:40:44 2011 +0000

    How in the world did I manage to forget this?  *sigh*

commit cd9a799272515357da91c52372cc98c04ee30f25
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Thu Jul 21 16:40:20 2011 +0000

    Make tests work again

commit f62d5b4ac6b50abecedc9a94c914be2cdea53b3f
Merge: 0c0aa5b 6cf282c
Author: Jason Koelker <jason@koelker.net>
Date:   Thu Jul 21 11:33:50 2011 -0500

    merge trunk

commit 9804c086c3ab7a4960ebfd40c22d12213495b4e1
Merge: 52064a6 6cf282c
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Thu Jul 21 16:08:44 2011 +0000

    pull-up from trunk

commit 6cf282ccb9d716a937dcc905790fb5501d63c971
Merge: bd96e20 520cf27
Author: jaypipes@gmail.com <>
Date:   Thu Jul 21 14:07:38 2011 +0000

    This patch:
    
        Overhaul the way that the store URI works. We can now support
        specifying the authurls for Swift and S3 with either an
        http://, an https:// or no prefix at all.
    
        The following specifies an HTTP Swift auth URL:
    
        swift_store_auth_address = http://localhost/v1
    
        The following specifies an HTTPS Swift auth URL:
    
        swift_store_auth_address = https://localhost/v1
        swift_store_autth_address = localhost/v1
    
        The default scheme for Swift auth URL is HTTPS. For S3,
        the default for the s3_store_service_address is HTTP,
        since boto uses private key signing over HTTP by default
        on the s3.amazonaws.com domain. Note that the new S3 stuff
        isn't merged yet...
    
    Future refactoring:
    
    * Instead of storing the store_uri in the database in images.location, split the store_uri out into component pieces in an ImageLocation table, reducing duplicate records in the registry database.
    
    * Never return the store_uri in the metadata. This contains security credentials (see LP Bug #755916)

commit 520cf27b957068b28ba6a10217da19071c2c5b80
Author: jaypipes@gmail.com <>
Date:   Thu Jul 21 09:58:14 2011 -0400

    PEP8 nit

commit bd96e2043c3f82982d2aa2f443c232ab7d57b999
Merge: f1d7fca 56217f9
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Thu Jul 21 12:42:38 2011 +0000

    Added fix for Bug #813291: POST to /images setting x-image-meta-id to an already existing image id causes a 500 error.
    
    I came up with about 3 or 4 different ways of resolving this bug, and all tests pass. Let me know if you think this should be resolved in a different way.
    
    This branch also includes a test in tests/functional/test_httplib2_api.py that shows the 500 error.

commit 5da4353fc7afc3be83af3423ebff86883edb2d84
Author: jaypipes@gmail.com <>
Date:   Wed Jul 20 19:51:54 2011 -0400

    One more try...

commit 0af01122dcdcd90656b0417bb6071fdf4cf59f73
Author: jaypipes@gmail.com <>
Date:   Wed Jul 20 19:49:06 2011 -0400

    Yet another attempt to fix URIs

commit 52064a637859bd7a195e7f4c23acdd6515d08755
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Wed Jul 20 22:53:44 2011 +0000

    Add in security context information

commit d716204d8003d1c1cf64fe099407f2cce6ed45fc
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 20 17:18:03 2011 -0500

    Moving cached image list to middleware

commit 8094e74f5d16f169f7c72bb7f48da4e4835492c2
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 20 16:58:59 2011 -0500

    Initial work on moving cached_images to WSGI middleware

commit 56217f9e62eb069f66669b16f016e4134bd40c2b
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Wed Jul 20 15:52:44 2011 -0500

    API is now returning a 409 error on duplicate POST. I also modified the testcase to expect a 409 response.

commit 78c9c3ad55f94212995cd1c7a46c30eccdcf499a
Author: Kevin L. Mitchell <kevin.mitchell@rackspace.com>
Date:   Wed Jul 20 20:27:33 2011 +0000

    Add owner to database schema

commit 3bc6a30ea8c065ccbdc23e4815f00c321d6b3027
Author: jaypipes@gmail.com <>
Date:   Wed Jul 20 14:14:41 2011 -0400

    Fix URI parsing on MacOSX - Python 2.6.1 urlparse bugs

commit e06e81224769dd9f5a7e02ef6e6a801dda2600bb
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Jul 20 17:25:00 2011 +0000

    Namespacing xattr keys

commit 72fdf836c13e8b8fe35ad702ce16796fecb83928
Merge: 3eda9b8 f1d7fca
Author: jaypipes@gmail.com <>
Date:   Wed Jul 20 12:41:38 2011 -0400

    Merge trunk

commit f8763deb8ee35e5ad15515b37578868bb0bcf7cf
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Jul 20 16:37:29 2011 +0000

    PEP8 fixes

commit f1d7fca1b64e1aa09848b61957abcda4550e1f0e
Merge: 193b695 f637bd4
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Wed Jul 20 13:17:36 2011 +0000

    Added 3 tests in tests/functional/test_httplib2_api.py to validate is_public filtering works.
    
    This is based off of functionality from a recent merge: https://code.launchpad.net/~vishvananda/glance/is-public-filter/+merge/68290
    
    Vish added unit tests for the bug, just wanted to make sure we had them tested in the functional tests also.

commit cf3a96fe50162d15e7893861682ca64281bbe0df
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Tue Jul 19 23:11:54 2011 -0500

    left in 2 fixes.. removing redundant fix

commit 7aa529875b38ff13e2ee8127de4c2c5e8f1911d9
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Tue Jul 19 23:03:05 2011 -0500

    If meta-data contains an id field, pass it to _image_update()

commit a4fd3ef35df96698a83926931aac98fe9838ab57
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Tue Jul 19 22:59:56 2011 -0500

    Adding functional test to show bug #813291

commit f637bd4cb76df0438e5bf11226322453e79141ee
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Tue Jul 19 22:05:28 2011 -0500

    fixed an inline comment

commit 3ef209446b845098feb58ccdc36c5ef22dabb0a7
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Tue Jul 19 19:25:15 2011 -0500

    removed pprint import, and added check for other 3 images to make sure is_public=True

commit 0c0cd9418e4c39d1dc944a0616d5a18b96460ce9
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Tue Jul 19 19:21:37 2011 -0500

    Added 3 tests to validate is_public filtering works

commit 193b6953cd7071c8c1d391115f5d0084e7a838af
Merge: f57e765 2bf50d9
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Tue Jul 19 18:07:37 2011 +0000

    Completed rewrite of tests/functional/test_curl_api.py using httplib2.

commit f57e7655efe1d779d0fe0c2c0584d521159a1698
Merge: 5929f14 6059e85
Author: Vishvananda Ishaya <vishvananda@gmail.com>
Date:   Tue Jul 19 17:52:31 2011 +0000

    Changes the default filtering of images to only show is_public to actually use a default filter instead of hard coding. This allows us to override the default behavior by passing in a new filter.

commit 2bf50d90e21c4d7d874fe65693e05106b67e2e96
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Mon Jul 18 22:43:27 2011 -0500

    removing pprint import

commit 9b7647d85f2112a441d53900fd7d464f3cf64c3e
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Mon Jul 18 22:41:05 2011 -0500

    completed rewrite of test_ordered_images().. this completes rewrite of test_curl_api using httplib2

commit e12b65238be0c9a04590a15fd3799476a765b409
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Mon Jul 18 22:04:00 2011 -0500

    test_ordered_images() missing closing self.stop_servers()

commit 64eb18927824683fc9b6aec1ea8d1a3587277728
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Mon Jul 18 22:03:22 2011 -0500

    finished rewrite of test_filtered_images()

commit 6059e8533aafce061d02b9515b8f09730d9bf4c6
Author: Vishvananda Ishaya <vishvananda@gmail.com>
Date:   Mon Jul 18 11:22:41 2011 -0700

    add tests and make None filters work

commit ee35df8b4f3884b01bc9825d4989d5337090ce3e
Author: Vishvananda Ishaya <vishvananda@gmail.com>
Date:   Mon Jul 18 10:28:18 2011 -0700

    Change default is_public = True to just set a default filter instead of hard coding so it can be overridden

commit 0c0aa5b6c6394cab5306a400c89751f4d9159ca0
Author: Jason Koelker <jason@koelker.net>
Date:   Fri Jul 15 17:21:05 2011 -0500

    make the tests work with new trunk

commit 6ac1d5a332202ed3c06004804e65f8a6f1c36e21
Merge: fc5b3b1 5929f14
Author: Jason Koelker <jason@koelker.net>
Date:   Fri Jul 15 16:32:53 2011 -0500

    merge trunk

commit da2ad57d3d030a60296a84b83cc4fdc6709fbfad
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 14 12:17:28 2011 -0500

    Refactoring PrettyTable so it doesn't print the lines itself

commit 413b32ef8a8ab477df69fd6cd166c0017b9c8832
Author: Rick Harris <rconradharris@gmail.com>
Date:   Thu Jul 14 12:05:00 2011 -0500

    Adding pruner and prefetcher to setup.py

commit 626b7a4f0421d90f8bcd1b71997bfadd6f59b2d5
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Thu Jul 14 00:12:58 2011 +0000

    Removing extraneous text

commit 87c4863678fd8babf37b970de8db6bf1f52b317e
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Thu Jul 14 00:04:29 2011 +0000

    PEP 8 fixes

commit b1be90f24116b100c67aff85dde2f9f885b5d3e7
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Jul 13 23:55:36 2011 +0000

    Adding prefetching list to bin/glance

commit 3434bc4152a7c1cbb5e90634135e9c210beccc0b
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Jul 13 23:34:20 2011 +0000

    More cleanups

commit 95c0acb9cb2951b9a16ae9b6e3bb0fdde770886b
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Jul 13 23:00:52 2011 +0000

    Adding prefetching of images

commit 3eda9b8e506b5a7acfc308ef3e785cc4fd9a43be
Author: jaypipes@gmail.com <>
Date:   Wed Jul 13 16:15:46 2011 -0400

    Overhaul the way that the store URI works. We can now support
    specifying the authurls for Swift and S3 with either an
    http://, an https:// or no prefix at all.
    
    The following specifies an HTTP Swift auth URL:
    
    swift_store_auth_address = http://localhost/v1
    
    The following specifies an HTTPS Swift auth URL:
    
    swift_store_auth_address = https://localhost/v1
    swift_store_autth_address = localhost/v1
    
    The default scheme for Swift auth URL is HTTPS. For S3,
    the default for the s3_store_service_address is HTTP,
    since boto uses private key signing over HTTP by default
    on the s3.amazonaws.com domain. Note that the new S3 stuff
    isn't merged yet...

commit bd8dad642400dbe1a22d8abfe448f0cedcf1742d
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 13 03:39:31 2011 -0500

    Typo fix

commit 26042d3e399f17f6c922ecb15b2b068b5765f042
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 13 03:29:39 2011 -0500

    Removing test exception

commit 44dadaa7ac520ebfa665438d5b9cfbbf7db352eb
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 13 03:26:25 2011 -0500

    PEP 8 fixes

commit a1926d4bc9555729a7913bddf6f4fc585497dcf7
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 13 03:21:13 2011 -0500

    Adding Error to invalid cache images

commit 09b7f23a40a0e64661d1f678100e700227ea3241
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 13 02:33:53 2011 -0500

    Show invalid images from bin/glance

commit 41535d7ec05126f3a42e60c48fa36359b75f9443
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 13 01:55:53 2011 -0500

    Improving comments

commit 21a540daab630a8b589698db7ab58bd42238594d
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 13 01:39:05 2011 -0500

    Cleaning up cache write

commit 883520adf4187eeb0608c2b82440faa3cf982c1a
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 13 01:32:05 2011 -0500

    Moving xattrs out to utils

commit 9cbd3b8ffe65b8a029b9c6fe1e70b6ea508576ee
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 13 01:04:44 2011 -0500

    Clip and justify columns for display

commit df9081d3adfa8531aa68686a473a4b818fd709cd
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 13 00:40:14 2011 -0500

    Including last accessed time in cached list

commit cfd64993bc347c74307b061034e87ec6276db842
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 13 00:26:49 2011 -0500

    Adding more comments

commit 3e6d51b0347f4012ee1acda370cac7baa1154973
Author: Rick Harris <rconradharris@gmail.com>
Date:   Wed Jul 13 00:11:37 2011 -0500

    Adding hit counter

commit 7bc060eb31b8bace76977d0f6e72dab0fe1b7f0d
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Jul 13 04:51:51 2011 +0000

    Pruning invalid cache entries after grace period

commit 17dbd0c243aa46533522ebe7bbea569d27e23dcb
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Jul 13 04:17:17 2011 +0000

    Clear invalid images when purging all cached images

commit ed2de78fa348b016e4848bba9405d2773bee9ad2
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Jul 13 04:04:29 2011 +0000

    Rollback by moving images to invalid_path

commit 286572961233cb8ea090f53ac7ff08e3ffca1cfc
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Jul 13 02:37:04 2011 +0000

    Improving comments

commit 11675ce5d0776a7ec393166e639a4deb761638fc
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Jul 13 02:15:20 2011 +0000

    PEP8 fixes

commit e37c7d85bd329357f26b75836a1cc69474fc710d
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Jul 13 02:13:23 2011 +0000

    Adding cached image purge to bin/glance

commit a27c0b24f8e719596c784c49ed6082abb19e7791
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Jul 13 02:06:12 2011 +0000

    Adding purge all to bin/glance

commit f5c94f35a1f17af177b49b53927218c2f7483f83
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Jul 13 01:56:41 2011 +0000

    Adding catch_error decorator to bin/glance

commit b434f6e308a6166cf410987d111fb8a58be85bcc
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Jul 13 01:28:12 2011 +0000

    Adding 'cached' command to bin/glance

commit 2f75045eda88fe8bd0264c0392b62f00a5473063
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Jul 13 00:18:48 2011 +0000

    Write incomplete files to tmp path

commit 8b47fb9cfec40caccd29e08f8b0fc4fac919c338
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Tue Jul 12 22:39:04 2011 +0000

    Adding purge_all, skip if set if xattrs arent supported

commit 94f4baa3936e31d69ffa3330be79080b80b17d21
Author: Rick Harris <rconradharris@gmail.com>
Date:   Tue Jul 12 04:17:29 2011 -0500

    Adding purge cache API call

commit 2dbc2fb65a1b383e07c732f2ca157951d67ed130
Author: Rick Harris <rconradharris@gmail.com>
Date:   Tue Jul 12 04:09:36 2011 -0500

    Adding API call to query for cache entries

commit a4369c75b3ae0e63c146464a824da103be1d4f5f
Author: Rick Harris <rconradharris@gmail.com>
Date:   Tue Jul 12 02:55:45 2011 -0500

    Create bin/glance-pruner

commit 4d4ef5482ac32b5d1078e7b4c9ed0c03400e4fb6
Author: Rick Harris <rconradharris@gmail.com>
Date:   Tue Jul 12 02:04:36 2011 -0500

    Adding image_caching

commit 4b49b6f9efbba7a02c5a2e8cd58e11c3c7d12baf
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Mon Jul 11 18:36:26 2011 -0500

    rewrote test_traceback_not_consumed(), working on test_filtered_images()

commit df1b1098fed4c93dc94036c624896ab0e15bd6ba
Merge: a0bf107 5929f14
Author: jaypipes@gmail.com <>
Date:   Mon Jul 11 14:49:39 2011 -0400

    Merge trunk

commit 5929f143decaa68a62a11e7e1bce486a8a141242
Merge: dc7e182 618e4a0
Author: Isaku Yamahata <yamahata@valinux.co.jp>
Date:   Sat Jul 9 23:12:14 2011 +0000

    Only changes is reverting the patch that added migration to configure_db() and resets the in-memory SQLite database as the one used in functional testing. Yamahata's commits were unmodified...

commit 618e4a0aff942672d1911d7e48643b56cf59f7d1
Author: jaypipes@gmail.com <>
Date:   Fri Jul 8 11:43:56 2011 -0400

    Reverts commit that did db migration during configure_db() and makes functional tests use in-memory database again. The issues we were seeing had to do with the timeout not being long enough when starting servers with disk-based registry databases and migrate taking too long when spinning up the registry server... this was shown in almost random failures of tests saying failure to start servers. Rather than increase the timeout from 3 seconds, I reverted the change that runs migrate on every startup and cut the total test duration down about 15 seconds.

commit 3eeb9fec9c49cbfff3e652223b3b564c451d880a
Merge: a5d5429 dc7e182
Author: Isaku Yamahata <yamahata@valinux.co.jp>
Date:   Fri Jul 8 18:46:06 2011 +0900

    merged glance trunk

commit 4825c942c784a428c1e40619dffbf7e889de75a8
Merge: b51934d dc7e182
Author: jaypipes@gmail.com <>
Date:   Wed Jul 6 17:35:38 2011 -0400

    Merge trunk

commit a5d542976ce2b27ec14960537606509b802f7975
Author: Isaku Yamahata <yamahata@valinux.co.jp>
Date:   Sat Jul 2 13:16:33 2011 +0900

    updated Authors

commit dc7e182e601408371386c62b64f6b216cad87482
Merge: ac33292 94c84ff
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Fri Jul 1 16:03:41 2011 +0000

    Resolves bug lp:803260, by adding a check to ensure req.headers['Accept'] exists before it gets assigned to a variable.

commit e263b1cc5fa42bdaf397f4ff0ed2e3fa3a4dcbbf
Merge: d5b13ee c829316
Author: Isaku Yamahata <yamahata@valinux.co.jp>
Date:   Thu Jun 30 13:00:06 2011 +0900

    run_tests.py: make test runner accepts plugins
    
    With this changeset, useful plugins are available
    for unit test. Thus we can use debugger for unit tests with
    say, --pdb, --pudb, ...

commit d5b13ee4f6393762da20649302893f4ba40c8b9e
Author: Isaku Yamahata <yamahata@valinux.co.jp>
Date:   Thu Jun 30 12:59:27 2011 +0900

    run_tests.py: make run_tests.py work.
    
    Without this patch, the following exception occurs.
    
    Traceback (most recent call last):
      File "run_tests.py", line 280, in <module>
        sys.exit(not core.run(config=c, testRunner=runner))
      File "/home/yamahata/openstack/src/glance/my/.glance-venv/lib/python2.6/site
    ackages/nose/core.py", line 283, in run
        return TestProgram(*arg, **kw).success
      File "/home/yamahata/openstack/src/glance/my/.glance-venv/lib/python2.6/site
    ackages/nose/core.py", line 118, in __init__
        **extra_args)
      File "/usr/lib/python2.6/unittest.py", line 817, in __init__
        self.runTests()
      File "/home/yamahata/openstack/src/glance/my/.glance-venv/lib/python2.6/site
    ackages/nose/core.py", line 197, in runTests
        result = self.testRunner.run(self.test)
      File "/home/yamahata/openstack/src/glance/my/.glance-venv/lib/python2.6/site
    ackages/nose/core.py", line 59, in run
        result = self._makeResult()
      File "run_tests.py", line 268, in _makeResult
        self.config)
      File "run_tests.py", line 183, in __init__
        if colorizer.supported():
      File "run_tests.py", line 92, in supported
        curses.setupterm()

commit ac332926a543e0ce2ac4e20eaac7c6fc139ef4ab
Merge: d0c03d0 124ba2a
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Jun 29 21:11:40 2011 +0000

    Fix the poor error handling uncovered through bug in nova

commit 94c84ff2588e23b2f96dc7ddd0ee6941209ab522
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Wed Jun 29 15:26:43 2011 -0500

    Added stop_servers() to the end of the test cases

commit 124ba2aa93b54c0df19ce2387d1d0f6c17c2c80c
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Jun 29 14:10:39 2011 -0400

    adding testing & error handling for invalid markers

commit 0bccd861d3bcbee4ade258ed6d19f8ac0ee65411
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Wed Jun 29 12:53:06 2011 -0500

    removed pprint import

commit 1ff556a401dd5b1d3f401c0d6be1d417f77c7975
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Wed Jun 29 11:26:08 2011 -0500

    removed extra space on test_queued_process_flow method definition

commit 2cc265b545e55675a4745e270d052624c51ae592
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Wed Jun 29 11:24:56 2011 -0500

    removing commented out line

commit 441e6a5207b9c1e0817b58a7b11b12a777624b3d
Merge: 095296a 91b4d95
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Wed Jun 29 11:18:17 2011 -0500

    merged in lp:~jshepher/glance/functional_tests_using_httplib2_part2

commit 095296aff5745a841dccbc8c021cadaa1ebabc95
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Wed Jun 29 11:13:18 2011 -0500

    applied requested fix in merge-prop

commit 91b4d95ed78e27bbcef830f47cc83b25987bc122
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Wed Jun 29 11:11:26 2011 -0500

    Removing ordering numbers from the test cases, per jay pipes

commit cf041554dd368287ed2a659834c4af7a820a3852
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Wed Jun 29 11:07:46 2011 -0500

    cleaning up the 'no accept headers' test cases. this should fail until Bug lp:803260 is resolved

commit d0c03d0acdaea403b1fc52e1a67014cbec2f7d9f
Merge: 705855c b6aa958
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Jun 29 15:42:49 2011 +0000

    Cleaning up docstring spacing

commit c972f245111b1fd3cae0f9936a17785748a713d6
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Wed Jun 29 10:38:40 2011 -0500

    rewrite of test_size_greater_2G_mysql from test_curl_api.py using httplib2. All tests currently pass

commit 947e8f1f796b6f279e0c08011619fdae38b4c8da
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Wed Jun 29 10:04:13 2011 -0500

    completed rewrite of test_003_version_variations. bug lp:803260 filed about step #0, and noted as a comment in code

commit 88062fe50797f6bb2cc0ae4d20774c0890b7b5a1
Merge: b71e625 45d276e
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Jun 29 13:07:16 2011 +0000

    Fix for bug 803188. This branch also proposed for merging into trunk

commit 9c01e581bcedf6a8e2724425fd11d1a4a278ca2b
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Tue Jun 28 21:22:55 2011 -0500

    miss-numbering of steps

commit ec911b18734f291b69f18caf8885a4edc16a74e5
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Tue Jun 28 21:09:08 2011 -0500

    fixing pep8 violation

commit 574387615529d6cc6b90059bd4de7fee7edd1b03
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Tue Jun 28 21:04:07 2011 -0500

    Added a check to ensure req.headers['Accept'] exists before it gets assigned to a variable. All unit/functional tests pass with this patch.

commit b17fdbff5fe4868895de0c206b5634847586dafa
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Tue Jun 28 20:58:11 2011 -0500

    half way done with rewrite of test_003_version_variations.. step #0 causes a 500 error unless we supply an Accept header

commit 705855c17490db6df6ed64b602910c0d674b9a11
Merge: f8264af 45d276e
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Jun 29 00:52:47 2011 +0000

    Prevent query params from being set to None instead of a dict

commit 45d276efa63b8982a190f44d2fd72d9bd9632309
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jun 28 19:20:51 2011 -0400

    removing rogue print

commit 3726931fbac2860612c1f8a88d13d9e4e3f044a1
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jun 28 18:01:08 2011 -0400

    fixing issue where filters are set to None

commit b71e625d121b08ca58de4bc6bc04e25d533e8151
Merge: b54eb76 47714f1
Author: Thierry Carrez <thierry@openstack.org>
Date:   Tue Jun 28 20:22:20 2011 +0000

    Backport for bug 803055

commit 4c5af0992b758be414cebcdc02281c0c86e7ad46
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Tue Jun 28 15:15:18 2011 -0500

    rewrote test_002_queued_process_flow from test_curl_api.py, all 6 steps pass against trunk revno:146

commit 47714f19a0f78b5db830f05d277a0a761fe67673
Author: Thierry Carrez <thierry@openstack.org>
Date:   Tue Jun 28 21:50:11 2011 +0200

    Backport for bug 803055

commit b54eb76d0650070cb13b1fdf1ae67bed1d5c4964
Merge: f341891 55bc08e
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jun 28 19:42:20 2011 +0000

    Merge diablo-2 development work

commit f8264affea498033848e205e24629782e368faaf
Merge: 1a7ff12 3e1d0b9
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jun 28 19:12:50 2011 +0000

    Prevent clients from adding query parameters set to None

commit 3e1d0b91ecdaefcb0b141706c5016d4be746ea6c
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jun 28 14:12:26 2011 -0400

    ignores None param values passed to do_request

commit b6aa9588620e41f67813b79517dc8c1353a13fee
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jun 28 10:37:31 2011 -0400

    cleaning up docstrings

commit 55bc08e69e18e7cb2670ee3a9a5e48dc69a91f73
Merge: f341891 1a7ff12
Author: Thierry Carrez <thierry@openstack.org>
Date:   Tue Jun 28 16:33:09 2011 +0200

    Merge diablo-2 development from trunk (rev146)

commit 116ef8202b77fcf378217cdfe277dfd56674ed54
Merge: 5b8a507 1a7ff12
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jun 28 10:17:58 2011 -0400

    merging trunk

commit 5b8a507482270ecbd532cf337fd1de2c8e046eca
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jun 28 10:17:42 2011 -0400

    docstring

commit 1a7ff12a4539973f950b2312765d359a7cc41f5b
Merge: 2ea83f6 8c5da9d
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jun 28 14:03:10 2011 +0000

    Added sort_key and sort_dir query params to apis and clients.

commit 8c5da9d57a8e7e3b53446b975fe6f2c6f81d5812
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jun 28 09:51:08 2011 -0400

    fixing one last docstring

commit c7b4168c3cfb6806938aeac650bc2d9009a0de33
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jun 28 09:41:50 2011 -0400

    docstrings\!

commit 5ca6a5495cd64535297ad79b947a2e8d31bd40d8
Author: Isaku Yamahata <yamahata@valinux.co.jp>
Date:   Tue Jun 28 18:03:34 2011 +0900

    unit/test_config.py: make it independent on sys.argv
    
    The first test in test_config.TestConfig.test_parse_options tests
    no options are specified. But it checks sys.argv when default parameter
    is used. So it fails when some parameter is passed to run_test.py.
    So pass empty list to the parser as argument explicitly in order to
    make it pass independent sys.argv.

commit c82931622e1a62a4b440e498317b6c274b4f4d72
Author: Isaku Yamahata <yamahata@valinux.co.jp>
Date:   Tue Jun 28 18:02:38 2011 +0900

    run_tests.py: make test runner accepts plugins
    
    With this changeset, useful plugins are available
    for unit test. Thus we can use debugger for unit tests with
    say, --pdb, --pudb, ...

commit c8b40ee7a7a89e431b49174a7dbd83a0921238f2
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Jun 27 14:05:29 2011 -0400

    reverting one import change; another docstring fix

commit 6214a48000534f680f911e5b0860c3830387ecf7
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Jun 27 14:00:09 2011 -0400

    docstring

commit 2ea83f6de813b40c2f47c730ac68792d9ff77f2c
Merge: 3d8b005 ab0a401
Author: Yuriy Taraday <yorik.sar@gmail.com>
Date:   Mon Jun 27 14:37:40 2011 +0000

    Switch image_data to be a file-like object instead of bare string in image creating and updating
    Without this Glance loads all image into memory, then copies it one time, then writes it to temp file, and only after all this copies image to target repository.

commit ab0a4010b56f147a96edab7f920f554aef61ac86
Author: Yuriy Taraday <yorik.sar@gmail.com>
Date:   Mon Jun 27 09:17:49 2011 +0400

    Add myself to Authors file.

commit 763dbc4d6ed607f9362af3f070b80071d755a922
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sun Jun 26 16:56:17 2011 -0400

    cleaning up None values being passed into images_get_all_public db call

commit c1ff5c38bfcc757ccff69276f8374503aa6d745c
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sun Jun 26 16:45:46 2011 -0400

    adding base client module

commit a2bd04212f5038e57495c858fb001f71ddf8ab2f
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sun Jun 26 16:43:41 2011 -0400

    restructuring client code

commit e947f816f2d49faf2d0884449280b370f238d3ff
Merge: 220be9c 3d8b005
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sun Jun 26 15:57:51 2011 -0400

    merging trunk

commit 3d8b005e1ba32f7c30ca7b86f73a38c393841782
Merge: 3ee6f99 97c8c46
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sun Jun 26 18:52:39 2011 +0000

    Explicitly set headers rather than add them

commit 97c8c461f222b26506f82d7a407ee6dcd8998f05
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Jun 24 17:16:53 2011 -0400

    fixing httplib2 functional test that was expecting wrong content-type value

commit 35adb2c169fe8a563ab66bf3569edd476380f4de
Merge: e3312c8 3ee6f99
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Jun 24 17:15:04 2011 -0400

    merging trunk

commit 3ee6f99447740a5ea76b3c20985be4cc9e1761d8
Merge: 6539f82 5659e7d
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Fri Jun 24 21:12:41 2011 +0000

    rewrite of test_get_head_simple_post from tests/functional/test_curl_api.py using httplib2.

commit e3312c84ec731d7a36dcae043fcdd6892258eef5
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Jun 24 16:57:02 2011 -0400

    adding assert to check content_type in GET /images/<id> test

commit 84a69ba0dd46f604f239d372696ffdd3a7e49f4a
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Jun 24 16:27:25 2011 -0400

    Explicitly setting Content-Type, Content-Length, ETag, Location headers to prevent duplication

commit 6539f82db5cae43d0e704998aec3fd034a337c0b
Merge: c79a489 e010451
Author: Ewan Mellor <ewan.mellor@citrix.com>
Date:   Fri Jun 24 20:07:36 2011 +0000

    Bug #801703: No logging is configured for unit tests
    
    Configure logging to go to stderr during the unit test run.  This gets
    captured by run_tests.sh into run_tests.err.log.

commit e010451e3c250a34708e2c2e12c2784efcc25f95
Author: Ewan Mellor <ewan.mellor@citrix.com>
Date:   Fri Jun 24 11:44:34 2011 -0700

    Bug #801703: No logging is configured for unit tests
    
    Configure logging to go to stderr during the unit test run.  This gets
    captured by run_tests.sh into run_tests.err.log.

commit 30424e7fa06408b3f3356de2ab5f2308c4120612
Author: Yuriy Taraday <yorik.sar@gmail.com>
Date:   Thu Jun 23 17:49:53 2011 +0400

    Change image_data to body_file instead of body.

commit fc5b3b1c2a3c749f5fa0f4ffd69b5515d1961ea4
Author: Jason Koelker <jason@koelker.net>
Date:   Wed Jun 22 13:47:15 2011 -0500

    reset _MAKER every test and make sure to stop the servers

commit 5659e7d75809ee7a69136abc2dd0f6f5e4b640b7
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Wed Jun 22 13:04:19 2011 -0500

    Trunk merge, changed returned content-type header from 'application/octet-stream' to 'text/html; charset=UTF-8, application/octet-stream'

commit 82a0107e39aad03dda902e3c9e80d2f628c81848
Author: Jason Klker <jason@koelker.net>
Date:   Wed Jun 22 12:47:10 2011 -0500

    yea python strings

commit b51934d9e7b76e89381b001d6ad89b2dd24fd4f1
Merge: d3efc55 c79a489
Author: jaypipes@gmail.com <>
Date:   Wed Jun 22 13:14:00 2011 -0400

    Merge trunk and resolve conflict in pip-requires

commit 99a0116c7a6b4206dbae6cd4974c7a2368e93e1d
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Wed Jun 22 09:20:31 2011 -0500

    updated main docstring, as it was directly coppied from test_curl_api.py

commit 96acd63435f90abe1bf37dcda36f24c52c7efc64
Merge: 17ca961 c79a489
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Wed Jun 22 09:19:33 2011 -0500

    merged trunk

commit 220be9cd83b202222f4137f792d9ac270dbc963b
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jun 21 16:27:52 2011 -0400

    refactoring for Jay

commit 851516e5a0bb8cab2411985f1aed671fef0f64f1
Author: Jason Klker <jason@koelker.net>
Date:   Tue Jun 21 15:12:07 2011 -0500

    make image data a constant

commit c79a489b82517231aed88b3894625f849bd6a458
Merge: b6d4093 e0f7e6d
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jun 21 17:27:37 2011 +0000

    Fixes build failures due to webob upgrade. Updated pop-requires as well

commit e0f7e6d9a015fcb4606faee2016b21ff9281752a
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jun 21 12:31:54 2011 -0400

    upgrading webob and fixing tests

commit b6d4093d4d5c5c7f9831c703b064d8114e28ec85
Merge: f341891 7ff3587
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jun 21 15:52:10 2011 +0000

    - refactoring wsgi code to divide deserialization, controller, serialization among different objects
    - Resource object acts as coordinator
    
    - tests are coming, this is for review purposes

commit d55c2a3d97203262ed62cec2ce07492994a01e69
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jun 21 09:41:06 2011 -0400

    updating client docs

commit cb127f68e553306f4b92096cdff4022255eb0e43
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jun 21 00:11:00 2011 -0400

    fixing bad request error messages

commit 9ea2bd11ab501cdc3822ccd81ee0f8910c3438ca
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Jun 21 00:01:39 2011 -0400

    making SUPPORTED_* lists into tuples

commit a21bcc9e558d77fd53c81e050ae5389a301cee9f
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Jun 20 23:58:24 2011 -0400

    slight refactoring

commit 3ebfff8ba89a389ce3cb16c969601c1f0fd8851d
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Jun 20 23:52:25 2011 -0400

    updating docs

commit 1d454f7595763e5ae0acd498f3749bf55a72bfbd
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Jun 20 23:42:03 2011 -0400

    adding ordering support to glance api

commit 23a4049477e69fa279179a00a31a79d88e5d4ed3
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Jun 20 22:56:51 2011 -0400

    adding support to registry server and client for sort_key and sort_dir params

commit 17ca9618eba55c2c4d2e29a127b477cce2f96d8c
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Mon Jun 20 10:39:22 2011 -0500

    re-ordered imports, using alpha-ordering

commit 08a28583e4735cf371364d84beb871647abb27a0
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Mon Jun 20 10:17:08 2011 -0500

    removing unnecessary unittest import

commit f517f494fbee502f9050ffaec3bec3a4d3630678
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Mon Jun 20 09:36:12 2011 -0500

    moved httplib2 tests to their own test case file, and uncommented md5 match

commit b9b980cb0a81cfa2ffe05aa97e790a9532b308e0
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sun Jun 19 14:15:06 2011 -0400

    updating docs; adding support for status filter

commit 8c5353c43fecfb4e0e53d4675ec1cbfe688d0053
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sun Jun 19 13:59:35 2011 -0400

    adding query filters to bin/glance details

commit 4f46603839e669b49fa6615e2936d2e90f992bda
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sun Jun 19 13:42:40 2011 -0400

    adding query filters to bin/glance index

commit 4324e44c0f08db26ca57f6b0571236f3d3f837d3
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Fri Jun 17 20:15:47 2011 -0500

    forgot to remove pprint import

commit 0811301e0dde83f1c58e70a613070b054ec5b6b5
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Fri Jun 17 19:58:15 2011 -0500

    adding hashlib as a dependency to pip-requires (not 100% sure it is not part of the base install though)

commit e32adff335fc270b6e4dab3e39537ba25c5f653f
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Fri Jun 17 19:48:48 2011 -0500

    fixed pep8 violation

commit f9001276cc5e4df9f5dbb76377cd6260813b39c0
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Fri Jun 17 17:04:02 2011 -0500

    rewote the test #7 - #11 for testcase (test_get_head_simple_post)

commit 7ff3587f2bf46182e6000194b0365781e8484ee2
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Jun 17 16:45:45 2011 -0400

    refactoring for Brian

commit e8bd48ea70e59c426d8434cfad8795cdf3f807c5
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Jun 16 21:04:36 2011 -0400

    refactoring from Rick's comments

commit fe242a2ee4828474f1f038bd308d6158c9f75d3a
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Wed Jun 15 21:58:49 2011 -0500

    Added httplib2 dependency to tools/pip-requires
    
    rewrote the test #0 - #6 for testcase (test_get_head_simple_post)

commit 22ea9e008aa033e203c38c4b02468436afe916b4
Author: Justin Shepherd <jshepher@rackspace.com>
Date:   Wed Jun 15 19:08:33 2011 -0500

    rewriting functional tests to utilize httplib2 instead of curl

commit 2d91c5701f558e3d5d1df03b8959faf68bb76acd
Author: Jason Klker <jason@koelker.net>
Date:   Wed Jun 15 10:58:58 2011 -0500

    make sure it runs as a daemon for the tests

commit 112f6be82b5c8137238e4438e2c991d023e140fe
Author: Jason Klker <jason@koelker.net>
Date:   Wed Jun 15 10:47:38 2011 -0500

    default to no daemon

commit 71174b6575881e140bc5c95e9ef5d4548af0ed34
Author: Jason Klker <jason@koelker.net>
Date:   Wed Jun 15 10:42:50 2011 -0500

    also allow for daemon in the config file so that we can test it easier

commit e201d6baf9713c3c24aa83c7d1ec7bd0cd8ff5e9
Author: Jason Klker <jason@koelker.net>
Date:   Wed Jun 15 10:35:16 2011 -0500

    default to non-daemon mode

commit e8ac790b1f3eb17a5e1bbf5d8a14070f60773c4f
Author: Jason Klker <jason@koelker.net>
Date:   Wed Jun 15 10:33:09 2011 -0500

    change order of paramaters and make event optional

commit 73bc57f13cb97d19a224c5b32cbcb1b720542870
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Jun 15 10:47:00 2011 -0400

    initial refactoring from Jay's comments

commit d36ff21023e058b3e476b6affd9b89922bd5fdf9
Author: Jason Klker <jason@koelker.net>
Date:   Mon Jun 13 14:58:38 2011 -0500

    remove eventlet import and leftover function from previous refactoring

commit 721b8ffc805ae1b17639091727765bbca1e254e4
Author: Jason Klker <jason@koelker.net>
Date:   Mon Jun 13 14:57:44 2011 -0500

    remove file that got resurrected by accident

commit 31da4d68fe90a18a95d0d35914245f7f7c66b2b0
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon Jun 13 15:45:18 2011 -0400

    fixed test case

commit 8abea7416b2c59ab018c809a92edf38d7a8645e9
Author: Jason Klker <jason@koelker.net>
Date:   Mon Jun 13 14:41:17 2011 -0500

    add functional tests of the scrubber and delayed_delete

commit 7a6e74ce5d4714719d9220694cb9185000e89604
Author: Jason Klker <jason@koelker.net>
Date:   Mon Jun 13 12:53:43 2011 -0500

    start the scrubber in addition to the api and registry

commit 4eaf79dc2969ccfae8841692e5351cb99ec0fe67
Author: Jason Klker <jason@koelker.net>
Date:   Mon Jun 13 12:52:21 2011 -0500

    add glance-scrubber to glance-control

commit aa4433af4cc62365992c30cd4e27b4886c906ef3
Author: Jason Klker <jason@koelker.net>
Date:   Mon Jun 13 12:21:35 2011 -0500

    call it a Daemon, cuz it is

commit 96251f9e77d37305b9a39fb4ea60a0131828f8d0
Author: Jason Klker <jason@koelker.net>
Date:   Mon Jun 13 12:05:32 2011 -0500

    Update Authors

commit d3661b7746f4f32806c74d672ba229f124aa7ec2
Author: Jason Klker <jason@koelker.net>
Date:   Mon Jun 13 11:04:01 2011 -0500

    add the function to the stubs

commit a07bfe68ac946df411bf076eb40cf5adb8de5d3b
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sat Jun 11 16:25:52 2011 -0400

    cleanup

commit 97d457de05d7024643f104cf55d9d1bec9d4bdf8
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sat Jun 11 15:49:45 2011 -0400

    adding tests for wsgi module

commit 2c4b5009c0666076f04f83f3806546583b242daa
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sat Jun 11 14:18:22 2011 -0400

    removing rogue print

commit 40c7b43ce4b582c8233c1c432c1b5650399735eb
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sat Jun 11 14:18:03 2011 -0400

    further refactoring

commit 07e33ebaddcd73e737ba5b301f6c6d3a9c1d04a8
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sat Jun 11 09:47:47 2011 -0400

    adding refactored wsgi code from nova; moving registry api to new wsgi

commit 03e47cacfcb41926bb15668397c3e8a1d2423a13
Author: Jason Klker <jason@koelker.net>
Date:   Fri Jun 10 15:51:50 2011 -0500

    delayed scrubbing now works.

commit 8dbb9b501f53fbda616025c47836818d987d6b43
Author: Jason Klker <jason@koelker.net>
Date:   Fri Jun 10 13:43:47 2011 -0500

    add the scrubber startup script

commit a517e1ab81afc1d4447918c1c83eead7ed96188e
Author: Jason Klker <jason@koelker.net>
Date:   Fri Jun 10 13:25:15 2011 -0500

    remove unnecessary option

commit 7ac90c8c6bcfd5b2d15e041e674ecfa9b2555878
Author: Jason Klker <jason@koelker.net>
Date:   Fri Jun 10 13:11:23 2011 -0500

    add pending_delete to stub api

commit e55bdc874baaa20f43494a794ae2a668b7fa68f3
Author: Jason Klker <jason@koelker.net>
Date:   Fri Jun 10 11:36:40 2011 -0500

    pep8 fixed

commit ebe10bf57d4d5eb50c8ae45491a6cbb9e982dcba
Author: Jason Klker <jason@koelker.net>
Date:   Fri Jun 10 11:30:43 2011 -0500

    pep8 fixes

commit bac626202968ef2209b3fc926375d4953ee64060
Author: Jason Klker <jason@koelker.net>
Date:   Fri Jun 10 10:41:03 2011 -0500

    pass in the type we want so it gets converted properly

commit 5105d5986bc9e13e30e70be99404be58f31a311a
Author: Jason Klker <jason@koelker.net>
Date:   Fri Jun 10 10:37:37 2011 -0500

    self leaked ;(

commit 2b69b3393cf513c7e82b254d0947cdfba897d4d5
Author: Jason Klker <jason@koelker.net>
Date:   Fri Jun 10 10:35:48 2011 -0500

    only return the results that we need to act on

commit 16e3d3ba84f8962b92a632eaab9a9bc49dae2443
Author: Jason Klker <jason@koelker.net>
Date:   Fri Jun 10 10:06:17 2011 -0500

    allow passing of time to get only results earlier than the time'

commit f2508386218521d6ca0754898a3a7bd8c3b8c481
Author: Jason Klker <jason@koelker.net>
Date:   Thu Jun 9 18:07:46 2011 -0500

    server and scrubber work

commit 02173ef6f64a4d17ab5a553e8eef01b389654488
Author: Jason Klker <jason@koelker.net>
Date:   Thu Jun 9 17:46:47 2011 -0500

    update the docstring to reflect current

commit 0f88cfce25a55231a8d3c89c1c9d831a626ece1a
Author: Jason Klker <jason@koelker.net>
Date:   Thu Jun 9 16:42:34 2011 -0500

    pass in a wakeup_time for the default time between database hits

commit 33c921a2614b8c1cee3f1f8dd9ce437c23dcf787
Author: Jason Klker <jason@koelker.net>
Date:   Thu Jun 9 16:37:31 2011 -0500

    start making the server that will periodicly scrub

commit 8cbfca5aa1b95d9c100562ca99ba0365976bc64b
Author: Jason Klker <jason@koelker.net>
Date:   Thu Jun 9 15:40:00 2011 -0500

    Config file for the scrubber. We make our own connection to the db here and
    bypass using the registry client so we don't have to expose non-public
    images over the http connection.

commit 4cdc31d32d8a2b34816dbbee030e8326310487bb
Author: Jason Klker <jason@koelker.net>
Date:   Thu Jun 9 13:23:18 2011 -0500

    make the commits

commit d3efc550a805daf473e21d4dab987c96c738b4b6
Author: jaypipes@gmail.com <>
Date:   Thu Jun 9 13:05:19 2011 -0400

    Add webob>=1.0.7 requirement to tools/pip-requires

commit f8d10a4bdf298be9a2100e6600a3bc70bc56b657
Author: Jason Klker <jason@koelker.net>
Date:   Thu Jun 9 11:50:35 2011 -0500

    all delayed deletes will be going through a new service, if delayed_delete is False, then delete it right away, otherwise set it to pending_delete

commit bd13621450d8be294fd650efe759ab65f146d96e
Author: Jason Klker <jason@koelker.net>
Date:   Wed Jun 8 16:57:52 2011 -0500

    add scrub file

commit 36e14d9c6e3319955265bef4c34ac724bf751c54
Author: Jason Klker <jason@koelker.net>
Date:   Wed Jun 8 16:23:50 2011 -0500

    set the image to pending delete prior to scheduling the delete

commit 5df2c2057a815d62071736a435f6f28059b65dcf
Author: Jason Klker <jason@koelker.net>
Date:   Wed Jun 8 16:23:02 2011 -0500

    refactor a bit so the db gets updated as needed and we only trigger the delay if the config option is set

commit ba22d7febaf2ee2e545d57cffd2d2ccc877ab388
Author: Jason Klker <jason@koelker.net>
Date:   Wed Jun 8 15:47:13 2011 -0500

    add scheduled_delete_from_backend which delays the deletion of images for at least 1 second

commit 292ca07dac549f96787e9e64bd9ae2c7cea647a4
Author: Jason Klker <jason@koelker.net>
Date:   Wed Jun 8 15:39:14 2011 -0500

    don't delete directly but schedule deletion

commit 455ceaa9d5cc5e004d9b7141c085e8dae5776324
Author: Jason Klker <jason@koelker.net>
Date:   Wed Jun 8 14:42:25 2011 -0500

    add the api function to get the images that are pending deleteion

commit 24d17c1f13a54685a3aa80e46c3fe2e771b5e427
Author: Jason Klker <jason@koelker.net>
Date:   Wed Jun 8 13:45:31 2011 -0500

    add in delayed delete options

commit 745f3a6607ef8eebc3336c521f088ceedba124e3
Merge: 99dd5a8 f341891
Author: jaypipes@gmail.com <>
Date:   Thu Jun 2 10:31:38 2011 -0400

    Merge trunk

commit 99dd5a8582b0101948753faacf948e63a1b89ca0
Author: jaypipes@gmail.com <>
Date:   Thu Jun 2 10:11:11 2011 -0400

    Add workaround for Webob bug issue #12 and fix DELETE operation in S3 where URL parsing was broken

commit 6cedb4c4b2d4aec5d76fe03e96304a2a6aa88b35
Author: jaypipes@gmail.com <>
Date:   Wed Jun 1 00:08:41 2011 -0400

    Add ability to create missing s3 bucket on first post, similar to Swift driver.

commit f341891ce48b664c53a8c9522681d8059b8fbb51
Merge: 80ef6fb c78c055
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue May 31 19:32:17 2011 +0000

    Adding support for marker/limit query params from api, through registry client/api, and implementing at registry db api layer

commit 80ef6fb4efa9de2a7cb0cfe18f8c32f2b50b6b90
Merge: 6cd1a7e 65d06e2
Author: Ewan Mellor <ewan.mellor@citrix.com>
Date:   Tue May 31 15:47:07 2011 +0000

    Bug #787296: test_walk_versions fails with SQLalchemy 0.7
    
    Cap SQLalchemy and sqlalchemy-migrate at 0.6.x.  This works around the
    problem where test_walk_versions fails with 0.7.
    
    It's obviously not a long-term fix.

commit 4e371841d75e59d9aa2190ec038a9f4dcd5f9cdf
Author: jaypipes@gmail.com <>
Date:   Tue May 31 11:02:01 2011 -0400

    OK, fixes the issue where older versions of webob.Request did not
    have the body_file_seekable attribute. After investigation, turned
    out that webob.Request.make_body_seekable() method was available in
    all versions of webob, so we use that instead.
    
    Also ran into a bug in the HMAC library:
    http://bugs.python.org/issue5285
    http://trac.edgewall.org/ticket/8083
    
    I resolved this by ensuring that access_key and secret_key were
    UTF-8 encoded in the S3 store.

commit 6cd1a7eb79c510f612762a8ed19155fafcbe8206
Merge: 2374f0a ddfe273
Author: Donal Lafferty <donal.lafferty@citrix.com>
Date:   Tue May 31 13:42:17 2011 +0000

    Added new disk_format type of 'iso'.  Nova can use this information to identify images that have to be booted from a CDROM.
    
    Added unit test to uploading correct and bad image metadata, and of a get of image data.
    
    Updated docs in three locations where 'raw' disk format was expalined.  However, no examples of 'iso' were in headers or API calls added.

commit c78c055ae33514865b6970933e39927d1f78f6ef
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue May 31 09:21:16 2011 -0400

    adding marker & limit params to glance client

commit 2374f0a6ff8222f2d7a4075a9922d93cc1b38e42
Merge: de26f3d a5cd430
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Sun May 29 18:12:03 2011 +0000

    Auto-migrate if the tables don't exist yet.

commit fb8b32bd75f70bba961452e9ddd71de4b4ec833d
Author: jaypipes@gmail.com <>
Date:   Sun May 29 11:58:03 2011 -0400

    Fix up unit tests for S3 after note from Chris. Also fix bug when S3 test was skipped, was returning error by accident.

commit 799e92ec22172c147292ba3c4f4441e4a29cb2bf
Author: jaypipes@gmail.com <>
Date:   Fri May 27 19:49:55 2011 -0400

    * Adds functional test that works with Amazon S3
    * Fixes parsing of "S3 URLs" which urlparse utterly barfs on because
      Amazon stupidly allows forward slashes in their secret keys
    * Update /etc/glance-api.conf for S3 settings
    
    Future refactoring:
    
    * Make the cURL API functional test a base test class and
      extend it to allow setting the default store and store settings. There's
      a bit of duplicate code between this new test case and the cURL test
      case, but we can rework it later.
    * Document the S3 store (need to do this better with Swift, too)

commit f913fc79053f7960a4480dc33b66db65ce4da022
Merge: d11959e de26f3d
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri May 27 15:48:51 2011 -0400

    merging trunk, resolving conflicts

commit d11959e26e70f876e3cbf24ce5f6a54765683d67
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri May 27 15:43:54 2011 -0400

    fixing sql query

commit e77c35b7cc60c0be047aba77c2ca5e539a5f39bb
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri May 27 14:50:10 2011 -0400

    completing marker functionality

commit de26f3d27db795c799a93815907aa6334ac9fd4a
Merge: 3d19761 1b43d37
Author: jaypipes@gmail.com <>
Date:   Fri May 27 17:27:01 2011 +0000

    Call stop_servers() for those 2 test cases missing it.

commit 6392ec7dad599f3ef56944ec8a9e09bcff6a4af6
Merge: ccdc3a8 1b43d37
Author: jaypipes@gmail.com <>
Date:   Fri May 27 13:24:38 2011 -0400

    Merge trunk

commit ddfe27320b092cd705501892f806071d34889c85
Author: Donal Lafferty <donal.lafferty@citrix.com>
Date:   Fri May 27 15:50:51 2011 +0100

    Correct documentation.

commit 1b43d37b07ac7f179b0f6213f055e865df7d5881
Author: jaypipes@gmail.com <>
Date:   Fri May 27 10:29:59 2011 -0400

    Add missing stop_servers() calls to two functional test cases.

commit e3083228b8736795b87c4b350b81cb83d00f6180
Author: Donal Lafferty <donal.lafferty@citrix.com>
Date:   Fri May 27 10:43:17 2011 +0100

    Remove changes to stub database.

commit a5cd430b0b1cc5afe35995d96055ab443a3ea691
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Fri May 27 02:24:55 2011 +0000

    Auto-migrate if tables don't exist

commit d82590e6c2e280d89643c4d2a1d96872d3e6e071
Author: Donal Lafferty <donal.lafferty@citrix.com>
Date:   Thu May 26 17:27:42 2011 +0100

    Fix accidental delete.

commit 3b5e254a67ab39985476759eafcd3a5b5c07538c
Author: Donal Lafferty <donal.lafferty@citrix.com>
Date:   Thu May 26 17:08:23 2011 +0100

    Remove additions to FIXTURES in test/stubs.py, which requried changes elsewhere.

commit c54e7bf264d25139841bfefd9c7076cad50d4420
Merge: 491c6aa 3d19761
Author: Donal Lafferty <donal.lafferty@citrix.com>
Date:   Thu May 26 13:53:48 2011 +0100

    Sync with trunk.

commit 3d1976173a64a4412c1849f50b3bcd80c0d37b20
Merge: 1aa4e3b 24625ff
Author: jaypipes@gmail.com <>
Date:   Wed May 25 20:37:10 2011 +0000

    Documentation for new results filtering in the API and client.

commit 24625ffb74ae13e112a740990cb4b2f6f6d97ddb
Author: jaypipes@gmail.com <>
Date:   Wed May 25 16:03:00 2011 -0400

    Fix tiny typo

commit ccdc3a8b46c2113b05f939d4303f338331471338
Merge: 0731152 1aa4e3b
Author: jaypipes@gmail.com <>
Date:   Wed May 25 13:19:05 2011 -0400

    Merge trunk

commit 37b1c2901ec29b43feb42d842413b2cbd3ffadde
Author: jaypipes@gmail.com <>
Date:   Wed May 25 11:03:16 2011 -0400

    Documentation for new results filtering in the API and client.

commit ef6f306d72e341133b505d2d478dc0374f310b23
Merge: 4db9df7 1aa4e3b
Author: jaypipes@gmail.com <>
Date:   Wed May 25 10:44:47 2011 -0400

    Merge trunk

commit 1aa4e3b262b907f2888fcc522b6b6c96c3dd72a3
Merge: b6b231f 7ec4851
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed May 25 14:42:02 2011 +0000

    Adding support for query filtering from the glance client library.

commit 7ec48519309fd90f85e2f274d0883cbe64b1863b
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue May 24 15:47:59 2011 -0400

    renaming query_params to params

commit b347f8bca1a8cc7f9d2d2be5e4610a4c97fad747
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue May 24 15:45:43 2011 -0400

    abstracting out filters query param serialization into BaseClient.do_request

commit a9237cbff12590877ebbbd25bb22ab083a994aa9
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue May 24 15:07:19 2011 -0400

    renaming tests to resolve conflict

commit c3aba9a55180192f222a2cd7cda7e77178bbd268
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue May 24 14:52:22 2011 -0400

    adding filters param to get_images and get_images_detailed in glance client

commit 65d06e2f84dc127e15125b1f53650e4309914194
Author: Ewan Mellor <ewan.mellor@citrix.com>
Date:   Mon May 23 19:01:54 2011 -0700

    Bug #787296: test_walk_versions fails with SQLalchemy 0.7
    
    Cap SQLalchemy and sqlalchemy-migrate at 0.6.x.  This works around the
    problem where test_walk_versions fails with 0.7.
    
    It's obviously not a long-term fix.

commit 491c6aab2c0e80da3ba58d1e00aee326121e70ae
Author: Donal Lafferty <donal.lafferty@citrix.com>
Date:   Thu May 19 10:24:59 2011 +0100

    Updated doc with 'iso' disk_format.

commit 2ce002b38bcc8168c62c4925bb74c9d9e4540174
Author: Donal Lafferty <donal.lafferty@citrix.com>
Date:   Thu May 19 10:20:54 2011 +0100

    Update documentation.

commit 593fa8e523c7b2a52f39b2cefaf7749034222887
Merge: 9df794d b6b231f
Author: Donal Lafferty <donal.lafferty@citrix.com>
Date:   Thu May 19 09:23:41 2011 +0100

    Merge changes.
    Update tests. New image indexes relative to existing indexes.

commit b6b231fd153557982a933e149048acf6d0b366ba
Merge: 5a2b5b6 32fa5ad
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed May 18 15:48:07 2011 +0000

    Adding support for api query filtering
    - equality testing on select attributes: name, status, container_format, disk_format
    - relative comparison of size attribute with size_min, size_max
    - equality testing on user-defined properties (preface property name with "property-" in query)

commit fa9c6b6252c32f6336d088577e68aa7e9bc9ff2e
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue May 17 20:32:37 2011 -0400

    updating stubs with new sorting logic; updating tests

commit cbab5d20c61c190b8b24159cc14b6faceec4a6d6
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue May 17 20:19:44 2011 -0400

    fixing some copy/paste errors

commit b35dc0de3ca8a6d284c0ba65fe32a94c91415792
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue May 17 20:17:31 2011 -0400

    fixing some webob exceptions

commit d01588a7d7277e3e7df574795bfaaf0ba301100f
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue May 17 20:14:18 2011 -0400

    slight modification to registry db api to ensure marker works correctly

commit d5d109b735c5381c8d0018941c3b0ab9b4a38bc9
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue May 17 20:11:46 2011 -0400

    slight refactoring per jaypipes' suggestions; sort on get images calls is now created_at desc

commit 9df794d23a4944dc2d69cf6df3f2fd5e6f6d7da7
Author: Donal Lafferty <donal.lafferty@citrix.com>
Date:   Tue May 17 15:56:31 2011 +0100

    Add tests for 'iso' image type.
    Remove hard coding of next available image id in tests.  This prevents new test images from being added to the set generated by tests.unit.stubs.FakeDatastore

commit 70164edbd98a46ec94df38585b1cb75a97c965c9
Merge: 812d9b8 32fa5ad
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue May 17 09:34:42 2011 -0400

    pulling from parent branch

commit 32fa5ad441979d7c67cfbf378bc5410f75fdb07d
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue May 17 09:27:09 2011 -0400

    docstring fix

commit b89e2f1875b23490706e58e16141a994a1019643
Merge: f1b939a 5a2b5b6
Author: Donal Lafferty <donal.lafferty@citrix.com>
Date:   Tue May 17 10:47:38 2011 +0100

    Merge latest with latest Glance.

commit 812d9b880d2eb435d84e8e5ec11d3da48d040bdc
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon May 16 11:17:55 2011 -0400

    pushing marker/limit logic down into registry db api

commit 0931d0dbebf319d6ea316039fbf48a1f7f2ea1a7
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon May 16 10:43:33 2011 -0400

    adding support for marker & limit query params

commit d07be5ab9487e0e3acd645b1de8e2dffaa440602
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon May 16 10:28:41 2011 -0400

    removing some unnecessary imports

commit 45eb5582b3d4adad2f01974e9ed3d372bb34f300
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon May 16 09:20:53 2011 -0400

    making registry db api filters more structured; adding in a bit of sqlalchemy code to filter image properties more efficiently

commit e40fb50f28c90dd2e08cbd02d082d41bd3ba9beb
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Mon May 16 09:02:09 2011 -0400

    consolidating image_get_all_public and image_get_filtered in registry db api

commit 60bfbbdab096c8f74ec7fd691e08731027beccb2
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sun May 15 22:38:44 2011 -0400

    adding test case for multiple parameters from command line

commit fb501c459927b91b2f71a8e34b66adb47bc4aa21
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sun May 15 22:16:49 2011 -0400

    adding custom property api filtering

commit 259d853bf2f18f72988dad4a58c0d0ef4864977f
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sun May 15 20:34:35 2011 -0400

    adding size_min and size_max api query filters

commit fb4576eb3fab1ed81ee3c0e3d6bff3b0bd13e78c
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Sat May 14 21:05:04 2011 -0400

    implemented api filtering on name, status, disk_format, and container_format

commit 5a2b5b68b2d8d190a9540f5de7b19c036e056b33
Merge: 1dc8672 db4eeb9
Author: jaypipes@gmail.com <>
Date:   Sat May 14 02:31:46 2011 +0000

    Adds versioning to the Glance API.
    
    I'd like to just get comments on my approach and go from there. Thanks in advance for review comments!

commit db4eeb91637d1fcaa38a42a78b31aa4b4957648d
Author: jaypipes@gmail.com <>
Date:   Fri May 13 18:28:51 2011 -0400

    Add test and fix for /v1.2/images not properly returning version choices.

commit 82cccf4c03dd17924e0004c7f290fe7d5430e34d
Author: jaypipes@gmail.com <>
Date:   Thu May 12 17:28:25 2011 -0400

    Add more tests for version URIs and accept headers and fix up some of Brian's review comments

commit 94b9c19c402dddf6a8c2eededeea63d9f642cb01
Merge: 77054d4 1dc8672
Author: jaypipes@gmail.com <>
Date:   Wed May 11 19:52:06 2011 -0400

    Fix merge conflict...

commit 77054d402c49c43ab0dbf6b1609f40097392caee
Author: jaypipes@gmail.com <>
Date:   Wed May 11 19:03:51 2011 -0400

    Changes versioned URIs to be /v1/ instead of /v1.0/
    
    Adds middleware that detects versioned URIs and also
    detects media types in the Accept: header and attempts
    to determine the API controller to return for the
    client request.
    
    Adds a bunch of functional test cases for variations
    of calling the versioned and unversioned URIs with and
    without Accept: headers.

commit 1dc867207fd7b6ac93d656c564469e0cf89b74bb
Merge: a0bf107 4db9df7
Author: jaypipes@gmail.com <>
Date:   Wed May 11 17:17:50 2011 +0000

    Improve logging configuration docs...

commit 7f6944c816716b5dfe7fb1f4911110135485c8ed
Author: jaypipes@gmail.com <>
Date:   Tue May 10 12:26:29 2011 -0400

    Doc and docstring fixes from Dan's review

commit bb13fe4c4aaafe425afecfa6eb8272759cd418bd
Author: jaypipes@gmail.com <>
Date:   Mon May 9 15:01:24 2011 -0400

    Removed some test config files that slipped in...

commit 1359d6e2ccf6a9c5db1e16d66f0a23a67aef44e5
Author: jaypipes@gmail.com <>
Date:   Mon May 9 14:55:46 2011 -0400

    Fix up find_config_file() to accept an app_name arg. Update all documentation referencing config files.

commit f1b939a42597c9a56d26ad30d4b7cd619f49f672
Author: Donal Lafferty <donal.lafferty@citrix.com>
Date:   Fri May 6 17:03:50 2011 +0100

    Fix pep8 complaint.

commit bca71e0ffe9be8eb9b25e622340a8f8992ee815e
Author: Donal Lafferty <donal.lafferty@citrix.com>
Date:   Fri May 6 16:06:01 2011 +0100

    Add DISK_FORMAT for 'iso' type images.

commit efa78881ebc91abc342216388aae9a33cbd526f1
Author: jaypipes@gmail.com <>
Date:   Thu May 5 19:12:21 2011 -0400

    Adds versioning to Glance's API.
    
    Important notes:
    
    * Split API and Registry configuration files out into 2 files
      Therefore, we need to update the packaging/upstart scripts
      and documentation
    * The paste.deploy stuff is now ready to go for pipeline-style
      middleware that is coming with authentication
    * /images -> /v1.0/images
    * /versions endpoint added
    * Split out the starting/stopping of servers into a Server class
      in tests.functional.FunctionalTestCase. This was really useful
      to get different configuration files working well.

commit a0bf1074744638845432ab68e754f7a795cf8a91
Merge: eaa24c5 f92cbb5
Author: jaypipes@gmail.com <>
Date:   Thu May 5 16:42:50 2011 +0000

    Changes glance index to return all public images
    in any status other than 'killed'. This should allow
    tools like euca-describe-images to show images while
    they are in a saving/untarring/decrypting state.
    
    One line fix. 110 line test case. :)

commit f92cbb5b03513c527b4d26eea23f4f5c0fb23b70
Author: jaypipes@gmail.com <>
Date:   Wed May 4 11:24:11 2011 -0400

    Fix numbering in comment...

commit 59a8e89c3be8bda60b75d6c7182f50901e8c755f
Author: jaypipes@gmail.com <>
Date:   Wed May 4 11:03:28 2011 -0400

    Fixed doh. Updates test case to test for condition that should have failed with status!='active'

commit 777ff1e4b802cca260dddc8d3e0bf43a9b4e726a
Author: jaypipes@gmail.com <>
Date:   Tue May 3 21:44:28 2011 -0400

    Changes glance index to return all public images
    in any status other than 'killed'. This should allow
    tools like euca-describe-images to show images while
    they are in a saving/untarring/decrypting state.
    
    One line fix. 110 line test case. :)

commit eaa24c578cf91f9bd1dd5e4fa4061ebd24992668
Merge: b902f67 f8dd785
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Apr 29 20:02:42 2011 +0000

    Adding prefilled Authors, mailmap files
    Adding test to validate Authors file is properly set up

commit b902f67ea32ac37ccb4d6f9c2f76768ece71be82
Merge: 8d10e63 c9a22ee
Author: jaypipes@gmail.com <>
Date:   Fri Apr 29 19:02:43 2011 +0000

    Documentation updates to make glance add command clearer, hopefully :)

commit f8dd785a962fd7123795268fdcfce3a977953295
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Apr 27 11:00:49 2011 -0700

    adding Authors functionality; fixing one rogue pep8 violation

commit 4db9df77d0b8cdc4a1598349179d0c9bb1b6165e
Author: jaypipes@gmail.com <>
Date:   Tue Apr 26 16:10:33 2011 -0700

    Improve logging configuration docs...

commit 8d10e637db3fe0fd30e99513749b2c3beb69a5f3
Merge: 40b1324 b3fde25
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Apr 26 21:37:42 2011 +0000

    Prevent users from uploading images with a bad or missing store. Allow deletion from registry when backend cannot be used.

commit 0731152d1349769310c31fa0e833f7e4f354bff6
Author: jaypipes@gmail.com <>
Date:   Tue Apr 26 14:01:16 2011 -0700

    bcwaldon review fixups

commit b3fde25d6d52e49cb0ad3285f81ada12512a96ed
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Apr 26 09:31:48 2011 -0700

    adding comment

commit 40b132475608ded2786e8aac69d9a59e3c1cdcc2
Merge: 779e52f 197e862
Author: jaypipes@gmail.com <>
Date:   Tue Apr 26 04:27:41 2011 +0000

    Fix for bug #768969: glance index shows non-active images; glance show <ID> does not show status.

commit 12a0b2d5f4778802cf8d8bfef63f81d3dcc9eea1
Author: jaypipes@gmail.com <>
Date:   Mon Apr 25 12:11:31 2011 -0400

    Completes the S3 storage backend. The original code did not actually fit
    the API from boto it turned out, and the stubs that were in the unit test
    were hiding this fact.
    
    Adds a unit test that gets S3 testing up to snuff with the Swift backend.

commit 656abb744277c5d15c42e6210c8960baa11f13be
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Apr 22 17:02:56 2011 -0400

    catching NotFound to prevent failure on bad location

commit 7f339e73ae2fcd8019df368d392858bfa22e36ac
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Apr 22 16:51:08 2011 -0400

    Prevent requests with invalid store in location param

commit 29f45c563e9cc8fa3876f79d0b1fb105bb69553c
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Apr 22 16:31:29 2011 -0400

    Allow registry deletion to succeed if store deletion fails

commit c9a22eeb6ce930659d63266d2d6e3480c5d539ee
Author: jaypipes@gmail.com <>
Date:   Fri Apr 22 14:54:24 2011 -0400

    Documentation updates to make glance add command clearer, hopefully :)

commit 197e862bfeb7d6951d09cfd0a1bb61f02dc416d9
Author: jaypipes@gmail.com <>
Date:   Fri Apr 22 13:57:19 2011 -0400

    Fix for LP Bug #768969.
    
    Two things were happening that this patch corrects:
    
    a) If adding an image fails, the glance add output says that
       adding the image failed, however, doing a glance index would
       show the image. This was because the call to get all public
       images was not correctly filtering the result for 'active'
       status images. The image failing to be added causes the image
       status to be 'killed', and so killed images should not appear
       in the output of glance index or glance detail.
    b) glance show <ID> was not showing the status of the image, so
       it was not clear that the image, while not added successfully,
       was still in the registry, but in a 'killed' status.
    
    I added a note to the output of the failed add command that the
    Glance registry may still have an image record, but the status
    would likely be in the 'killed' state.
    
    Added a functional test case that verified the behaviour in the bug
    and verified the fix, once coded.

commit 779e52f60a6deb1d1f83c4b9bd26a292ace34e28
Merge: 32e9b88 de1800b
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Apr 22 16:22:41 2011 +0000

    Expanding user confirmation default behavior.

commit de1800b4b3880569aebd902e1488be51d70fd629
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Apr 22 11:14:14 2011 -0400

    removing excessive exception handling

commit 8a9e4327c4ef159b7784565f817030cb2aba9889
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Apr 22 10:50:59 2011 -0400

    pep8 fixes

commit f9de2f3ef5afd035bfd8fcfaef5a085fe684c429
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Apr 22 10:48:50 2011 -0400

    docstring and exception handling

commit 7cbd2a6870e8a8e8e2daaccb071716da4eba4b24
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Fri Apr 22 10:37:51 2011 -0400

    Expanding user_confirm default behavior

commit 32e9b882e159f14601cba8cd7efcb8959fdc113e
Merge: 50a9f90 0c6403f
Author: Joseph Suh <jsuh@bespin>
Date:   Thu Apr 21 15:07:43 2011 +0000

    I modified documentation to show more first-time user friendly examples on using glance. With the previous examples, I followed it as a first-time user and had to spend more than necessary time to figure out how to use it. With this modification, other first-time users would make it work on their systems more quickly.

commit 50a9f90b7dcf17ac398ac3d508e0ae4eb9003e2c
Merge: 25077d4 4ba7a1c
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Thu Apr 21 02:17:43 2011 +0000

    - Require user confirmation for "bin/glance clear" and "bin/glance delete <id>"
    - Allow for override with -f/--force command-line option

commit 4ba7a1c80a78c87418021ab8a659fd7b6e2068f5
Merge: ebd81ca 25077d4
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Wed Apr 20 19:58:10 2011 -0400

    adding --force option to test_add_clear

commit 25077d444295d03abc1715ee91c8167ccae3b9ec
Merge: 7d0f1d2 32d04b3
Author: jaypipes@gmail.com <>
Date:   Wed Apr 20 20:47:40 2011 +0000

    Adds a test case for updating an image's Name attribute. glance update was not regarding 'name' as a top-level modifiable attribute...

commit 32d04b3bbaea57a70daac2ebfaec5be4e041f9c1
Author: jaypipes@gmail.com <>
Date:   Wed Apr 20 15:12:18 2011 -0400

    Name is an attribute that is modifiable in glance update, too..

commit 7d0f1d2fef6c9e253aaefe651ea00ebbaf079676
Merge: 5f3f566 5e35359
Author: Dan Prince <dan.prince@rackspace.com>
Date:   Wed Apr 20 18:37:42 2011 +0000

    Mark image properties as deleted when deleting images.
    Added a unit test to verify public images and their properties get deleted when running a 'glance clear' command.

commit 5e35359d45232af097e143fc4067afc5adc7c1a1
Author: Dan Prince <dan.prince@rackspace.com>
Date:   Wed Apr 20 14:08:04 2011 -0400

    Update tests and .bzrignore to use tests.sqlite instead of glance.sqlite.

commit 47af47787b52052950012b36ea7257650d1ba5e4
Author: Dan Prince <dan.prince@rackspace.com>
Date:   Wed Apr 20 14:01:19 2011 -0400

    Only modify the connection URL in runs_sql if the original connection
    string starts with 'sqlite'.

commit 896c81209d0e123ce74f0af6b67710a66ac2431e
Merge: fe7a8e9 d071d65
Author: Dan Prince <dan.prince@rackspace.com>
Date:   Wed Apr 20 13:40:39 2011 -0400

    Merge in code from lp:~jaypipes/glance/clear_image_props to make a nice
    decorator function we can use for tests that need to run backend SQL
    commands. This should keep our tests zippy but provide us the access we
    need for disk based DB access.

commit d071d6548f16a0dac281365abc41e3f10283b58c
Author: jaypipes@gmail.com <>
Date:   Wed Apr 20 13:27:02 2011 -0400

    Create a decorator that handles setting the SQL store to a disk-based SQLite database when arbitrary SQL statements need to be run against the registry database during a test case

commit fe7a8e9ec1dc53d8765c60d2b9995a9459bd7da7
Author: Dan Prince <dan.prince@rackspace.com>
Date:   Wed Apr 20 12:06:20 2011 -0400

    Docstring update on the run_sql_command function.

commit a13fa8a6bd07cd91d4a590bc1415a51be4b392bb
Author: Dan Prince <dan.prince@rackspace.com>
Date:   Wed Apr 20 11:07:44 2011 -0400

    Mark image properties as deleted when deleting images.
    Added a unit test to verify public images and their properties get deleted
    when running a 'glance clear' command.

commit 5f3f566ea7197f6694572f6e7bfe8c71655e940f
Merge: a4a4226 5ae1687
Author: jaypipes@gmail.com <>
Date:   Tue Apr 19 22:32:40 2011 +0000

    Add log_file to example glance.conf

commit ebd81ca0f3f36a48378639871ba12f8f847bc457
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Apr 19 15:15:40 2011 -0400

    fixing spacing in help text

commit 860e8c57a237dd63798f9f50d4acd9cba7e8026d
Author: Brian Waldon <brian.waldon@rackspace.com>
Date:   Tue Apr 19 15:12:52 2011 -0400

    adding confirmation on image delete/clear; adding user_confirm functionality

commit 5ae168752c759ba4f3bf0f25f150a8ba30af8397
Author: jaypipes@gmail.com <>
Date:   Tue Apr 19 15:07:07 2011 -0400

    Add log_file to example glance.conf

commit a4a4226401b223bfc871a441e0679a4278d4776d
Merge: 38d6e62 cd4a41b
Author: jaypipes@gmail.com <>
Date:   Tue Apr 19 17:54:32 2011 +0000

    Make sure we use get_option() when dealing with boolean values
    read from configuration files...otherwise "False" is True :(

commit 38d6e62e67668bf9bb5d79992f438f95a8569366
Merge: 0dba121 2ff7a17
Author: Eldar Nugaev <enugaev@griddynamics.com>
Date:   Tue Apr 19 16:32:41 2011 +0000

    Fixing tests.
    Sorry for late response.
    
    Rick Harris wrote on 2011-04-12
    Really nice job, Eldar.
    
    > 46	+        image_swift = StringIO.StringIO("nevergonnamakeit")
    > 47	+        options = SWIFT_OPTIONS.copy()
    > 48	+        del options['swift_store_user']
    > 49	+        self.assertRaises(BackendException,
    > 50	+                          SwiftBackend.add,
    > 51	+                          2, image_swift, options)
    
    Might be better to DRY up the code some by adding a helper-method, like:
    
    def assertOptionRequiredForSwift(self, key):
      image_swift = StringIO.StringIO("nevergonnamakeit")
      options = SWIFT_OPTIONS.copy()
      del options[key]
      self.assertRaises(BackendException,
        SwiftBackend.add,
        2, image_swift, options)
    
    Marking as Needs Fixing, but if you don't like the idea, I'd be willing to set this as Approved (since the suggestion is so minor :-)

commit cd4a41b44f38ce2d4cb802c54e834ce246a47161
Author: jaypipes@gmail.com <>
Date:   Tue Apr 19 11:43:36 2011 -0400

    Make sure we use get_option() when dealing with boolean values
    read from configuration files...otherwise "False" is True :(

commit 0c6403f454fec1c58ee9032d3033db1a8219ba5b
Merge: 8b7927c d7ce2b9
Author: Joseph Suh <jsuh@bespin>
Date:   Mon Apr 18 16:37:48 2011 -0400

     resolve merge conflicts

commit 8b7927c28744872c556f726a75ec2ce477405bf2
Author: Joseph Suh <jsuh@bespin>
Date:   Mon Apr 18 16:30:44 2011 -0400

    chnaged output

commit 0dba121f03f5a98bbbb90320a51aebefd27a5266
Merge: e4ae52d 772658f
Author: Thierry Carrez <thierry@openstack.org>
Date:   Fri Apr 15 12:32:43 2011 +0000

    Open Diablo release.

commit 772658fa4ab98786af5df180ec944b56c88ec379
Author: Thierry Carrez <thierry@openstack.org>
Date:   Fri Apr 15 11:47:55 2011 +0200

    Diablo versioning

commit e4ae52d0b4a3e22b0dce1ca58e890bfc2756cd05
Merge: 1975f16 c9d3211
Author: Soren Hansen <soren@openstack.org>
Date:   Fri Apr 15 09:34:17 2011 +0000

    Fake merge with ancient trunk. This is only so that people who "accidentally" have been following lp:~hudson-openstack/glance/trunk will not have problems updating to this.

commit 1975f1693380bae370245fbbf1eb6dbd409dcc72
Merge: 3dcfd4a aa71659
Author: Thierry Carrez <thierry@openstack.org>
Date:   Thu Apr 14 22:03:01 2011 +0000

    Final versioning for Cactus

commit 2ff7a179c3826260c25357e84d9847e81fc1843f
Author: Eldar Nugaev <enugaev@griddynamics.com>
Date:   Thu Apr 14 03:18:26 2011 +0400

    fixing after review

commit 3dcfd4a3b4c4ada91b528db3914a00ec55885327
Merge: 5a42a92 046a4e6
Author: jaypipes@gmail.com <>
Date:   Wed Apr 13 22:07:59 2011 +0000

    Removes capture of exception from eventlet in _upload_and_activate(), which catches the exceptions that come from the _safe_kill() method properly.
    
    Also fixes an incorrect call to _safe_kill() with mapping instead of image ID in the block of code that kills an image if a bad checksum is given.
    
    Fixes bug #759018.

commit 046a4e628721c257fb3de82ef60c279ceefb7696
Author: jaypipes@gmail.com <>
Date:   Wed Apr 13 17:00:08 2011 -0400

    RickH fixups from review

commit 3a3dee990ad0121c225ee4578fbd568dda7c509e
Author: jaypipes@gmail.com <>
Date:   Wed Apr 13 15:14:36 2011 -0400

    Add catch-all except: block in _upload()

commit d7ce2b96d3406406a4ab55f1d8890126d4885c57
Author: Joseph Suh <jsuh@bespin>
Date:   Wed Apr 13 15:12:46 2011 -0400

    change output from glance-registry

commit 388f66eed382e7d97116e3fb02d85dcd69280e91
Merge: 3602bb1 5a42a92
Author: Joseph Suh <jsuh@bespin>
Date:   Wed Apr 13 15:10:06 2011 -0400

    get latest from lp:glance

commit 5a42a92e77018615de60eb7c5ad50f9a14409858
Merge: 9ad6223 1b84b48
Author: jaypipes@gmail.com <>
Date:   Wed Apr 13 17:03:04 2011 +0000

    Ensures that configuration values for debug and verbose are used if command-line options are not set.

commit ad4c92bada610654a80e2682411743add8687ea5
Author: jaypipes@gmail.com <>
Date:   Wed Apr 13 12:44:47 2011 -0400

    Removes capture of exception from eventlet in _upload_and_activate(), which
    catches the exceptions that come from the _safe_kill() method properly.
    
    Also fixes an incorrect call to _safe_kill() with mapping instead of image
    ID in the block of code that kills an image if a bad checksum is given.
    
    Fixes bug #759018.

commit 9ad6223fd1677a66b6af1e5c638c1a80d794c61e
Merge: 9ed5eef f46c961
Author: Eldar Nugaev <enugaev@griddynamics.com>
Date:   Wed Apr 13 12:57:52 2011 +0000

    Fix logging in swift

commit 1b84b48a245c6d7a93c45528679f3f802ffb36b2
Author: jaypipes@gmail.com <>
Date:   Wed Apr 13 08:56:45 2011 -0400

    Fix Thierry's notice about switched debug and verbose

commit 9ed5eefd947983076958a7652533a6426f18c4f9
Merge: cb8b358 6703ba1
Author: jaypipes@gmail.com <>
Date:   Wed Apr 13 12:53:02 2011 +0000

    Change parsing of headers to accept 'True', 'on', 1 for boolean truth values.

commit aa716596fdd2cc5e6dcd4ff57c00d96c5db75f96
Author: Thierry Carrez <thierry@openstack.org>
Date:   Wed Apr 13 10:36:44 2011 +0200

    Final cactus versioning

commit 6703ba193e5ea7455777ffdf2d2902593e4204be
Author: jaypipes@gmail.com <>
Date:   Tue Apr 12 17:45:16 2011 -0400

    OK, fix docs to make it clear that only the string 'true' is allowed for boolean headers. Add False-hood unit tests as well.

commit e6f8c72fedb2c3ca323055aad8b60afedc23021e
Author: jaypipes@gmail.com <>
Date:   Tue Apr 12 14:01:27 2011 -0400

    Logging was not being setup with configuration file values for debug/verbose

commit 12fead04efd119d9f6106ab8560eebf06c2b5919
Merge: 65386df cb8b358
Author: jaypipes@gmail.com <>
Date:   Tue Apr 12 13:27:51 2011 -0400

    Merge trunk

commit cb8b3580f7627048c23dd73452392e4a284295a8
Merge: 65386df cc8d96d
Author: jaypipes@gmail.com <>
Date:   Tue Apr 12 17:12:56 2011 +0000

    Fix up the way the exception is raised from _safe_kill()... When I "fixed" bug 729726, I mistakenly used the traceback as the message. doh.

commit 788296100dae6a0ecefff58014bcc0bc422e1874
Author: jaypipes@gmail.com <>
Date:   Mon Apr 11 20:44:06 2011 -0400

    Change parsing of headers to accept 'True', 'on', 1 for boolean truth values.

commit 65386df0b78c770db203f6ef953faa1ba57c17a5
Merge: 74e8627 7582a33
Author: Soren Hansen <soren@linux2go.dk>
Date:   Mon Apr 11 22:22:54 2011 +0000

    Add the migration sql scripts to MANIFEST.in. The gets them included in not only the tarball, but also by setup.py install.

commit 7582a33c79b6fbfda1b68182ce79721113204815
Author: Soren Hansen <soren@linux2go.dk>
Date:   Mon Apr 11 22:21:06 2011 +0200

    Add the migration sql scripts to MANIFEST.in. The gets them included in not only the tarball, but also by setup.py install.

commit cc8d96d550af819202fb4b48e58d5e196397825e
Author: jaypipes@gmail.com <>
Date:   Mon Apr 11 14:57:52 2011 -0400

    Changed raise of exception to avoid displaying incorrect error message in _safe_kill()

commit f46c961ffba6d64c3dcea111e7a9bb71a1015245
Author: Eldar Nugaev <enugaev@griddynamics.com>
Date:   Mon Apr 11 20:53:43 2011 +0400

    fix logging in swift

commit 74e8627738033ff4205ab6388204ac2737451fab
Merge: cc43244 a2c9a1e
Author: jaypipes@gmail.com <>
Date:   Mon Apr 11 14:59:31 2011 +0000

    Changes "key" column in image_properties to "name".

commit cc43244ec3dcf714fcd18a942a190713c568b5f8
Merge: b786ade e8ab6b9
Author: Dan Prince <dan.prince@rackspace.com>
Date:   Mon Apr 11 14:43:00 2011 +0000

    Updated properties should be marked as deleted=0. This allows previously deleted properties to be reactivated on an update.
    
    Add unit tests to check the above condition.
    
    Also updated the help for bin/glance's 'update' command so that it explicitly states:
    
     Metadata fields that are not specified in the update command will be deleted.

commit b786ade24f6ebb13f9164790460ec0fef2aee2fc
Merge: 9311501 9651745
Author: jaypipes@gmail.com <>
Date:   Mon Apr 11 14:37:54 2011 +0000

    Adds --config-file option to common options processing.
    
    Updates glance-manage to use configuration files as well
    as command line options.
    
    Completes documentation on configuring Glance's servers
    and CLI tools.

commit e8ab6b9503fd46673f0c1b3d51a46ac6f3125ccf
Author: Dan Prince <dan.prince@rackspace.com>
Date:   Thu Apr 7 22:11:49 2011 -0400

    Update the docs in bin/glance so that help for the 'update' command states
    that metadata not specified will be deleted.

commit 0178eb424108057cd12044440458624e37c456bb
Merge: 5b9aeee 9311501
Author: Dan Prince <dan.prince@rackspace.com>
Date:   Thu Apr 7 22:05:38 2011 -0400

    Merge w/ trunk.

commit a2c9a1eb5ce3b5abd650811ad9c97d5aa307af8a
Merge: c148274 9311501
Author: jaypipes@gmail.com <>
Date:   Thu Apr 7 15:07:36 2011 -0400

    Merge trunk, resolve conflicts, and 005 -> 006 the migration scripts.

commit 96517452e5d4f540f89404f09452b9dbb66483b4
Author: jaypipes@gmail.com <>
Date:   Thu Apr 7 14:54:07 2011 -0400

    Fix config test fixtures and pep8 error in bin/glance-manage

commit 8e04665f3916c42dc910426f4a4aa1ae14cf404e
Merge: 4eaf065 9311501
Author: jaypipes@gmail.com <>
Date:   Thu Apr 7 14:51:07 2011 -0400

    Merge trunk

commit 93115010a7a4d363ea4e82ab66df8356fab06b4b
Merge: a9f7d1c a3e529f
Author: Donal Lafferty <donal.lafferty@citrix.com>
Date:   Wed Apr 6 20:32:57 2011 +0000

    Provide revised schema and migration scripts for turning 'size' column in 'images' table to BIGINT. This overcomes a 2 gig limit on images sizes that can be downloaded from Glance.

commit 5b9aeeeb0d94c8631527b67a0106f177e4ce88a6
Author: Dan Prince <dan.prince@rackspace.com>
Date:   Wed Apr 6 13:34:58 2011 -0400

    Updated properties should be marked as deleted=0.
    Add unit tests.

commit a9f7d1caa8f63d42a3e416d954dfeb1dc359e402
Merge: 58ffbd0 b70c12d
Author: jaypipes@gmail.com <>
Date:   Wed Apr 6 16:32:51 2011 +0000

    Use logging module, not echo, for logging SQLAlchemy. Fixes bug 746435.

commit b70c12d18d3c55f628744adcd4ca71012911397f
Author: jaypipes@gmail.com <>
Date:   Wed Apr 6 11:17:34 2011 -0400

    Change order of setting debug/verbose logging. Thanks for spotting this, Elgar.

commit 58ffbd03c22ad2d69f8ba759cfa67eb523527d9c
Merge: 9c29336 edbb503
Author: jaypipes@gmail.com <>
Date:   Wed Apr 6 14:32:51 2011 +0000

    Use logging module, not echo, for logging SQLAlchemy. Fixes bug 746435.

commit 9c29336ee3174438d6b103331740e7ba0fda788d
Merge: bdd71d8 b1754fb
Author: jaypipes@gmail.com <>
Date:   Tue Apr 5 20:42:53 2011 +0000

    Ensure we don't ask the backend store to delete an image if the image is in a queued or saving state, since clearly the backend state has yet to completely store the image.

commit c14827491b5f2cf2e365d5644bae8b7bb24fd28f
Author: jaypipes@gmail.com <>
Date:   Mon Apr 4 15:41:34 2011 -0400

    Changes "key" column in image_properties to "name".
    
    As with all things migration, this was a pain in the ass.
    
    MySQL doesn't support RENAME INDEX, so a custom SQL migration
    file for it was needed.
    
    Likewise, SQLite doesn't support either RENAME INDEX or
    ALTER TABLE CHANGE COLUMN, so it also needed a custom migration
    script.

commit edbb503547eef35838747bc543f8217d7f70e4c9
Author: jaypipes@gmail.com <>
Date:   Mon Apr 4 13:58:38 2011 -0400

    Use logging module, not echo for logging SQLAlchemy.

commit 4eaf065305a8b811dc76d88261e39213fa105c15
Author: jaypipes@gmail.com <>
Date:   Mon Apr 4 13:00:26 2011 -0400

    Updates glance-manage to use configuration files as well
    as command line options.
    
    Completes documentation on configuring Glance's servers
    and CLI tools.

commit b1754fb076486efbdb7c7263a023984e007db707
Author: jaypipes@gmail.com <>
Date:   Mon Apr 4 10:32:14 2011 -0400

    Ensure we don't ask a backend store to delete an image if the image is queued or saving.

commit a3e529f8860c6c00ad0d52403052d0ec785f685b
Author: jaypipes@gmail.com <>
Date:   Mon Apr 4 09:59:07 2011 -0400

    Moved migration into Python script, otherwise PostgreSQL was not migrated. Added changes to the functional test base class to reset the data store between tests. GLANCE_SQL_CONNECTION env variable is now GLANCE_TEST_SQL_CONNECTION.

commit 01fea4a95599c68952858f9d68bd9ffc0ad65ae9
Merge: c2dc5cc aefd263
Author: jaypipes@gmail.com <>
Date:   Fri Apr 1 11:49:59 2011 -0400

    Merge Donal

commit c2dc5ccb696696c835539d0ef2390e06e36132e1
Merge: 81ecca0 bdd71d8
Author: jaypipes@gmail.com <>
Date:   Fri Apr 1 11:49:23 2011 -0400

    Merge trunk

commit 3602bb11b696d9b633d7911f3a3a72041ba3e6f0
Author: Jinwoo 'Joseph' Suh <jsuh@isi.edu>
Date:   Thu Mar 31 13:30:46 2011 -0500

    changed to more typical examples

commit aefd2639374360e5610490c8208770f2e352ee11
Author: Donal Lafferty <donal.lafferty@citrix.com>
Date:   Thu Mar 31 17:48:29 2011 +0100

    Add migration scripts for revising the datatype of the 'size' column in the images table.

commit 84051230f523294a1ea57bcdb3560bcdb4fda84e
Author: Donal Lafferty <donal.lafferty@citrix.com>
Date:   Thu Mar 31 15:43:28 2011 +0100

    Changes to database schema required to support images larger than 2Gig on MySQL.  Does not update the migration scripts.

commit bdd71d800780a917899da1d3215e9c16fe3447be
Merge: 226e0df 66c59b4
Author: Dan Prince <dan.prince@rackspace.com>
Date:   Tue Mar 29 19:22:25 2011 +0000

      Updates to the Registry API such that only external requests to
      update image properties purge existing properties. The update_image
      call now contains an extra flag to purge_props which is set to
      True for external requests but False internally.
    
      This resolves with revision 99 where Glance API incidentally deleted
      image metadata when uploading new images.

commit 66c59b4f3c1c512406a703cfc712f5acbac44d8d
Author: Dan Prince <dan.prince@rackspace.com>
Date:   Tue Mar 29 10:27:24 2011 -0400

    Updates to the Registry API such that only external requests to
    update image properties purge existing properties. The update_image
    call now contains an extra flag to purge_props which is set to
    True for external requests but False internally.
    
    This resolves with revision 99 where Glance API incedentally deleted
    image metadata when uploading new images.

commit 2a4a88330cb71f3a49d818fdbe6e436053ae76f1
Merge: 81ecca0 226e0df
Author: jaypipes@gmail.com <>
Date:   Mon Mar 28 15:19:58 2011 -0400

    Merge trunk

commit 226e0dfb2f2c3e1ae1146ec6862db790f057d857
Merge: 06b20cd 095f9b8
Author: Dan Prince <dan.prince@rackspace.com>
Date:   Mon Mar 28 18:02:21 2011 +0000

    Update the glance registry so that it marks properties as deleted if they are no longer exist when images are updated.

commit 06b20cd3d9cec7ef15bb745beedec12512e11e70
Merge: eaee4da 23d8980
Author: jaypipes@gmail.com <>
Date:   Fri Mar 25 19:22:31 2011 +0000

    Simple one.. just add back the Changelog I removed by accident in r94. Fixes bug #742353

commit eaee4da21382ab7b3adc934f660d8861b2ee0f58
Merge: 81ecca0 ddee20b
Author: jaypipes@gmail.com <>
Date:   Fri Mar 25 19:17:35 2011 +0000

    Adds checksumming to Glance.
    
    When adding an image (or uploading an image during PUT operations),
    you may now supply an optional X-Image-Meta-Checksum header. When
    storing the uploaded image, the backend image stores now are required
    to return a checksum of the data they just stored. The optional
    X-Image-Meta-Checksum header is compared against this generated checksum
    and returns a 409 Bad Request if there is a mismatch.
    
    The ETag header is now properly set to the image's checksum now
    for all GET /images/<ID>, HEAD /images/<ID>, POST /images and
    PUT /images/<ID> operations.
    
    Adds unit tests verifying the checksumming behaviour in the API, and
    in the Swift and Filesystem backend stores.
    
    Includes migration script.
    
    NOTE: This does not include the DB migration script. Separate bug will be filed for that.

commit ddee20b558871edb79b0ae6459ecddb3509b6369
Author: jaypipes@gmail.com <>
Date:   Fri Mar 25 14:59:56 2011 -0400

    Uhhhm, stop_servers() should stop servers, not start them! Thanks to Cory for uncovering this copy/paste fail.

commit 4adc8f04e517f1f031a54ea13717a4db6ebe00a5
Author: jaypipes@gmail.com <>
Date:   Fri Mar 25 14:42:24 2011 -0400

    Fix up test case after merging in bug fixes from trunk... expected results were incorrect in curl test

commit cd150fbe321573c459b58382598d96733622e659
Merge: 6852c9e 81ecca0
Author: jaypipes@gmail.com <>
Date:   Fri Mar 25 14:33:54 2011 -0400

    Merge trunk

commit 23d8980b8696e6f40fb121f6bd9e20c01f5652a3
Author: jaypipes@gmail.com <>
Date:   Fri Mar 25 13:08:19 2011 -0400

    Add ChangeLog back to MANIFEST.in

commit 81ecca0470d8facd0aabad86969e8998d51eea6e
Merge: 36d0db0 85f91b7
Author: jaypipes@gmail.com <>
Date:   Thu Mar 24 23:12:29 2011 +0000

    Add migration testing and migration for disk_format/container_format

commit 85f91b771c63614b935ea14db32f2b8d1e6c1918
Merge: 3716d83 36d0db0
Author: jaypipes@gmail.com <>
Date:   Thu Mar 24 19:03:17 2011 -0400

    tests.unit.test_misc.execute -> tests.utils.execute after merge

commit 3716d8399516d344650a274aeb5373b6a02ba32b
Author: jaypipes@gmail.com <>
Date:   Thu Mar 24 15:31:30 2011 -0400

    Allow someone to set the GLANCE_TEST_MIGRATIONS_CONF environment
    variable to override the config file to run for the migrations
    unit test:
    
    pipes@serialcoder:~/repos/glance/bug730213$ GLANCE_TEST_MIGRATIONS_CONF=/tmp/glance_test_migrations.conf ./run_tests.sh -V tests.unit.test_migrations
    TestMigrations
        test_no_data_loss_2_to_3_to_2                               OK
            test_walk_versions                                          OK
    
            ----------------------------------------------------------------------
            Ran 2 tests in 2.744s
    
    This will make Monty happy so that Hudson can test more than just SQLite...

commit 095f9b86a4c36ccc233ac17e2f1cf359a13f0fdf
Author: Dan Prince <dan.prince@rackspace.com>
Date:   Wed Mar 23 14:23:20 2011 -0400

    Update the glance registry so that it marks properties as deleted if
    they are no longer in the update list.

commit 36d0db08f66938b05f93e9951d377ff1f8b02652
Merge: b8466c5 b7fcf16
Author: jaypipes@gmail.com <>
Date:   Wed Mar 23 18:22:26 2011 +0000

    Start eventlet WSGI server with a logger to avoid stdout output.
    
    Resubmitted to depend on the lp:~jaypipes/glance/bug731304 branch and not the lp:~jaypipes/glance/bug736295 branch, since lp:~jaypipes/glance/bug731304 contains all those fixes for bug736295.

commit b8466c53dbde1c9f5ec0ca1911a85bd7e94020c2
Merge: 5c78a0e 6ada142
Author: jaypipes@gmail.com <>
Date:   Wed Mar 23 16:39:11 2011 +0000

    Adds robust functional testing to Glance.

commit 6852c9ee1ff9baf7ea21e5e0e11e8984a8315fba
Author: jaypipes@gmail.com <>
Date:   Wed Mar 23 10:52:47 2011 -0400

    Add migration script for checksum column

commit be811f3ef45da52ed1d350a814022909cfb15f84
Merge: 67f5d86 c8d5756
Author: jaypipes@gmail.com <>
Date:   Wed Mar 23 10:50:11 2011 -0400

    Merge fix from bug730213

commit c8d5756e9dae046dfe33bc132d7d75feda248d22
Author: jaypipes@gmail.com <>
Date:   Wed Mar 23 10:49:20 2011 -0400

    Fixed an oops. Didn't realized Repository.latest returned a 0-based version number, and forgot to reversed() the downgrade test

commit 67f5d86260d77aee04d0cbb5f0885aedd89c02da
Merge: 0d7b3bb b6cc6e4
Author: jaypipes@gmail.com <>
Date:   Wed Mar 23 10:20:13 2011 -0400

    Merge bug730213 (Migration fixes and tests)

commit 0d7b3bb668068ac1037a9b473c8f631b4d3e5ebf
Merge: b2ec714 5c78a0e
Author: jaypipes@gmail.com <>
Date:   Wed Mar 23 10:16:10 2011 -0400

    Merge trunk and resolve conflicts

commit b6cc6e45606c250e0eb0b1395a4ba9ae23e480ca
Author: jaypipes@gmail.com <>
Date:   Wed Mar 23 09:45:11 2011 -0400

    OK, migrations are finally under control and properly tested.
    
    Don't think I need to stress how painful this was. I reworked
    the TestMigrations test case to properly test walking the
    upgrade and downgrade paths for multiple databases. The databases
    used in test_migrations are now configurable by placing sql connection
    strings in the /tests/unit/test_migrations.conf file, which defaults
    to SQLite-only but has an example of MySQL as well. I'll work with
    Monty to set up MySQL and PostgreSQL on the Jenkins box so we can
    verify migrate scripts on all major target DB platforms.
    
    There are a number of bugs in SA-Migrate that have workarounds in
    this patch. Issue 99 (http://code.google.com/p/sqlalchemy-migrate/issues/detail?id=99)
    means that MySQL change scripts cannot contain >1 SQL statement, which
    essentially means for MySQL, you *have* to use a Python change script.
    However, Issue 117 (http://code.google.com/p/sqlalchemy-migrate/issues/detail?id=117)
    points out that you *cannot* use a Python change script when your
    database is SQLite and you need to ALTER a table by adding or dropping
    a column and the table has secondary indexes on it (which, by chance,
    Glance registry's images table did have (on is_public and deleted columns).
    So, for SQLite in these situations, you *must* use a SQL changescript, which
    is why you see both a 003_add_disk_format.py Python change script, which
    is used for MySQL/PostgreSQL and 003_sqlite_downgrade.sql and 003_sqlite_upgrade.sql
    scripts in the migrate repo.
    
    There is a new test case verifies that data is not lost when moving
    from schema v2 to v3, where the type column is removed from the images
    table. I place the values that were in the type column into the image_properties
    table as records with a key column values of 'type'. The test case verifies
    that on upgrade from v2 to v3, the type column values are preserved as
    image properties, and on downgrade from v3 to v2, the type properties
    are re-inserted into the images.type column.
    
    Phew.

commit 6ada142538aa5d5dd1258036e552d343b753b53d
Author: jaypipes@gmail.com <>
Date:   Mon Mar 21 15:23:52 2011 -0400

    Remove non-existing files from MANIFEST.in

commit 4917c6917ffe98c1dabf5cb94394e2a0ec25c1d3
Merge: 95dcc39 5c78a0e
Author: jaypipes@gmail.com <>
Date:   Mon Mar 21 15:22:34 2011 -0400

    Merge trunk

commit 5c78a0e7f219388ff28c58fa0d51713c1a17e0b2
Merge: c898d9c b892a42
Author: Andrey Brindeyev <abrindeyev@griddynamics.com>
Date:   Mon Mar 21 14:12:27 2011 +0000

    Removed glance-combined. Fixed README

commit b892a42631c474856a30dfd97823996d8ee24568
Author: Andrey Brindeyev <abrindeyev@griddynamics.com>
Date:   Mon Mar 21 15:22:26 2011 +0300

    Removed glance-commit

commit ea0104ef1e3b0a8c8a38ed864718ed4b314b4b56
Author: jaypipes@gmail.com <>
Date:   Sun Mar 20 12:04:19 2011 -0400

    Re-raise _safe_kill() exception in non-3-arg form to avoid pep8 deprecation error.

commit 95dcc39fc9d24702c99a037fb336c7a05b997baa
Merge: c149503 c898d9c
Author: jaypipes@gmail.com <>
Date:   Sat Mar 19 10:26:13 2011 -0400

    Merge trunk and fix from Ewan

commit c898d9c0992aa61f4ae35b1ad7c57e1575756dc2
Merge: 4f8fe5a 4791da2
Author: Ewan Mellor <ewan.mellor@citrix.com>
Date:   Sat Mar 19 13:47:23 2011 +0000

    Bug #737979: glance-control uses fixed path to Python interpreter, breaking virtualenv
    
    Change #!/usr/bin/python to #!/usr/bin/env python.

commit 4791da25bacd72d34725820ed7b6f707f7429ce1
Author: Ewan Mellor <ewan.mellor@citrix.com>
Date:   Sat Mar 19 03:03:46 2011 +0000

    Bug #737979: glance-control uses fixed path to Python interpreter, breaking virtualenv
    
    Change #!/usr/bin/python to #!/usr/bin/env python.

commit 4f8fe5a492b65464705444416e462b3bb3ee57e8
Merge: d2db5a3 bdc4b1c
Author: jaypipes@gmail.com <>
Date:   Fri Mar 18 20:17:22 2011 +0000

    Removes glance-combined and fixes TypeError from bad function calls in glance-manage.

commit b7fcf16b1292b12594bab05eed830c4d05f71a3b
Author: jaypipes@gmail.com <>
Date:   Fri Mar 18 12:37:46 2011 -0400

    Start eventlet WSGI server with a logger to avoid stdout output

commit c1495033a0c635760c87966ed17d77beb86f7787
Author: jaypipes@gmail.com <>
Date:   Fri Mar 18 10:23:58 2011 -0400

    Pass boolean values to glance.client as strings, not integers

commit e70bccae0f060f874842a9d889d54d3afa5ba155
Author: jaypipes@gmail.com <>
Date:   Thu Mar 17 18:15:41 2011 -0400

    Small adjustment on wait_for_servers()... fixed infinite loop possibility

commit b936e28cd33ecfd6786fa0c6a05e9c192017531a
Author: jaypipes@gmail.com <>
Date:   Thu Mar 17 17:43:26 2011 -0400

    Adds robust functional testing to Glance.
    
    - Add /tests/functional/*
    - tests.functional.FunctionalTest is the base class for
      any test that needs to execute against *actual* Glance
      API and registry servers instead of stubbed out fakes.
    - Adds functional test case that uses cURL to execute a
      series of actions against the API server
    - Adds functional test case that uses bin/glance to
      execute a series of actions against the API server

commit 7e701349546ed7aa72abe3cb322c18a22caa0d17
Author: jaypipes@gmail.com <>
Date:   Thu Mar 17 17:09:06 2011 -0400

    Ensure Content-type set to application/octet-stream for GET /images/<ID>

commit b6fdefd9ec718f8d54e4e64868eac0c928abac55
Author: jaypipes@gmail.com <>
Date:   Thu Mar 17 17:05:38 2011 -0400

    Ensure Content-Length sent for GET /images/<ID>

commit 7040ce5036830d0591f5f9c90c78548638510d90
Author: jaypipes@gmail.com <>
Date:   Thu Mar 17 15:57:47 2011 -0400

    HTTPBackend.get() needed options in kwargs

commit bdc4b1c8e66e8e06866e391ec5043a13cff8fc11
Author: jaypipes@gmail.com <>
Date:   Thu Mar 17 10:39:50 2011 -0400

    Remove glance-combined (use glance-control all start). Fix glance-manage to call the setup_logging() and add_logging_options() methods according to the way they are called in glance-api and glance-registry

commit d2db5a3b709d646aebe533183c73035369f706f5
Merge: feb92e7 7d32277
Author: jaypipes@gmail.com <>
Date:   Wed Mar 16 19:27:26 2011 +0000

    Support account:user:key in Swift URIs. Adds unit tests for various calls to parse_swift_tokens()

commit feb92e7d17056cba55678e8c688867db73fcd27c
Merge: a20158e 3926bfe
Author: jaypipes@gmail.com <>
Date:   Wed Mar 16 18:32:36 2011 +0000

    Adds documentation on configuring logging and a unit test for checking simple log output

commit 7d322773d618467e2951473d09c431d359ed45d7
Author: jaypipes@gmail.com <>
Date:   Wed Mar 16 12:45:01 2011 -0400

    Support account:user:key in Swift URIs. Adds unit tests for various calls to parse_swift_tokens()

commit 385341a94ec0bf1290f78342d9d9a1aa32ae9ec6
Author: jaypipes@gmail.com <>
Date:   Wed Mar 16 12:34:04 2011 -0400

    Cherry pick r86 from bug720816

commit 7d51420e89f84fe933f7d9266bcb25ab3d205cf9
Author: jaypipes@gmail.com <>
Date:   Wed Mar 16 12:33:51 2011 -0400

    Cherry pick r87 from bug720816

commit 3926bfe78df75d9e06f82bc6be015f5f1d0c0013
Author: jaypipes@gmail.com <>
Date:   Wed Mar 16 12:30:09 2011 -0400

    Fixed run_tests.py addError() method since I noted it was faulty in another branch...

commit 599aec7b814ce5bb63bea137d8fe4710a14210d3
Author: jaypipes@gmail.com <>
Date:   Wed Mar 16 12:13:07 2011 -0400

    Tiny pep8'ers

commit 09916c2a4048e555afb74b9049c857bb1a9c4040
Merge: 4e4167c a20158e
Author: jaypipes@gmail.com <>
Date:   Wed Mar 16 12:11:56 2011 -0400

    Merge trunk and resolve conflict

commit a20158e7d79f7140b4048028ee43bd54427c5f26
Merge: 12f5450 f561c6e
Author: Taku Fukushima <tfukushima@dcl.info.waseda.ac.jp>
Date:   Wed Mar 16 15:17:20 2011 +0000

    I stole the colorized code from nova.

commit f561c6e460b5d35f82025a90a30927ef30abec87
Author: Taku Fukushima <tfukushima@dcl.info.waseda.ac.jp>
Date:   Wed Mar 16 15:43:16 2011 +0900

    Fix typo

commit 12f5450009c7fd981eb55c033df72cbdd862ed47
Merge: ea52216 63db7f5
Author: Monty Taylor <mordred@inaugust.com>
Date:   Tue Mar 15 17:32:25 2011 +0000

    A quick patch to allow running the test suite on an alternate db backend.

commit 63db7f59aaa25aebe2b6e67864aac6027659928f
Merge: eef2664 ea52216
Author: Monty Taylor <mordred@inaugust.com>
Date:   Mon Mar 14 12:10:24 2011 -0700

    Merged trunk -resolved conflicts.

commit d523eb9fa5bd3e2a540d33e641ee163ca506e0d5
Author: Taku Fukushima <tfukushima@dcl.info.waseda.ac.jp>
Date:   Fri Mar 11 12:09:40 2011 +0900

    [Add] colorization stolen from nova

commit ea52216d9d5d2facd6685cd184e9d4cca0853e04
Merge: 4900126 4d7df85
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Mar 9 22:17:06 2011 +0000

    Don't require swift module for unit-tests

commit 4d7df857ca7bc43485df7a5977774e8e775e9c5a
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Mar 9 15:59:56 2011 -0600

    Pep8 fix

commit c3aa5a706c0b1e50b786f4bafbb3fa2c08178c8c
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Mar 9 15:35:38 2011 -0600

    Backing out unit-test workaround

commit eef2664dda2cf30d92280405a886a9dd88254862
Author: Monty Taylor <mordred@inaugust.com>
Date:   Wed Mar 9 13:03:29 2011 -0800

    Changed to have 2 slashes.

commit c6ae25b2c938d8f89e9532727789520bec4766c2
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Mar 9 14:17:37 2011 -0600

    Allow unit-tests to run without swift module

commit 4e4167cca7b31042133b04cf38c28bb16e9825b7
Author: jaypipes@gmail.com <>
Date:   Wed Mar 9 12:33:52 2011 -0500

    Remove spurios comment in test file

commit 49001264d422bc0330b49a5bfd51ca312d71d6ad
Merge: e3a1725 72aa1eb
Author: jaypipes@gmail.com <>
Date:   Wed Mar 9 13:47:14 2011 +0000

    Add Glance CLI tool

commit 72aa1eba7ce90d8184379c6f3d1dc1d3d27f61aa
Author: jaypipes@gmail.com <>
Date:   Wed Mar 9 08:38:25 2011 -0500

    Silly mistake when resolving merge conflict...fixed

commit 0c25ad6ca1daf7a0f87933feeee4fa08a3565ee5
Merge: 3dc0d8d e3a1725
Author: jaypipes@gmail.com <>
Date:   Tue Mar 8 19:07:44 2011 -0500

    Merge trunk and resolve conflicts

commit e3a17257d5b8279e294516e1d77012d378c12d95
Merge: 665d4ea 6ab6bcf
Author: Vishvananda Ishaya <vishvananda@gmail.com>
Date:   Tue Mar 8 23:42:01 2011 +0000

    Fixes passing of None values in metadata by turning them into strings.  Also fixes the passing of the deleted column by converting it to and from a bool.  The test for passing metadata was updated to include these values.

commit 75575b41c6598e4e7c60fd216f16fd805b997930
Author: jaypipes@gmail.com <>
Date:   Tue Mar 8 16:52:38 2011 -0500

    Adds documentation on configuring logging and a test that log_file works. It didn't, so this also inludes fixes for setting up log handling :)

commit 6ab6bcfd347f49a5d9d080353bb0edce5e3eec58
Author: Vishvananda Ishaya <vishvananda@gmail.com>
Date:   Tue Mar 8 20:12:41 2011 +0000

    fix data passing

commit f973d2863c050178eb92d2efb9fb1717d138040b
Author: Vishvananda Ishaya <vishvananda@gmail.com>
Date:   Tue Mar 8 20:11:44 2011 +0000

    add failing test for None and deleted

commit 665d4ea8f135b47005ef251f93ef632131dae2d9
Merge: 02a3cd3 92fe3b8
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Tue Mar 8 20:02:05 2011 +0000

    Uses logger instead of logging in migration.py

commit 92fe3b8614cfd8a159c957ae951c1e6d405f81c1
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Tue Mar 8 19:51:25 2011 +0000

    Using logger in migration api instead of logging directly

commit ed5157ec94f3562953dd336fcfcf807fc448e431
Author: Monty Taylor <mordred@inaugust.com>
Date:   Tue Mar 8 09:53:25 2011 -0800

    Only clean up in the cleanup method. Also, we don't need the separate URI
    now.

commit 41196fff8be02817d2b7c742b68a651b91b8b7ef
Author: Monty Taylor <mordred@inaugust.com>
Date:   Tue Mar 8 09:51:33 2011 -0800

    Use unregister_models instead of os.unlink to clean up after ourselves.

commit c2ea1eba6447bf01d1d22f0d763adcf025f4d903
Author: Monty Taylor <mordred@inaugust.com>
Date:   Tue Mar 8 09:51:19 2011 -0800

    Fixed unregister_models to actually work.

commit 93a4fbefafa561ee7961deeef4ebd2cb1aee6852
Author: Monty Taylor <mordred@inaugust.com>
Date:   Tue Mar 8 09:29:46 2011 -0800

    Fixed migration test to use a second DB URL

commit 3c10cd4035d75e19c651e4516916135068897c0e
Author: Monty Taylor <mordred@inaugust.com>
Date:   Tue Mar 8 09:08:29 2011 -0800

    Replaced use of has_key with get + default value.

commit b2ec714d12f553b64d78ecb1fa32ae282fba1ec9
Author: jaypipes@gmail.com <>
Date:   Tue Mar 8 11:40:35 2011 -0500

    Make it clear that the checksum is an MD5 checksum in docs.

commit af11621170f355b3ac62e7a16f9bf5b1719ab1b6
Author: jaypipes@gmail.com <>
Date:   Tue Mar 8 10:22:44 2011 -0500

    Adds checksumming to Glance.
    
    When adding an image (or uploading an image during PUT operations),
    you may now supply an optional X-Image-Meta-Checksum header. When
    storing the uploaded image, the backend image stores now are required
    to return a checksum of the data they just stored. The optional
    X-Image-Meta-Checksum header is compared against this generated checksum
    and returns a 409 Bad Request if there is a mismatch.
    
    The ETag header is now properly set to the image's checksum now
    for all GET /images/<ID>, HEAD /images/<ID>, POST /images and
    PUT /images/<ID> operations.
    
    Adds unit tests verifying the checksumming behaviour in the API, and
    in the Swift and Filesystem backend stores.

commit a3690f0c9aac82eb7b5e9e13482e8d2ee8602ccc
Merge: b694f13 02a3cd3
Author: jaypipes@gmail.com <>
Date:   Tue Mar 8 08:16:16 2011 -0500

    Merge trunk with 713126 and image-format

commit 826c692d7afb11d5b9aed865ab22498bc2a57141
Author: Monty Taylor <mordred@inaugust.com>
Date:   Mon Mar 7 18:10:25 2011 -0800

    Whoops! Left out a self.db_path.

commit 9441f415562911bb9220bf113362a65b4513b69d
Author: Monty Taylor <mordred@inaugust.com>
Date:   Mon Mar 7 17:22:50 2011 -0800

    Allow tests to run on an alternate dburi given via environment variables.

commit 02a3cd30c1f94a4e4faa3d43bf9581c07204148f
Merge: 90051cf 310af73
Author: jaypipes@gmail.com <>
Date:   Tue Mar 8 00:57:03 2011 +0000

    Adds ability for Swift to be used as a full-fledged backend.
    Adds POST/PUT capabilities to the SwiftBackend
    Adds lots of unit tests for both FilesystemBackend and SwiftBackend
    Removes now-unused tests.unit.fakeswifthttp module

commit 310af7374e04d9d3a9a2023205f2075d303ea3d3
Author: jaypipes@gmail.com <>
Date:   Mon Mar 7 15:11:59 2011 -0500

    Remove last vestiges of account in Swift store

commit 3dc0d8d8ffeaaecef6ac1d82a2f19bdc6dbb6746
Author: jaypipes@gmail.com <>
Date:   Sun Mar 6 12:26:34 2011 -0500

    Quick fixup on registry.get_client()

commit 5ce7c07e929dd5aa65a5da83a924d79fe3f49c77
Author: jaypipes@gmail.com <>
Date:   Sun Mar 6 12:14:59 2011 -0500

    Public? => Public: per Cory's comment. Added a little more robust exception handling to some methods in bin/glance

commit 226687e48b6d0d14815cc4e2c91a24426c09536a
Merge: 4ec3e0c 90051cf
Author: jaypipes@gmail.com <>
Date:   Sun Mar 6 12:02:44 2011 -0500

    Merge trunk and resolve conflicts from utils and client patch from Vishy

commit a6138a1b54da291a9c9c7bf225db3e0b7c180e3e
Author: jaypipes@gmail.com <>
Date:   Sun Mar 6 11:39:56 2011 -0500

    Fixes for Devin and Rick's reviews

commit a7007ae84952ffe7905f924fdaba5420af64c08d
Merge: 3bba7ac 90051cf
Author: jaypipes@gmail.com <>
Date:   Sun Mar 6 10:41:29 2011 -0500

    Merge trunk

commit 90051cf3a031796a5c3ac50f16bb8865d7f1f1e3
Merge: 46053f8 4a8522d
Author: jaypipes@gmail.com <>
Date:   Sun Mar 6 15:37:28 2011 +0000

    Adds disk_format and container_format to Image, and
    removes the type column.
    
    Needs a migrate script, but having trouble getting sqlalchemy
    migrate to work with any call to drop_column(). :(

commit 46053f891a1fd731d5cc05e4d4c77b5883435a43
Merge: 05ba89c 643ea85
Author: Vishvananda Ishaya <vishvananda@gmail.com>
Date:   Sat Mar 5 18:07:04 2011 +0000

    Fixes client update_image to work like create_image.  Also fixes some messed up exceptions that were causing a try, except to reraise.

commit 3bba7ac05da60060e68877a6980fb947334d3161
Merge: ee74c26 05ba89c
Author: jaypipes@gmail.com <>
Date:   Sat Mar 5 12:10:08 2011 -0500

    Merge trunk

commit 4a8522d7941a0cadb03ffc2a534724c8652f8f53
Author: jaypipes@gmail.com <>
Date:   Sat Mar 5 12:04:43 2011 -0500

    Final review fixes. Makes disk_format and container_format optional. Makes glance-upload --type put the type in properties

commit 4bd9da8fdde600babc8302fcfced09f2c5da0bf3
Merge: 79ba479 05ba89c
Author: jaypipes@gmail.com <>
Date:   Sat Mar 5 11:04:32 2011 -0500

    Merge trunk

commit 643ea85bf4ad58bd79842db4aa9d198666e11ba3
Author: Vishvananda Ishaya <vishvananda@gmail.com>
Date:   Sat Mar 5 04:24:18 2011 +0000

    remove test skip

commit ee74c26dbd672a13550dcbcae2c2751900eb9d16
Author: jaypipes@gmail.com <>
Date:   Fri Mar 4 19:02:26 2011 -0500

    Put account in glance.conf.sample's swift_store_auth_address, use real swift.common.client.ClientException, ensure tests work with older installed versions of Swift (which do not have, for example, swift.common.client.Connection.get_auth method)

commit 05ba89c1219c357bdf7c3087c3f1dce9ec08036b
Merge: 839f824 c5c3df4
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Tue Mar 1 21:37:04 2011 +0000

    Work around Eventlet exception clearing by memorizing exception context and re-raising using 3-arg form.

commit 4ec3e0cb1ad00e61360fa4b5c1eba475271bcdf8
Author: jaypipes@gmail.com <>
Date:   Tue Mar 1 01:38:34 2011 -0500

    Adds bin/glance to setup.py

commit a6dcd64d6926e9d6841b38cacebbb0bc50e41e4a
Author: jaypipes@gmail.com <>
Date:   Tue Mar 1 01:33:26 2011 -0500

    Fixes from Rick's review #1

commit 839f82483091367262e0b6e20674906c0446c9f1
Merge: 6df9c55 858e66b
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Tue Mar 1 03:22:03 2011 +0000

    Reverts Image `type` back to the old behavior of being nullable.
    
    Necessary because Nova creates Glance image records without knowing which `type` they will be up-front.

commit c5c3df4181fbcfe8b07b24c0ad1cdc4432891b9a
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Mon Feb 28 23:16:24 2011 +0000

    Work around Eventlet exception clearing

commit 6df9c55b5804fa4ccb5825c405ffa8cd0865ce50
Merge: ed1b575 7082ea0
Author: Soren Hansen <soren@linux2go.dk>
Date:   Mon Feb 28 12:17:00 2011 +0000

    Add sys.path mangling to glance-upload.

commit 7082ea0a251689287f294caead8fc4c0d0d502e3
Author: Soren Hansen <soren@linux2go.dk>
Date:   Mon Feb 28 10:25:42 2011 +0100

    Add sys.path adjustment magic to glance-upload.

commit 2cf64655da38d228b8892a86f005353c84ab212b
Author: jaypipes@gmail.com <>
Date:   Sun Feb 27 15:54:29 2011 -0500

    Adds ability for Swift to be used as a full-fledged backend.
    Adds POST/PUT capabilities to the SwiftBackend
    Adds lots of unit tests for both FilesystemBackend and SwiftBackend
    Removes now-unused tests.unit.fakeswifthttp module

commit c4bb2fd8aa31b2c338bdc068a7ae2cc4fa4beab4
Author: jaypipes@gmail.com <>
Date:   Fri Feb 25 11:52:12 2011 -0500

    Couple tiny cleanups noticed when readin merge diff..

commit 13ff5c8eaa85fead46b1d2f66520787f7e6cdc94
Merge: 992e2e9 79ba479
Author: jaypipes@gmail.com <>
Date:   Fri Feb 25 11:33:24 2011 -0500

    bin/glance-admin => bin/glance, since it's really just the CLI tool to interact with Glance. Added lots of documentation and more logging statements in some critical areas (like the glance.registry calls...

commit 992e2e92953478c86fad393b3d0389d08b126f27
Merge: 5c03271 ed1b575
Author: jaypipes@gmail.com <>
Date:   Fri Feb 25 10:12:18 2011 -0500

    Merge trunk

commit 79ba479ada595ce6bd4d830723029bd08dedb6f3
Author: jaypipes@gmail.com <>
Date:   Fri Feb 25 09:55:26 2011 -0500

    Adds lots of unit tests for verifying exceptions are raised
    properly with invalid or mismatched disk and container formats.
    
    Adds documentation on disk and container formats. Updates
    existing documentation to remove references to the now-gone
    type column and replaces these references with disk_format
    and container_format.
    
    Reworked the validates_image() method in the registry.db.api
    to be like what Rick was describing in reviews.

commit 4ddd60b45833fef8b54196445d72f5a15d1ea651
Merge: a70fed3 ed1b575
Author: jaypipes@gmail.com <>
Date:   Fri Feb 25 08:21:13 2011 -0500

    Merge trunk

commit ed1b5758e0457a037d6d53fb8e7c67bc36a696c0
Merge: 79fac03 78d7580
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Fri Feb 25 01:56:56 2011 +0000

    Makes --kernel and --ramdisk required arguments for glance-upload since Nova currently requires them.
    
    The `null_kernel` concept in Nova is slated to be removed, so this is really just a stop gap measure.

commit 858e66b1bdf62d05afad505eeb2b711e82e3e14c
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Fri Feb 25 01:19:00 2011 +0000

    Removing image_type required behavior

commit 78d7580b2c8c64d5c89c74746ea61aab8e82ef41
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Thu Feb 24 23:06:10 2011 +0000

    Removing requirement to pass kernel and ramdisk

commit b694f1353af1cb600390a11d8faccdf944a6756f
Merge: 4f23ca0 a70fed3
Author: jaypipes@gmail.com <>
Date:   Thu Feb 24 13:36:07 2011 -0500

    Merge test cases for missing and invliad disk and container formats

commit a70fed371557e439e188591f66e794551e74087b
Author: jaypipes@gmail.com <>
Date:   Thu Feb 24 13:35:22 2011 -0500

    Add test cases for missing and invalid disk and container formats

commit b984af2d11a2ce4df8a38f818c278e2a2b28acdd
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Thu Feb 24 17:46:07 2011 +0000

    Requiring kernel and ramdisk args in glance-upload

commit 4f23ca038bc1bb1b28d67c07c84c46d6836259f8
Merge: 7cc8a5b c6e681d
Author: jaypipes@gmail.com <>
Date:   Thu Feb 24 11:26:00 2011 -0500

    Make disk_format and container_format required

commit c6e681da3ed912e013488f63f67de0f3483c71f3
Author: jaypipes@gmail.com <>
Date:   Thu Feb 24 11:23:13 2011 -0500

    Make disk_format and container_format required

commit 7cc8a5be98c3777852c2cafa5b975798af40feeb
Merge: 79fac03 0519aee
Author: jaypipes@gmail.com <>
Date:   Thu Feb 24 09:52:13 2011 -0500

    Merge image-format

commit 5c032710487920888b72e9f42de6063bc768aa68
Author: jaypipes@gmail.com <>
Date:   Wed Feb 23 21:50:24 2011 -0500

    Adds an admin tool to Glance (bin/glance-admin) that allows
    a user to administer the Glance server:
    
    * add images
    * update image metadata
    * delete images and metadata
    * delete all images (clear)
    * show an image
    * list public images
    * show detailed info on public images
    
    Adds documentation for the tool and cleans up a few issues
    that came up in initial testing.

commit 43c8e2a2b6ebaa9d1144cd697595db111ade8776
Merge: 2c7fcfb 0519aee
Author: jaypipes@gmail.com <>
Date:   Wed Feb 23 20:32:08 2011 -0500

    Merge fixups to validate_image

commit 0519aeec06743ba303e4f44b5966911c38ba7528
Merge: 0b12c95 79fac03
Author: jaypipes@gmail.com <>
Date:   Wed Feb 23 20:30:58 2011 -0500

    Make sure validate_image() doesn't throw exception on missing status when updating image.

commit 2c7fcfb6de608b2d6a2d7c23622136bd362d133a
Merge: ebf4eb6 0b12c95
Author: jaypipes@gmail.com <>
Date:   Wed Feb 23 17:39:25 2011 -0500

    Merge api-image-format

commit ebf4eb6556355a729977cf6a834c978fbb41e2c3
Merge: e95ecdb 79fac03
Author: jaypipes@gmail.com <>
Date:   Wed Feb 23 17:39:04 2011 -0500

    Merge fix for bug 704854

commit 0b12c95cf54695808248617271929f2bb26959fa
Merge: 1550ea4 8e27dd4
Author: jaypipes@gmail.com <>
Date:   Wed Feb 23 17:22:59 2011 -0500

    Merge fix for bug 704854

commit e95ecdb77cc05409259c3a02c4e9e1c76198e9dc
Merge: 4c69440 8e27dd4
Author: jaypipes@gmail.com <>
Date:   Wed Feb 23 17:19:09 2011 -0500

    Merge fix for bug 704854

commit 1550ea4c204d2223fb683b02c05ce331595b38ab
Author: jaypipes@gmail.com <>
Date:   Wed Feb 23 17:16:32 2011 -0500

    Adds disk_format and container_format to Image, and
    removes the type column.
    
    Needs migrate script, but having trouble getting sqlalchemy
    migrate to work with any call to drop_column(). :(

commit 79fac03af2d15ebacfbc0e7c225b63fd706b5e91
Merge: 1f890ec 8e27dd4
Author: jaypipes@gmail.com <>
Date:   Wed Feb 23 21:27:24 2011 +0000

    This adds a test case for LP Bug 704854 -- Exception
    raised by Registry server gets eaten by API server.
    
    The test involves spinning up an API server and a registry
    server, firing cURL and glance-upload against the API
    server with invalid requests, and verifying that appropriate
    exception messages are contained in the response.
    
    I should probably rebase this commit considering all the previous
    commits weren't actually addressing the issue. The fact that I
    had glance-api and glance-registry installed on my local machine
    was causing the test runs to improperly return a passing result.
    
    It just so happens that the glance-api and glance-registry that
    I had installed to my /usr/local/bin were the very same programs
    that were from a previous branch I had locally where I fixed the
    root cause of this issue, which was that the sqlalchemy @validates
    decorator does NOT fire for *new* objects, only existing ones, which
    resulted in image_create() improperly storing NULL data in type, name,
    and other non-nullable fields in the database. This then set off
    a domino effect which caused the next call from
    glance.server._upload_and_activate() to die a horrible death due to
    the @validates decorator then firing on the already-created Image
    object. This horrible death was improperly being raised from the
    glance.client as a BadRequest instead of exception.Invalid, which
    caused the API server to ignore the text in the actual Invalid
    exception coming from the registry server.
    
    In short, this patch finally fixes the root of the problem by
    placing a validate_image() function guard which throws exception.Invalid
    for any invalid data coming into the _image_update() method in the db
    API. It also adds a bunch of logging statements and ensures that
    exceptions throughout the call stack between the API server to the
    glance.registry.Client to the Registry server are properly handled and
    that the text of those exceptions isn't thrown away willy-nilly.

commit 8e27dd4f48910f6df0349aca9db5744cfdfdba2b
Author: jaypipes@gmail.com <>
Date:   Wed Feb 23 15:35:01 2011 -0500

    Add debugging output to assert in test_misc. Trying to debug what Hudson fails on...

commit b5c6a8bfe8ade01de775592a422516b86f4be7d1
Author: jaypipes@gmail.com <>
Date:   Wed Feb 23 14:28:25 2011 -0500

    Fixups from Rick's review

commit 2201bf21067df971f88c483f020aa78fd4e477cf
Merge: b456e97 ffc0054
Author: jaypipes@gmail.com <>
Date:   Tue Feb 22 12:17:10 2011 -0500

    Merge fix for bug704854

commit ffc0054bfd3b5c5713e7169223b3b5b1c050ab1d
Author: jaypipes@gmail.com <>
Date:   Tue Feb 22 11:01:09 2011 -0500

    Removes now-unnecessary @validates decorator on model.

commit 369241b3603dfbadbe3a659aa0867fe53279f3de
Author: jaypipes@gmail.com <>
Date:   Tue Feb 22 10:53:32 2011 -0500

    I should probably rebase this commit considering all the previous
    commits weren't actually addressing the issue. The fact that I
    had glance-api and glance-registry installed on my local machine
    was causing the test runs to improperly return a passing result.
    
    It just so happens that the glance-api and glance-registry that
    I had installed to my /usr/local/bin were the very same programs
    that were from a previous branch I had locally where I fixed the
    root cause of this issue, which was that the sqlalchemy @validates
    decorator does NOT fire for *new* objects, only existing ones, which
    resulted in image_create() improperly storing NULL data in type, name,
    and other non-nullable fields in the database. This then set off
    a domino effect which caused the next call from
    glance.server._upload_and_activate() to die a horrible death due to
    the @validates decorator then firing on the already-created Image
    object. This horrible death was improperly being raised from the
    glance.client as a BadRequest instead of exception.Invalid, which
    caused the API server to ignore the text in the actual Invalid
    exception coming from the registry server.
    
    In short, this patch finally fixes the root of the problem by
    placing a validate_image() function guard which throws exception.Invalid
    for any invalid data coming into the _image_update() method in the db
    API. It also adds a bunch of logging statements and ensures that
    exceptions throughout the call stack between the API server to the
    glance.registry.Client to the Registry server are properly handled and
    that the text of those exceptions isn't thrown away willy-nilly.

commit bb5f1229ef44b87064a85dc7a81af9f4ef8d6669
Author: jaypipes@gmail.com <>
Date:   Mon Feb 21 17:11:27 2011 -0500

    Use Nova's path trick in all bins...

commit 45618b7398007cea1cbfe9f9f01aa59595e5893c
Author: jaypipes@gmail.com <>
Date:   Mon Feb 21 16:57:00 2011 -0500

    Add path to glance-control

commit b456e972d1577272cec86bf3d352b5e3b36b9a6a
Merge: 177318d 1f890ec
Author: jaypipes@gmail.com <>
Date:   Mon Feb 21 16:33:09 2011 -0500

    Merge trunk

commit 4c6944081987b1a5bef2814b898c29aa0baf021f
Merge: 5a0ed62 1f890ec
Author: jaypipes@gmail.com <>
Date:   Mon Feb 21 14:47:17 2011 -0500

    Merge trunk

commit a9415cd3423bb00620a9704b83a7e523e6937d78
Merge: 9835b3d 1f890ec
Author: jaypipes@gmail.com <>
Date:   Fri Feb 18 12:39:12 2011 -0500

    Merge trunk

commit 1f890ecb81e788d26336d9a3fd7f4a677e5fc34f
Merge: f19fb80 c131d93
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Thu Feb 17 20:36:56 2011 +0000

    Removes image type validation in the Glance registry.
    
    Nova xs-unified-images requires adding a new image type 'vhd' along side of 'machine', 'raw', etc. Since image_type isn't used by Glance itself (it merely stores the value and hands it back to Nova), Glance shouldn't be the arbiter of what values are acceptable-- Nova should. This promotes loose-coupling and ensures that Glance won't have to change in lock-step with Nova.
    
    More to the point, this a stop-gap to make Glance work with the new xs-unified-images branch until we get proper `container_format` and `disk_format` modeling in Glance. When that happens, we may end up ditching `image_type` altogether.

commit c131d93c5bdf332b2b9970db14c76524345ebf03
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Thu Feb 17 18:34:28 2011 +0000

    Adding vhd as recognized image type

commit 990ac57cfa6d4f2c3f4a65efcf4b0a989ea91c50
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Thu Feb 17 18:30:50 2011 +0000

    Reverting the removal of validation

commit 000011bb2981a606ab1fa546b716c149758c7ea1
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Thu Feb 17 06:09:58 2011 +0000

    Removing image type validation

commit f19fb807ea6d8468078cddd88d92860e561c67e0
Merge: 531e1bc 9846d3e
Author: jaypipes@gmail.com <>
Date:   Wed Feb 16 18:57:01 2011 +0000

    Adds --pid-file option to bin/glance-control

commit 9835b3d12e7dddcc94802c051853c03e4c7453d8
Author: jaypipes@gmail.com <>
Date:   Wed Feb 16 13:55:08 2011 -0500

    Add %default for image type in glance-upload

commit 531e1bcfb19539c5fd02ea177a7c3f09adb850f0
Merge: 08723f6 be5f0e9
Author: jaypipes@gmail.com <>
Date:   Wed Feb 16 18:47:05 2011 +0000

    Adds Location: header to return from API server for POST /images, per APP spec

commit c13d553bc11a7c530fa694dc21aa2087108f18ac
Author: jaypipes@gmail.com <>
Date:   Wed Feb 16 13:38:50 2011 -0500

    Cleanups from Soren's review

commit 08723f6afe4984dea0b422fa2816c27540534c51
Merge: be987ad faf738f
Author: jaypipes@gmail.com <>
Date:   Wed Feb 16 10:12:00 2011 +0000

    Add an ImportError check when importing migrate.exceptions, as the location of that module changed in a recent version of the sqlalchemy-migrate library.

commit be5f0e95e5b0fee3d46aa6036fc62edbd21f7bbc
Author: jaypipes@gmail.com <>
Date:   Wed Feb 16 05:01:21 2011 -0500

    Adds Location: header to return from API server for POST /images, per APP spec

commit 01354520cb62f90d223e44967a739a1c66d0e308
Merge: be987ad faf738f
Author: jaypipes@gmail.com <>
Date:   Wed Feb 16 04:52:04 2011 -0500

    Merge fix for bug 719834

commit ea2c494769742f8ade44dd41819e86179a4bd0c4
Author: jaypipes@gmail.com <>
Date:   Wed Feb 16 03:06:53 2011 -0500

    This adds a test case for LP Bug 704854 -- Exception
    raised by Registry server gets eaten by API server.
    
    The test involves spinning up an API server and a registry
    server, firing cURL and glance-upload against the API
    server with invalid requests, and verifying that appropriate
    exception messages are contained in the response.
    
    I cannot reproduce 704854 now. Not sure what changed in
    the code that actually fixed this, but the test case verifies
    that the behaviour described in the bug does not occur any more.

commit f977e837f6b8737dd769c12a68a4d2291b3ebf0b
Merge: 19aa31d 9846d3e
Author: jaypipes@gmail.com <>
Date:   Wed Feb 16 02:44:09 2011 -0500

    Merge --pid-file option for glance-control

commit 9846d3e69dc1ebd7734cb909eb4577f6ae107626
Author: jaypipes@gmail.com <>
Date:   Wed Feb 16 02:43:11 2011 -0500

    Adds --pid-file option to bin/glance-control

commit c0804691519304320d7e450cd95bd3a723de4f19
Merge: be987ad faf738f
Author: jaypipes@gmail.com <>
Date:   Wed Feb 16 02:32:19 2011 -0500

    Merge fix for bug 719834

commit 19aa31d140597301313cfa7b5c9d3b25cf325430
Merge: be987ad faf738f
Author: jaypipes@gmail.com <>
Date:   Wed Feb 16 02:29:17 2011 -0500

    Merge fix for bug 719834

commit faf738f435f19ebf1f721b927f95548dc6c85bff
Author: jaypipes@gmail.com <>
Date:   Wed Feb 16 02:27:48 2011 -0500

    Add an ImportError check when importing migrate.exceptions, as the location of that module changed in a recent version of the sqlalchemy-migrate library.

commit be987ad9e4177355bd22a1de5a5ad4ac35e0d315
Merge: 4151129 f134884
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Fri Feb 11 20:47:02 2011 +0000

    Adds sql_idle_timeout to reestablish connections to database after given period of time.
    
    Fixes MySQL Gone Away exceptions.

commit f13488471491c611bb2602bd4b8e18b943e06322
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Fri Feb 11 00:12:51 2011 +0000

    Add sql_idle_timeout

commit 415112967a24b57ac0d5d7161cbca9e37a3dc004
Merge: 0d48cfb c9259dd
Author: jaypipes@gmail.com <>
Date:   Thu Feb 10 01:16:58 2011 +0000

    Removes lockfile and custom python-daemon server initialization
    in favour of paste.deploy.

commit c9259dd2d96de703191ca61ecb76686406719d80
Author: jaypipes@gmail.com <>
Date:   Wed Feb 9 18:57:05 2011 -0500

    Review 3 fixups.

commit 714013e07a0d989d4ae867ed31c0cfab5f824ff8
Author: jaypipes@gmail.com <>
Date:   Wed Feb 9 16:59:39 2011 -0500

    Remove get_config_file_options() from glance-control

commit 2fcb4898cbb3d307a59e26653521183042e3e08c
Author: jaypipes@gmail.com <>
Date:   Wed Feb 9 16:56:48 2011 -0500

    Fixes for Rick review #2

commit b0b35af60386957203075cb24990b66607cde111
Merge: ff8586d 0d48cfb
Author: jaypipes@gmail.com <>
Date:   Wed Feb 9 16:52:48 2011 -0500

    Merge trunk

commit ff8586d68575ed605666b5b9349c43328544049d
Author: jaypipes@gmail.com <>
Date:   Wed Feb 9 15:24:59 2011 -0500

    Remove no-longer-needed imports...

commit c269e4da1798f670acdc299de06dba647a334a16
Author: jaypipes@gmail.com <>
Date:   Wed Feb 9 15:23:39 2011 -0500

    Remove extraneous debug import...

commit 610499b5ffcd58b8adea4f4cb1cd569ea6d26328
Author: jaypipes@gmail.com <>
Date:   Wed Feb 9 15:02:13 2011 -0500

    Changes the server daemon programs to be configured only via
    paste.deploy configuration files. Removed ability to configure
    server options from CLI options when starting the servers with
    the exception of --verbose and --debug, which are useful during
    debugging.
    
    Updated the documentation controllingservers.rst.

commit 0d48cfb8c58926abdb780b2b66ca3734d27685c1
Merge: 51c5306 ccfaa82
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Feb 9 19:56:56 2011 +0000

    Adds glance-combined and glance-manage to setup.py

commit 6ea134ad789e39e27a6a03a4cfaf8e67e1de02c6
Author: jaypipes@gmail.com <>
Date:   Tue Feb 8 15:47:37 2011 -0500

    Fix merge conflicts

commit ccfaa821880beb059abb51cf7fa521ba1a9ce289
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Tue Feb 8 12:07:42 2011 -0600

    Adds glance-combined and glance-manage to setup.py

commit 51c5306dba5e89b8a2028f090b3f4b2fba2d673d
Merge: 42fd0b7 9f37df5
Author: jaypipes@gmail.com <>
Date:   Mon Feb 7 19:06:45 2011 +0000

    Fixes bug 714454.
    
    ReStructured Text files need to end in .rst, not .py ;)

commit 9f37df59502dfa763219cc3af47cf1aa7e764096
Author: jaypipes@gmail.com <>
Date:   Mon Feb 7 13:05:45 2011 -0500

    ReStructure Text files need to end in .rst, not .py ;)

commit 851b46fd4ec8de6c16e546e0586ad7d5192b0213
Merge: defd36a 42fd0b7
Author: jaypipes@gmail.com <>
Date:   Sun Feb 6 09:08:14 2011 -0500

    Merge trunk

commit 42fd0b71491e796720dcad81d5cae3d9fdf6b3fc
Merge: fe49ab6 5314e45
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Sun Feb 6 02:41:47 2011 +0000

    Update README, remove some vestigial directories, and other small tweaks.

commit 5314e4558f44f1d48579b6c6e257194886d2f6d9
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Sat Feb 5 19:36:05 2011 -0600

    Removing dubious advice

commit fe49ab6900eb0ca92bc59f1e8f412afa6794ae64
Merge: 0c7dbb8 2040ecd
Author: jaypipes@gmail.com <>
Date:   Sat Feb 5 20:26:46 2011 +0000

        Adds facilities for configuring Glance's servers via
        configuration files.
    
        glance-api, glance-registry, and glance-combined now process
        a set of configuration files in order, with options read from
        later files overriding values in earlier files:
    
        /etc/glance.cnf
        /etc/glance/glance.conf
        ~/glance.cnf
        ~/.glance/glance.cnf
        ./glance.cnf
    
        The new glance.common.config.get_config_file_options() function
        processes these config files into a mapping of key/value
        option pairs. This mapping can now be passed to the
        glance.common.config.parse_options() function as default values
    
        Adds a sample glance.cnf to the etc/ directory

commit defd36a16dc25f3632018e06e832fafc40ad7853
Author: jaypipes@gmail.com <>
Date:   Sat Feb 5 14:45:09 2011 -0500

    Use fix_path on find_config_file() too.

commit 347ff743ff339f5a460af1c5dd461c1cf0585ab3
Merge: bc310ce 2040ecd
Author: jaypipes@gmail.com <>
Date:   Sat Feb 5 14:34:03 2011 -0500

    Merge latest config parser changes...

commit 2040ecdbbdd707911617d61701b27ba4f7b4cf98
Author: jaypipes@gmail.com <>
Date:   Sat Feb 5 14:30:47 2011 -0500

    Fixups from Rick's review

commit 19d9a5d9912b8e6dda2a23e06776087941627d0c
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Sat Feb 5 01:40:39 2011 -0600

    Including tests/ in pep8

commit dc20f62ef074954dbc78038d3e2eaa9a176644df
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Fri Feb 4 20:37:39 2011 -0600

    Typo fixes, clarifying

commit ee109c1fac7c6810f73f1cff2b7ca10f6fdc7185
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Fri Feb 4 20:32:31 2011 -0600

    Updating README, rmdir some empty dirs

commit bc310ced446ff45e0e11cfab82b658f3cb055264
Merge: 66f4b78 0c7dbb8
Author: jaypipes@gmail.com <>
Date:   Fri Feb 4 19:05:23 2011 -0500

    Merge trunk

commit 66f4b78234bd9be723f82a40016d21b9fae4f3c5
Author: jaypipes@gmail.com <>
Date:   Fri Feb 4 18:59:52 2011 -0500

    Adds bin/glance-control program server daemonization wrapper
    program based on Swift's swift-init script.
    
    Adds a crap-ton of documentation on installing Glance and
    controlling Glance's server programs.
    
    This was necessary since when glance.common.server was removed
    from Glance and paste.deploy used, we lost the ability to control
    server daemonization with CLI options. This adds back some of that
    functionality while still using paste.deploy like Swift does.

commit 58d52ee3ebec27166888feefe4200b170ba216a8
Author: jaypipes@gmail.com <>
Date:   Fri Feb 4 12:45:27 2011 -0500

    Ignore build and deploy-related files

commit 0c7dbb87080abd47c1603252fd46d2dbf8daeaa5
Merge: e5c8fae c72d1a1
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Thu Feb 3 19:16:45 2011 +0000

    Adds sqlalchemy migrations.
    
    Also adds a glance-manage utility for managing migrations.
    
    Potentially glance-manage (and glance-upload) could be merged into glance-admin when that lands.

commit e5c8fae80d0a085bce75c50896567d709281d4ce
Merge: febdf1d b10a2ce
Author: jaypipes@gmail.com <>
Date:   Thu Feb 3 16:56:41 2011 +0000

    Fix bug 712575. Make BASE = models.BASE

commit b10a2ceb8b3b0862d707dee43f996ea5595e4006
Author: jaypipes@gmail.com <>
Date:   Thu Feb 3 11:23:36 2011 -0500

    Make sure BASE is the models.BASE, not a new declarative_base() object.

commit 32600b1b07fafe454e221c8b8ad49678de0d3c0f
Author: jaypipes@gmail.com <>
Date:   Thu Feb 3 10:40:49 2011 -0500

    Had to reverse search order of directories for finding config files.

commit 294228aacbec3d0ec366116286fa03c615959a0d
Author: jaypipes@gmail.com <>
Date:   Thu Feb 3 10:23:48 2011 -0500

    Removes lockfile and custom python-daemon server initialization
    in favour of paste.deploy.
    
    We use a solution that is a hybrid of the code in Nova and Swift:
    
    * We continue to use the object-based WSGI Server/Router objects
      in glance.common.wsgi.
    * We load options from a configuration file like Swift does, merging
      in the typed options returned from glance.common.config.parse_options()
    
    NOTE: Due to http://trac.pythonpaste.org/pythonpaste/ticket/379, we
    removed the CLI option --log-format and use a hard-coded DEFAULT_LOG_FORMAT.
    You are still able to adjust the log format using the --log-config-file
    option, however, and setting the format string in the log config file.

commit 9b955320691d1efbaf26bccbd4ec686c3964fff8
Author: jaypipes@gmail.com <>
Date:   Wed Feb 2 21:17:38 2011 -0500

    Adds facilities for configuring Glance's servers via
    configuration files.
    
    glance-api, glance-registry, and glance-combined now process
    a set of configuration files in order, with options read from
    later files overriding values in earlier files:
    
    /etc/glance.cnf
    /etc/glance/glance.conf
    ~/glance.cnf
    ~/.glance/glance.cnf
    ./glance.cnf
    
    The new glance.common.config.get_config_file_options() function
    processes these config files into a mapping of key/value
    option pairs. This mapping can now be passed to the
    glance.common.config.parse_options() function as default values
    
    Adds a sample glance.cnf to the etc/ directory

commit c72d1a107e6facc602021d2d34aaa18d34eaf916
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Feb 2 18:01:08 2011 -0600

    Creating indexes

commit d060da4993312aa803371464d876a63ded7afba3
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Feb 2 17:45:18 2011 -0600

    Adding migration test

commit c45eae7b38e52633d62ca243f4bea341f4fbfae1
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Feb 2 17:44:56 2011 -0600

    Fixing migration import errors

commit 6e09de35541be67c8477a360e701bf15164886db
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Feb 2 12:50:37 2011 -0600

    Small cleanups

commit a436b433ca746864aed9fdec8bbe345c3bf147a7
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Feb 2 12:47:08 2011 -0600

    glance-manage uses common options

commit 0b3e8d8778514fc4d534cb903ddc10d250c3d716
Merge: 24ba01b febdf1d
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Feb 2 12:42:54 2011 -0600

    Merging in glance/cactus

commit 24ba01b8a5e18bf55e08966dea6d28ad615fdc4d
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Feb 2 12:41:28 2011 -0600

    Pep8 fix

commit febdf1d969809185e37228f10804bb2cb07e0dab
Merge: 8a084f6 18c9ae0
Author: jaypipes@gmail.com <>
Date:   Wed Feb 2 12:37:54 2011 -0500

    Merge Rick's Super-Cool Option Group Extravanganza.

commit 18c9ae0877ad211ca5d9ad2e38b971821b1021ec
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Feb 2 10:55:07 2011 -0600

    Pep8 fixes

commit cc06221694fc86df07d98c5c3cb7aa2cb893f071
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Feb 2 10:40:57 2011 -0600

    Refactoring into option groups

commit c9d3211caa2f7b0532300f6bcfafe736cf5b1481
Merge: 0c93176 fe4c201
Author: Thierry Carrez <thierry@openstack.org>
Date:   Wed Feb 2 11:15:16 2011 +0000

    Hopefully-final versioning (0.1.7), no review needed

commit fe4c201942836f0edc6adb2f6fc963182f93566e
Author: Thierry Carrez <thierry@openstack.org>
Date:   Wed Feb 2 10:58:23 2011 +0100

    Final versioning, no review needed

commit 15d8f90cb9595ee27e844e0d2b6611fa477d36c0
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Feb 2 07:07:41 2011 +0000

    Adding db_sync to mirror nova

commit 0236aea227a4569494aa5ca70614fb26a04b651b
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Feb 2 06:53:05 2011 +0000

    Adding some basic documentation

commit 511b1097947ff2b7681e876928093b3fee785a9d
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Feb 2 06:29:41 2011 +0000

    Better logging

commit d923a0417537552f672fd5b38b63f40c695f5cd5
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Feb 2 06:13:39 2011 +0000

    Adding image_properties migration

commit 757a155ac6d656309bfd3b13d575870feae6efc6
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Feb 2 05:00:13 2011 +0000

    Adding migration for images table

commit 9c5290bcb5282e9d4eedf4f4e2b298647c86fb43
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Feb 2 01:43:16 2011 +0000

    Adding migration management commands

commit 8a084f6ff5ab000686a667499372e5abe75b78de
Merge: 13f446d 3551512
Author: jaypipes@gmail.com <>
Date:   Tue Feb 1 17:07:26 2011 -0500

    Merge round 1 logging.

commit 3551512d5b0996af3d4d51b8699ae21c46987797
Merge: c7a834b 13f446d
Author: jaypipes@gmail.com <>
Date:   Tue Feb 1 16:44:30 2011 -0500

    Merge cactus trunk and resolve conflicts

commit c7a834b8df1ff299af2e9ea3a727e614c978de1d
Author: jaypipes@gmail.com <>
Date:   Tue Feb 1 16:38:31 2011 -0500

    Remove debugging output that wasn't supposed to go into this branch (yet) :)

commit 13f446df0e62d3f243e7b6724c9c10499768353f
Merge: 087ebf5 6efe721
Author: jaypipes@gmail.com <>
Date:   Tue Feb 1 16:30:07 2011 -0500

    Merge fix from Rick for Bug #711385

commit 3bf2b100b9e0a9dba99307ab83d3ec27287cb4bf
Author: jaypipes@gmail.com <>
Date:   Tue Feb 1 16:22:49 2011 -0500

    Adds --debug option for DEBUG-level logging. --verbose now only
    outputs INFO-level log records.
    
    Adds --log-date-format option for greater control over the log
    record date format.
    
    Makes config.setup_logging() set up all loggers, not just an application's
    specific logger. Fixes issue Rick brought up about logging config file
    being overridden by adding a return statement after logging.config stuff
    is done.

commit 6efe7213f11a72a8a353acfb49e843f05c9b7d1e
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Tue Feb 1 19:53:58 2011 +0000

    Typo add_option -> add_options

commit e47760977097f9cf36cbfc78f734ba80094ad7b2
Author: jaypipes@gmail.com <>
Date:   Tue Feb 1 14:51:43 2011 -0500

    Fixes from Rick's review. Thanks, Rick.

commit fe363898ce5a80489a6f218ed702aad592b0faa1
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Tue Feb 1 19:29:50 2011 +0000

    Adds --sql-connection option

commit 61711e0378525247f7952c989ce8eeeb9e2b5bbd
Author: jaypipes@gmail.com <>
Date:   Tue Feb 1 13:18:40 2011 -0500

    First round of logging functionality:
    
    * Adds option group for logging-only configuration settings
    * Adds /etc and /etc/logging.cnf.sample as an example of setting
      up logging configuration directly with a config file
    * Adds to glance.common.config a couple function useful in
      adding logging options and setting up the logger(s)
    
    Next round will include the addition of a --debug option and
    lots more debugging output to the loggers.

commit 087ebf5fec6c4d77aceb5da09b8b650690f11283
Merge: 58ac711 01c2d8b
Author: jaypipes@gmail.com <>
Date:   Mon Jan 31 16:24:00 2011 -0500

    Merge glance-combined

commit 01c2d8be6a4f9ff6593903afc75eb52440856a55
Merge: 628ca53 7acd7cd
Author: jaypipes@gmail.com <>
Date:   Mon Jan 31 15:17:25 2011 -0500

    Merge use-optparse

commit 58ac71170df383284a745a3cda0244015c686cdb
Merge: 5f796b8 7acd7cd
Author: jaypipes@gmail.com <>
Date:   Mon Jan 31 15:16:19 2011 -0500

    Merged use-optparse

commit 7acd7cd92bc655cc20b2d48b6ea4423932ecd56f
Author: jaypipes@gmail.com <>
Date:   Mon Jan 31 14:39:39 2011 -0500

    Removes glance.common.db.sqlalchemy and moves registration of models and create_engine into glance.registry.db.api.

commit 628ca5303ed4850bc816a34882d5af3135532d47
Author: jaypipes@gmail.com <>
Date:   Mon Jan 31 13:46:04 2011 -0500

    pep8-er in bin/glance-combined

commit 753ef1fe2f6ca4df84cff18744bc901790fbc475
Merge: 101e9c0 8cd4bc1
Author: jaypipes@gmail.com <>
Date:   Mon Jan 31 13:42:23 2011 -0500

    Merge yagni-db-adapter and use-optparse

commit 8cd4bc1899c9d403dda0c71b6b3a52efd7a1bcd8
Merge: daa4a42 5f796b8
Author: jaypipes@gmail.com <>
Date:   Mon Jan 31 13:40:08 2011 -0500

    Merge yagni-db-adapter and resolve conflicts.

commit 5f796b8e83a0e67d84936bd05cde1c4edf7b81b5
Merge: 6e9163c bf10761
Author: jaypipes@gmail.com <>
Date:   Mon Jan 31 13:28:18 2011 -0500

    Merge yagni-db-adapter removal from rick.

commit daa4a429f7adc1a3c68894ee9174b0830cb2b908
Author: jaypipes@gmail.com <>
Date:   Mon Jan 31 13:21:30 2011 -0500

    Fixes lp710789 - use-optparse breaks daemonized process stop
    
    Fix was simple. args = FLAGS(argv) returns ALL argv's including
    the program name. optparse.OptionParser.parse_args() does not
    return the program name as args[0], instead it returns args[1:].
    
    In glance.common.server.serve(), we were checking:
    
    action = 'start':
    if len(args) > 1:
        action = args.pop()
    
    Changing this to if len(args): fixed the problem.

commit 5a0ed6223bf21b08d75c6ec3ca3e18adf9a2f029
Merge: c14b3d4 101e9c0
Author: jaypipes@gmail.com <>
Date:   Fri Jan 28 16:31:04 2011 -0600

    Merge glance-combined

commit 101e9c09e6b3f31724087c7720d44cbdfeda97d1
Author: jaypipes@gmail.com <>
Date:   Fri Jan 28 16:30:20 2011 -0600

    Adds bin/glance-combined. Useful in testing...

commit c14b3d43d91faf359c447e9248cba6480e43156c
Merge: 7ec3ed2 5fb01cb
Author: jaypipes@gmail.com <>
Date:   Fri Jan 28 16:20:33 2011 -0600

    Merge in use-optparse changes.

commit 7ec3ed2b1755817fad1792072ac819763a53a6a5
Author: jaypipes@gmail.com <>
Date:   Fri Jan 28 16:19:43 2011 -0600

    Tiny pep8 fixup in setup.py

commit 5fb01cb37bfce28854c872e038166f24a9d3716a
Author: jaypipes@gmail.com <>
Date:   Fri Jan 28 16:15:33 2011 -0600

    Rework what comes back from parse_options()[0] to not stringify option values. Keep them typed.

commit 443c46df1d75de3dde0a6c40cbb3f1f496bfcafa
Merge: 0929fc0 6e9163c
Author: jaypipes@gmail.com <>
Date:   Fri Jan 28 15:56:17 2011 -0600

    Merge trunk

commit 976dfcc946d8c822c754aba73955bf6d43f69fb7
Merge: 604a843 6e9163c
Author: jaypipes@gmail.com <>
Date:   Fri Jan 28 15:55:43 2011 -0600

    Merge trunk

commit 604a8433576cd3a53478ac3f561e1e3e692ffb7b
Author: jaypipes@gmail.com <>
Date:   Fri Jan 28 15:54:34 2011 -0600

    Remove use of gflags entirely. Use optparse.

commit 6e9163c05e119c0b6cf954de553c94f91c1fc914
Merge: 67a71df 0c93176
Author: jaypipes@gmail.com <>
Date:   Fri Jan 28 14:11:45 2011 -0600

    Merge bexar trunk final changes

commit bf10761102f441ca63786dff7b2a527fd21079e5
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Fri Jan 28 19:54:10 2011 +0000

    Removing unecessary param to get_all_public

commit 8304559b331a48862f3a3dde5a7df7e8bc1f4c98
Merge: f221bbf 0c93176
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Fri Jan 28 19:39:19 2011 +0000

    Merging trunk

commit f221bbf36db9510e5247a6968d41e70ecb5c7eb4
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Fri Jan 28 18:51:22 2011 +0000

    Adding back some missing code

commit 2c0362a0a4a4b3b96791b4394dec87525c0e8329
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Fri Jan 28 17:03:57 2011 +0000

    Cleaning up some code

commit 461fa4e2eb0e34371821c1db2d21877733b8ec1d
Merge: 67a71df 7d314e6
Author: jaypipes@gmail.com <>
Date:   Thu Jan 27 14:13:16 2011 -0600

    Merge versioning patches

commit 7d314e6039d67d3e7c5e2e07a32d7935ca884cd6
Merge: 00ac0d4 0c93176
Author: jaypipes@gmail.com <>
Date:   Thu Jan 27 14:01:02 2011 -0600

    Merge Bexar r56

commit 00ac0d44a6818aa6f4fa2c77a9f4dff6fb2caed4
Author: jaypipes@gmail.com <>
Date:   Thu Jan 27 13:59:49 2011 -0600

    Makes Glance's versioning non-static. Uses Nova's versioning scheme.

commit 0c93176178354aa4b4b43c29b0bcc51934c678b5
Merge: 67a71df 35085b8
Author: Cerberus <matt.dietz@rackspace.com>
Date:   Thu Jan 27 17:57:34 2011 +0000

    Adds/updates the copyright info on most of the files in glance and copies over the Authors check from Nova.

commit 62ab25f65cb51306f76bb9ad82ad1b58e6301559
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Thu Jan 27 16:00:06 2011 +0000

    Removing sqlalchemy dir

commit f6e671c7e573dfff3cc9cabb53b863dccf901c60
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Thu Jan 27 05:14:59 2011 +0000

    Removed methods from sqlalchemy/api

commit dbbd1c4f4d900536a1f9474fe9644cd736d21ef1
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Thu Jan 27 04:34:31 2011 +0000

    Refactor update/create

commit 35085b8391b047b49ee1a764335f8a1814b57bfa
Author: Cerberus <matt.dietz@rackspace.com>
Date:   Wed Jan 26 22:28:22 2011 -0600

    Messed up a permission somehow

commit 5ba81f311bf8b7ab3c493a0e712cb3ea181776d9
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Thu Jan 27 04:25:30 2011 +0000

    Refactoring destroy

commit ec35e6d5735babfe16c1f3e46dd6275b53147426
Author: Cerberus <matt.dietz@rackspace.com>
Date:   Wed Jan 26 22:23:57 2011 -0600

    feh

commit 3234cb335cce4674967a44e5fbbeb5ad34121e27
Author: Cerberus <matt.dietz@rackspace.com>
Date:   Wed Jan 26 22:19:13 2011 -0600

    A few more

commit 21d3c7222492237024739176b8e7fcacdc91b569
Author: Cerberus <matt.dietz@rackspace.com>
Date:   Wed Jan 26 22:04:29 2011 -0600

    A few more I missed

commit 67a71df391e5aa9ea256d202ed3837d31ef01226
Merge: 61ba30a c3ed035
Author: jaypipes@gmail.com <>
Date:   Thu Jan 27 01:26:20 2011 +0000

    version bumped after tarball cut. no review needed...

commit c3ed035bbf8b16b36f2af24adfde684998408dfb
Author: jaypipes@gmail.com <>
Date:   Wed Jan 26 19:17:54 2011 -0600

    Bump version

commit dc8e6bb1d10b0cbcf8b032584324e0a587bcc630
Merge: 157b89e 61ba30a
Author: jaypipes@gmail.com <>
Date:   Wed Jan 26 17:12:28 2011 -0600

    Merge trunk

commit 157b89e5a896c2ff09c66c4d39fe7ca7da142710
Merge: 4675f06 99ded3e
Author: jaypipes@gmail.com <>
Date:   Wed Jan 26 17:12:25 2011 -0600

    Merge trunk

commit 7a5b5016ee9281a0fe3f43944647eaf9bb4d7c09
Merge: 2c7f6ff 61ba30a
Author: Cerberus <matt.dietz@rackspace.com>
Date:   Wed Jan 26 14:47:01 2011 -0600

    Merge conflicts and merge from trunk

commit 2c7f6ff811b6c5185559baaaf2c3540578c7f842
Author: Cerberus <matt.dietz@rackspace.com>
Date:   Wed Jan 26 14:44:36 2011 -0600

    Merge prop fixes and a few missed things

commit 92b839b1bf71d01bf0684441d5d681220ac96ab5
Author: Cerberus <matt.dietz@rackspace.com>
Date:   Wed Jan 26 12:42:52 2011 -0600

    Removing authors test for now

commit 5afa9e2b18c74589b6a55613c515663be4a8ac3d
Author: Cerberus <matt.dietz@rackspace.com>
Date:   Wed Jan 26 11:26:54 2011 -0600

    Merge prop fixes

commit 61ba30ad891596202ffa66cafe83b495da3ed449
Merge: 3202042 f536fdd
Author: Josh Kearney <josh.kearney@rackspace.com>
Date:   Wed Jan 26 17:06:23 2011 +0000

    PEP8 cleanup.

commit f536fdd8f3dfda9260624902c385a31935e1cfc7
Author: Josh Kearney <josh.kearney@rackspace.com>
Date:   Wed Jan 26 10:51:08 2011 -0600

    PEP8 cleanup

commit 3202042eccfe91d48ccce53617712a59a07fbe11
Merge: a8d791c 0659d5a
Author: Monty Taylor <mordred@inaugust.com>
Date:   Wed Jan 26 16:46:25 2011 +0000

    Should fix the sphinx issue.

commit a8d791c2d7fe41242d942b6e7ee862b63cc6698b
Merge: 99ded3e 5a74a85
Author: jaypipes@gmail.com <>
Date:   Wed Jan 26 16:01:48 2011 +0000

    Adds architecture docs and enables Graphviz sphinx extension. Also cleans up source code formatting in docs.

commit 0659d5a5de558ec55fbfa3b2556b2e654eaca70b
Author: Monty Taylor <mordred@inaugust.com>
Date:   Tue Jan 25 11:46:03 2011 -0800

    Make sphinx conditional.

commit 99ded3e6fe02c91042f075d26d951472ecae4af1
Merge: 177318d 4675f06
Author: jaypipes@gmail.com <>
Date:   Tue Jan 25 17:06:21 2011 +0000

    bumps version after tarball release of 0.1.4

commit 4675f0618dda9226a0e8954c99b565f557af9c9c
Author: jaypipes@gmail.com <>
Date:   Tue Jan 25 11:02:07 2011 -0600

    Bump version

commit 16e4b7621c8aadd3b53a1ebe017f7d269956fb92
Merge: cd15f14 177318d
Author: jaypipes@gmail.com <>
Date:   Tue Jan 25 10:55:53 2011 -0600

    Merge trunk with pip-requires fixes

commit 8f4078821dd6902a4312c1d8008949dae0197f62
Author: Cerberus <matt.dietz@rackspace.com>
Date:   Tue Jan 25 00:17:38 2011 -0600

    Added bzr to pip-requires and refixed some pep8 stuff

commit 7bc9ed564c8974ed1e06a22e531c43ae19f8b30a
Author: Cerberus <matt.dietz@rackspace.com>
Date:   Mon Jan 24 17:00:29 2011 -0600

    Authors check

commit ebb5e9cf0c3e378886d07325fd702ed492e3ca48
Author: Cerberus <matt.dietz@rackspace.com>
Date:   Mon Jan 24 16:35:57 2011 -0600

    A few more copyrights

commit db3a02a92393257644cb0291a31474b30fc01a09
Author: Cerberus <matt.dietz@rackspace.com>
Date:   Mon Jan 24 16:34:46 2011 -0600

    Copyright year change

commit 3cf374673901fbc8af4d4dd493786759138e5091
Author: Cerberus <matt.dietz@rackspace.com>
Date:   Mon Jan 24 16:18:06 2011 -0600

    Pylint cleanup

commit 84a6d4cd0e4f4f93012885fce81e2f6a700854d8
Author: Cerberus <matt.dietz@rackspace.com>
Date:   Mon Jan 24 15:48:03 2011 -0600

    Added copyright info

commit 0929fc096181ecc30f4dbc8cbed499abef60d9b8
Merge: dd53fa3 177318d
Author: jaypipes@gmail.com <>
Date:   Mon Jan 24 13:42:25 2011 -0500

    Merge trunk

commit 5a74a85f94b81ac2c9cf92c6d9c7f0c1260ba2e8
Author: jaypipes@gmail.com <>
Date:   Mon Jan 24 13:03:20 2011 -0500

    Adds architecture docs and enables Graphviz sphinx extension. Also cleans up source code formatting in docs.

commit 177318d24c4f62442d9da79a443084fa59d6055e
Merge: 3d3db85 cd15f14
Author: jaypipes@gmail.com <>
Date:   Mon Jan 24 15:31:24 2011 +0000

    bumps release version. ready for Bexar final release.
    
    no need to review...just sending this to trunk now.

commit cd15f14fc83875e80981f4a9886414dc3171c8f0
Author: jaypipes@gmail.com <>
Date:   Mon Jan 24 09:57:49 2011 -0500

    Version bump after release

commit 3d3db85821abbbf2af659b3feb55830fcf5e8129
Merge: 9c7b06d 361ec47
Author: Ken Pepple <ken.pepple@gmail.com>
Date:   Sun Jan 23 23:21:20 2011 +0000

    added sphinx and argparse into tools/pip-requires so that setup.py works.
    this bug also prevents nova from creating a virtualenv.

commit 361ec47e9532f0c2d9aa636c9b454ca9f14525da
Author: Ken Pepple <ken.pepple@gmail.com>
Date:   Sun Jan 23 12:20:28 2011 -0800

    fixes setup install pip dependencies

commit 02781962a494cc3c3e185bd30dcf3f44f0e5c5b6
Author: jaypipes@gmail.com <>
Date:   Sun Jan 23 13:03:51 2011 -0500

    Version bump for release

commit 9c7b06d35dfcea6d82834e58ccdce08b08ed8acf
Merge: 33f9095 9e4d7c8
Author: jaypipes@gmail.com <>
Date:   Sun Jan 23 17:51:19 2011 +0000

    Fixes bug #706636: Make sure pep8 failures will return failure for run_tests.sh

commit 9e4d7c8b0da55767be6f38c9bfe2032b566518b4
Author: jaypipes@gmail.com <>
Date:   Sun Jan 23 12:18:48 2011 -0500

    Make run_tests.sh return failure when pep8 returns fail, and fix the pep8 error in /bin/glance-upload

commit 33f909593f610044b4e2cfec63ebab01ff60fbfb
Merge: e231c61 9685f63
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Sun Jan 23 16:26:24 2011 +0000

    This patch:
    * Converts dashes to underscores when extracting image-properties from HTTP headers (we already do this for 'regular' image attributes
    * Update image_properties on image PUTs rather than trying to create dups
    
    Bonus:
    * Remove useless test_data file (no longer needed now that we can actually use Glance API via glance/client.py)
    * Add glance_upload.py which we can use to add raw/extra-kernel images (this might be able to go away once we have a full-blown glance-admin tool. However, for now, this is useful for testing Glance <-> Nova integration.

commit e231c618cdb9512769d262e3271a19fb3969fc94
Merge: df4b32d 9c57d40
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Sun Jan 23 16:16:27 2011 +0000

    This patch replaces some remaining references to req.body (which buffers the entire request body into memory!) with the util.has_body method which can determine whether a body is present without reading any of it into memory.

commit 9685f63c255a7e1abe28d89e0b8a86e36e9d6c8a
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Sat Jan 22 19:42:07 2011 +0000

    Adding Apache license, fixing long line

commit a89f94d0573394f667c366e7af59cb9dac0a6e21
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Sat Jan 22 19:35:29 2011 +0000

    Making glance-upload a first-class binary

commit d0ba568360b2edfdeb35053b39cd0de5c7e5067a
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Sat Jan 22 19:17:07 2011 +0000

    Revove useless test_data.py file, add image uploader

commit ba947efb780cbd3858e8cd1f54ae8de4dc4950c9
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Sat Jan 22 19:15:55 2011 +0000

    Fix property create

commit 9c57d403b2767b42c57c4fc1efe834010d276ca2
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Sat Jan 22 03:53:16 2011 +0000

    Dont buffer entire image stream on PUT

commit df4b32d33e9f60ca5fa6a947be1378014720a0db
Merge: 9af7453 9c95aa6
Author: jaypipes@gmail.com <>
Date:   Fri Jan 21 19:01:45 2011 +0000

    Adds man pages for glance-registry and glance-api programs. Adds Getting Started guide to the Glance documentation.
    
    Fixes Bug #704842

commit 9af7453afe386034eed5614079a9f5787449b348
Merge: e1cacfd 54da96c
Author: jaypipes@gmail.com <>
Date:   Fri Jan 21 18:51:28 2011 +0000

    Fixes LP Bug #700162: Images greater than 2GB cannot be uploaded
    using glance.client.Client.

commit 9c95aa612233f51f6ef528a0956ab341e71c9826
Author: jaypipes@gmail.com <>
Date:   Fri Jan 21 13:00:15 2011 -0500

    Duh, it helps to import the class you are inheriting from....

commit 54da96c611b788ec293d565815126d1ba85a0126
Author: jaypipes@gmail.com <>
Date:   Fri Jan 21 12:35:40 2011 -0500

    OK, found a solution to our test or functional dilemma. w00t.

commit 5bab765b4e6e70e9724685e8937ad5c8f385bfba
Merge: 32866f1 5fd631d
Author: jaypipes@gmail.com <>
Date:   Fri Jan 21 11:35:11 2011 -0500

    Merge Rick's changes and correct small bug that was affecting test cases.

commit 5fd631dde9acd8bae338aa66b4d538a75edd1271
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Fri Jan 21 04:55:16 2011 +0000

    Make compat with chunked transfer

commit e1cacfddd21a51b13af1291c64caa80bb6951e38
Merge: ba666b0 d0e3233
Author: jaypipes@gmail.com <>
Date:   Thu Jan 20 23:56:18 2011 +0000

    Removes the last vestiges of Twisted from Glance.
    
    Bonus: shaves a full 45 seconds off of run_tests.sh -V -f now that a giant twisted tarball doesn't need to be downloaded.

commit 28cdd61d6bd29c3ce2b80a3e9375e2fc86d2ecc3
Merge: ea0549f fbc496a
Author: jaypipes@gmail.com <>
Date:   Thu Jan 20 18:50:35 2011 -0500

    Pull in typo fix

commit ea0549f73d193ec0421783988dda8bb01cb24914
Author: jaypipes@gmail.com <>
Date:   Thu Jan 20 18:49:13 2011 -0500

    Add in manpage installation hook. Thanks Soren :)

commit 32866f1a152ee5d35a920de75b4dbd1eccc3c5e8
Author: jaypipes@gmail.com <>
Date:   Thu Jan 20 15:27:41 2011 -0500

    Fixes LP Bug #700162: Images greater than 2GB cannot be uploaded
    using glance.client.Client.
    
    This patch introduces chunked-transfer encoding to the client
    classes. When the glance.client.BaseClient.do_request() method
    is called and the method is either POST or PUT and the body
    argument is a file-like object, then the do_request() method
    builds a chunked-transfer encoded request and send()s chunks of
    the body file-like object over the httplib connection.
    
    Not sure how we fully test this, since we'd have to pack up
    a very large file for use in testing, but I'm open to suggestions :)

commit 1f1888d17d321c697f2d7b48e890ab1340b0c154
Merge: ba666b0 d0e3233
Author: jaypipes@gmail.com <>
Date:   Thu Jan 20 14:58:34 2011 -0500

    Merge removal of twisted

commit d0e32336aa7be695c630131d7b8db36ac60db70c
Author: jaypipes@gmail.com <>
Date:   Thu Jan 20 14:48:11 2011 -0500

    Removes Twisted from tools/install_venv.py and zope.interface from tools/pip-requires. Shaved a full 45 seconds for me off of run_tests.sh -V -f now we're not downloading a giant Twisted tarball...

commit 9f0b0a436b26e9e7811fba3db4941907c49622d8
Author: jaypipes@gmail.com <>
Date:   Thu Jan 20 14:37:42 2011 -0500

    Remove last little vestiges of twisted.

commit fbc496ae7b8755323cd7e32361501b601e439d94
Author: jaypipes@gmail.com <>
Date:   Thu Jan 20 14:20:34 2011 -0500

    Quick typo fix in docs.

commit ba666b06c636f83b493762721d52a5f67ca5e16b
Merge: bd035df 5187864
Author: Soren Hansen <soren@linux2go.dk>
Date:   Thu Jan 20 15:56:19 2011 +0000

    Add run_tests.py to tarball.

commit 51878645d12ac4b26e676ef6a582ae096838c808
Author: Soren Hansen <soren@linux2go.dk>
Date:   Thu Jan 20 11:13:46 2011 +0100

    Also include run_tests.py in tarball.

commit c967f9ace2742ef5b11e995b48a15c2c4176d55b
Author: jaypipes@gmail.com <>
Date:   Wed Jan 19 16:38:39 2011 -0500

    Adds man pages for glance-registry and glance-api. Adds Getting Started guide to Glance docs.

commit bd035dfd102869568eb38209fa9c8d1a2a716297
Merge: 4d0f6da 96eb80f
Author: jaypipes@gmail.com <>
Date:   Wed Jan 19 20:41:21 2011 +0000

    Fixes bug #696375: x-image-meta-size not optional despite documentation saying so.

commit 96eb80f589af94435a91a8bcbab0f0af8cf472c7
Author: jaypipes@gmail.com <>
Date:   Wed Jan 19 14:22:41 2011 -0500

    PEP8 fixes in /glance/store/__init__.py
    
    Also makes run_tests.sh automatically call pep8.
    Pulls in Nova's run_tests.py wrapper for prettying
    up output from nosetests...

commit 4d0f6da88b18b27e86e03b72d392647a322c3af5
Merge: 9767165 c9d93d2
Author: jaypipes@gmail.com <>
Date:   Wed Jan 19 19:16:19 2011 +0000

    Fix Bug #704038: Unable to start or connect to register server on anything other than 0.0.0.0:9191

commit c9d93d22195d3f40202c303602dba561a7baf757
Author: jaypipes@gmail.com <>
Date:   Tue Jan 18 16:01:49 2011 -0500

    Fix Bug #704038: Unable to start or connect to register server on anything other than 0.0.0.0:9191

commit 97671650987d74c6281e56f3f4e1950f2d996d5b
Merge: c481511 96ddcc0
Author: Monty Taylor <mordred@inaugust.com>
Date:   Tue Jan 18 18:41:18 2011 +0000

    upgrade version...

commit 56fa9a39bf022192c3e996535a4869823d60dad3
Author: jaypipes@gmail.com <>
Date:   Tue Jan 18 12:58:23 2011 -0500

    Fixes Bug#696375: x-image-meta-size is not optional, contrary to
    documentation.
    
    The image's size is set to zero now during reservation of the image ID if the
    image's size is not passed in with headers. In addition,
    glance.store.Backend.add() now returns a tuple of (location, size) and
    the image's size attribute in the registry is updated to this value if
    previously set to zero.
    
    Adds a new test case that ensures the size attribute is set properly
    when not included in the image meta headers.
    
    Adds documentation for the new _reserve(), _upload(), and _activate()
    methods in glance.server.Controller.

commit f73ee950a1db91fbe243ed5377fe24dc133b8d79
Merge: 14cc5df c481511
Author: jaypipes@gmail.com <>
Date:   Tue Jan 18 12:48:42 2011 -0500

    Merge trunk

commit 96ddcc04626b22e84d21b056a174b76f9c8252d4
Author: Monty Taylor <mordred@inaugust.com>
Date:   Tue Jan 18 09:31:40 2011 -0800

    Increase version after release.

commit e1ad8532467bf51da3b21c6ed9746830767df2a0
Author: Monty Taylor <mordred@inaugust.com>
Date:   Mon Jan 17 14:24:50 2011 -0800

    Cut 0.1.2.

commit c4815119a2ef6ab03c58a1294a6792f45029efc6
Merge: 0afe4cc bdb2f22
Author: Monty Taylor <mordred@inaugust.com>
Date:   Mon Jan 17 22:21:20 2011 +0000

    Files missing from the tarball (and you probably need to cut a 0.1.2.)

commit 14cc5df1ccbc94dc3e367348b76e0fcd9c44dfee
Author: jaypipes@gmail.com <>
Date:   Mon Jan 17 13:09:14 2011 -0500

    Cleanup of RST documentation and addition of docs on an image's status

commit bdb2f2209bf71105c83414e6653c2714739a94f0
Author: Monty Taylor <mordred@inaugust.com>
Date:   Sat Jan 15 12:02:31 2011 -0800

    Include some files that were left out.

commit 0afe4cc55408934b051acb8e53c75a125a609970
Merge: 18d6cf8 9d107d2
Author: jaypipes@gmail.com <>
Date:   Fri Jan 14 22:11:34 2011 +0000

    Implements the S3 store to the level of the swift store.
    
    This branch is Chris' work with a merge of trunk, fix of merge conflicts from trunk, and moving the import of boto into a conditional block so tests can run with the fakes when boto is not installed on the local machine.

commit 9d107d234a11019ac2dae7ef86d896237d74af02
Merge: 14ca119 1f4a644
Author: jaypipes@gmail.com <>
Date:   Fri Jan 14 14:32:52 2011 -0500

    Merge trunk, resolve conflicts, and move import of boto into conditional block to prevent import errors when running tests and not having boto installed.

commit 18d6cf8b32eb048f1646ab516e80b2d105fc3220
Merge: 1f4a644 b2cd2b0
Author: jaypipes@gmail.com <>
Date:   Thu Jan 13 17:16:24 2011 +0000

    fixes bug698318.
    
    Work done by Ewan Mellor; I just fixed a conflict after merging trunk...

commit b2cd2b0c3dc69c5f14d7520c1568c92300c13c3c
Merge: 4b924c9 1f4a644
Author: jaypipes@gmail.com <>
Date:   Thu Jan 13 12:03:04 2011 -0500

    Merge trunk and resolve conflict in server.py

commit 14ca119e295e7f29f2b24d727fdcc09cb4572cb4
Author: Christopher MacGown <chris@slicehost.com>
Date:   Wed Jan 12 22:03:54 2011 +0100

    Fixes suggested by JayPipes review. Did not modify docstrings in non-related files.

commit 1f4a644e61eae7bd992d97f5d92d9463faa5be00
Merge: 5048e3f 21cea9c
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Jan 12 16:31:29 2011 +0000

    This merge is in conjunction with lp:~rconradharris/nova/xs-snap-return-image-id-before-snapshot
    
    The patch does the following:
    
      * Image Create (POST) is broken up into 3 steps (reserve, upload and activate); reserve is used to allow the OpenStack API to return metadata about an image where the data has not been uploaded yet
      * Image Update (PUT) now takes image data as the request body and metadata as headers (just like POST); state is enforced so that image data can only be uploaded once.
      * Image statuses were changed to match the OpenStack API (queued, saving, active, killed); NOTE: preparing is not used
      * update_image and add_image client calls now return metadata instead of just the id

commit 21cea9c5e61990797edb662ed0a49734c5e6f128
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Tue Jan 11 11:34:48 2011 -0600

    Updating docs

commit f62a67615943d13ae060606ef2365c7bc282b96c
Merge: 6880a7a 5048e3f
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Tue Jan 11 11:04:14 2011 -0600

    Merging trunk

commit 5048e3fc4844e098ab3d1c6f3a42584f2ee7570d
Merge: eff29fc 386b42c
Author: Cory Wright <cory.wright@rackspace.com>
Date:   Mon Jan 10 16:57:03 2011 +0000

    Clean up the rest of Glance's PEP8 problems.

commit 6880a7a764239d445b93062b4d7ee8f52f677929
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Fri Jan 7 00:13:33 2011 -0600

    PEP-8 Fixes

commit 19e411bc48ff5a9cec34adccfbc337ce472c01fa
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Thu Jan 6 19:14:53 2011 -0600

    Fixing eventlet-raise issue

commit 4b924c96189f51ab6effb4e9321f356e09c9e3ce
Author: Ewan Mellor <ewan.mellor@citrix.com>
Date:   Thu Jan 6 21:24:17 2011 +0000

    Bug #698316: Glance reads the whole image into memory when handling a POST
    /images request
    
    Change the store API so that add takes a file-like object, not a string.
    This avoids loading the whole request body into memory before writing it out,
    and allows us to stream it instead.

commit 0465f1810f3dbf1d0d66e6e287425be8f000cac0
Merge: cb5d4fd eff29fc
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Jan 5 11:47:18 2011 -0600

    Merging trunk

commit 3095add3b4ef7d26b5f418b1a225efa333c88cfa
Merge: 71650eb eff29fc
Author: Christopher MacGown <chris@slicehost.com>
Date:   Wed Jan 5 11:02:36 2011 +0100

    Merge in upstream to avoid merge conflict.

commit 71650ebbbaaf50713542f8acc4a33076ae730933
Author: Christopher MacGown <chris@slicehost.com>
Date:   Wed Jan 5 10:56:58 2011 +0100

    Fixed pylint/pep8 for glance.store.s3

commit 786f000b39340461b55a793455c2da0fbd95840a
Author: Christopher MacGown <chris@slicehost.com>
Date:   Wed Jan 5 10:47:21 2011 +0100

    Implement S3 to the level of swift

commit cb5d4fd2e81537f0d6ad0e420ab9aa2610e78c54
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Tue Jan 4 18:16:53 2011 -0600

    removing old methods

commit b09e9c9600a1581bb2aba355714d258696573c3c
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Tue Jan 4 18:06:31 2011 -0600

    refactoring so update can take image_data

commit 386b42c17631aa1f4221f1c855b0dc39e101d608
Author: Cory Wright <cory.wright@rackspace.com>
Date:   Tue Jan 4 17:00:37 2011 -0500

    More PEP8 fixes

commit eff29fca5def385f98ad5b464d54ddde56a319e3
Merge: 87432b2 f11c8c4
Author: Ewan Mellor <ewan.mellor@citrix.com>
Date:   Tue Jan 4 20:32:07 2011 +0000

      Fix all Glance's pep8 problems.

commit 87432b2ecd2929d4a423c74626236862ca46e998
Merge: 39e1a3c 30e66f2
Author: Ewan Mellor <ewan.mellor@citrix.com>
Date:   Tue Jan 4 16:27:06 2011 +0000

    Remove incorrect doccomments about there being a default for the host
    parameter, fix misdocumented default port, and remove handling of missing
    parameters in BaseClient, because the values are always specified by the
    subclass's __init__.

commit f11c8c4c072dfc1c7ae401af9b2baaf602647285
Author: Ewan Mellor <ewan.mellor@citrix.com>
Date:   Sun Jan 2 02:47:59 2011 +0000

    Bug #696385: Glance is not pep8-clean
    
    Fix all Glance's pep8 problems.

commit 30e66f20aea96504b1c11e4fb27c82d3a9142cc5
Author: Ewan Mellor <ewan.mellor@citrix.com>
Date:   Sun Jan 2 02:26:58 2011 +0000

    Bug #696382: Glance client parameter defaults misdocumented
    
    Remove incorrect doccomments about there being a default for the host
    parameter, fix misdocumented default port, and remove handling of missing
    parameters in BaseClient, because the values are always specified by the
    subclass's __init__.

commit 39e1a3cc44264de4c86997f1bd9df05cfb61d7cf
Merge: a7fb5e7 e47ac36
Author: jaypipes@gmail.com <>
Date:   Tue Dec 28 02:11:57 2010 +0000

        Fixes a number of things that came up during initial
        coding of the admin tool:
    
        * Fix client constructor to behave like httplib.HTTPConnection
          instead of accepting a URL, it now accepts host, port, and
          use_ssl boolean switch that turns on HTTPSConnection
        * Adds headers properly to the request in client.do_request().
          Previously, was erroneously calling httplib.HTTPConnection.putheader
          after calling httplib.HTTPConnection.request, which was incorrect
        * Now returns type and size of images in index
        * Webob.Response and httplib.HTTPResponse have slightly different
          ways of accessing headers. Fixed an attribute error that was coming
          up because the tests assume webob.

commit e47ac364b7650a48c18be0cbeb06a2cd8b54f3da
Author: jaypipes@gmail.com <>
Date:   Mon Dec 27 15:03:03 2010 -0500

    Made review changes from Rick.

commit dd53fa3d058b96aa237b2319c64d581334c29056
Author: jaypipes@gmail.com <>
Date:   Sun Dec 26 00:38:17 2010 -0500

    Duh, use_ssl should not use HTTPConnection...

commit 07c4d00ed366c2411b7ac19ec40e120289eff179
Author: jaypipes@gmail.com <>
Date:   Sun Dec 26 00:02:58 2010 -0500

    Remove final debugging statement

commit 7cf673e7467c4294a8e638616a7db6c9073b675e
Merge: b88d69f a7fb5e7
Author: jaypipes@gmail.com <>
Date:   Sat Dec 25 23:57:40 2010 -0500

    merge trunk

commit b88d69f5044305f8820cbe40d064fc70586dd67d
Author: jaypipes@gmail.com <>
Date:   Sat Dec 25 23:56:10 2010 -0500

    Remove debugging statements

commit 91bdb5e18d32fb3773f3e2634c9d69811eaae36e
Author: jaypipes@gmail.com <>
Date:   Sat Dec 25 23:50:01 2010 -0500

    Fixes a number of things that came up during initial
    coding of the admin tool:
    
    * Fix client constructor to behave like httplib.HTTPConnection
      instead of accepting a URL, it now accepts host, port, and
      use_ssl boolean switch that turns on HTTPSConnection
    * Adds headers properly to the request in client.do_request().
      Previously, was erroneously calling httplib.HTTPConnection.putheader
      after calling httplib.HTTPConnection.request, which was incorrect
    * Now returns type and size of images in index
    * Webob.Response and httplib.HTTPResponse have slightly different
      ways of accessing headers.  Fixed an attribute error that was coming
      up because the tests assume webob.

commit a7fb5e7d6cc64a0abfd798ef8bf07d552d39bc4d
Merge: 25d0731 0b3bf98
Author: Ewan Mellor <ewan.mellor@citrix.com>
Date:   Sun Dec 26 04:11:54 2010 +0000

    fix bug 694382

commit 0b3bf98c9db40e385297bd2cb4cf120bb3811eef
Author: Ewan Mellor <ewan.mellor@citrix.com>
Date:   Sun Dec 26 00:36:47 2010 +0000

    Bug #694382: setup.py refers to parallax-server and teller-server, when these have been renamed
    
    Fix script references, following earlier rename.

commit 25d073136ed6a1759a247ffed4370241c2bf74b8
Merge: 812ef4e 33d54d9
Author: jaypipes@gmail.com <>
Date:   Thu Dec 23 19:57:00 2010 +0000

    documentation cleanup and matching to other OpenStack projects.  Glance is no longer the red-headed documentation stepchild in OpenStack...

commit 812ef4e99f7bfa8dced68a06e6b43a7f9344d206
Merge: faab96f 796674c
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Thu Dec 23 19:41:59 2010 +0000

    Converts timestamp attributes to datetime objects before persisting.
    
    Refactors image_update and image_create to use the same basic code.

commit 796674c71961274e510d2f09f1b4c638e349e503
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Thu Dec 23 13:20:52 2010 -0600

    Adding __protected_attributes__, some PEP8 cleanups

commit 33d54d9f2c74d34548146ad64b91be70f7d6c61d
Author: jaypipes@gmail.com <>
Date:   Thu Dec 23 12:31:47 2010 -0500

    review fixes

commit 240638680911ba3bad79ca93f7383aa04cf9a5e8
Author: jaypipes@gmail.com <>
Date:   Wed Dec 22 12:52:15 2010 -0500

    Update sphinx conf to match other OpenStack projects

commit f32a2eadb03565e962ac1769f85027f19879924d
Author: jaypipes@gmail.com <>
Date:   Wed Dec 22 12:38:54 2010 -0500

    Documentation cleanup. Splits out index.rst into multiple section docs.

commit 7cfe9e09048aaff65ecb3d599dc720d487758d5d
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Dec 22 11:36:26 2010 -0600

    Converting to datetime before saving image

commit faab96fda74613d8b6afd35be2e24d97fc6bbfae
Merge: 549c345 b143079
Author: jaypipes@gmail.com <>
Date:   Tue Dec 21 16:07:03 2010 +0000

    Enhances POST /images call to, you know, actually make it work...
    
    Contains Rick's additions as well.

commit b1430797ecacdd82b01a2ee5757f93d9d7a9f791
Merge: cff6301 d4bb114
Author: jaypipes@gmail.com <>
Date:   Tue Dec 21 10:07:16 2010 -0500

    Merge Rick's additions branch and make tiny fixups

commit d4bb114194bd83c35788989d604b3ecea40b5178
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Mon Dec 20 23:30:04 2010 -0600

    Make directory for filesystem backend

commit 549c3455c9fe1cd43322d95ab029565b6cf8195c
Merge: e1aaaa8 9c2a8f2
Author: jaypipes@gmail.com <>
Date:   Mon Dec 20 19:01:53 2010 +0000

    doing the merge of this again...somehow the trunk branch never got rev26 :(

commit cff6301bc1251078f4b7f1ff6631a8048371141b
Author: jaypipes@gmail.com <>
Date:   Mon Dec 20 13:38:56 2010 -0500

    Adds POST /images work that saves image data to a store backend

commit c566d9b77d08ef134f164ce2b8f9725602126800
Author: jaypipes@gmail.com <>
Date:   Mon Dec 20 12:12:46 2010 -0500

    Update docs for adding image...

commit 410aa563505957a3c42370c375656d4d5b5f8022
Author: jaypipes@gmail.com <>
Date:   Mon Dec 20 12:12:35 2010 -0500

    Fix Chris minor nit on docstring

commit 9c2a8f25d9866d3059df4a7ce2d5411693435ac4
Author: jaypipes@gmail.com <>
Date:   Sat Dec 18 13:00:21 2010 -0500

    Fixes binaries, updates WSGI file to more recent version from Nova, and fixes an issue in SQLAlchemy API that was being hidden by stubs and only showed up when starting up the actual binaries and testing...

commit e1aaaa8f0404e6ed2632e28d6c6ef2745e534e60
Merge: 6bd7f30 344828c
Author: jaypipes@gmail.com <>
Date:   Fri Dec 17 16:37:06 2010 +0000

    Major refactoring...

commit 344828cc3d882734f5ba5536b9baa9474976ecdf
Author: jaypipes@gmail.com <>
Date:   Thu Dec 16 18:19:23 2010 -0500

    Fix testing/debug left in

commit 97e966f2dbc4442c105c80021718f970901790e6
Author: jaypipes@gmail.com <>
Date:   Thu Dec 16 17:04:58 2010 -0500

    Fixes from review

commit 4cc79106e7d294e566d2b8192efc2e7b9d102d62
Author: jaypipes@gmail.com <>
Date:   Tue Dec 14 14:47:00 2010 -0500

    Documentation updates and GlanceClient -> Client

commit b9347d2441da4f38cdf58212a5baaa5160d44c8a
Author: jaypipes@gmail.com <>
Date:   Tue Dec 14 14:34:04 2010 -0500

    Refactor a bunch of stuff around the image files collection
    
    * Removes ImageFile table
    * Places restriction on clients and server requests to ensure
      that the image metadata location is set, or the body of the request
      is image data
    * Refactors the FilesystemBackend to be a bit more robust and throw
      NotFound properly and return a real object instead _file_iter.
    * Move some repetitive code around injecting and building x-image-meta
      HTTP headers into /glance/util.py

commit 31d23607073d13b1c1d78a56f54f94c78c64cdd0
Author: jaypipes@gmail.com <>
Date:   Tue Dec 14 10:42:17 2010 -0500

    Cleanup around x-image-meta and x-image-meta-property HTTP headers in GET/HEAD

commit 93b297292100f0b835bc802173906688ff66d9e0
Author: jaypipes@gmail.com <>
Date:   Tue Dec 14 10:10:54 2010 -0500

    Update /glance/client.py to have GlanceClient do all operations
    that RegistryClient does.
    
    Update glance.server.Controller.create() to return image metadata
    in x-image-meta- headers instead of the response body.
    
    Move RegistryClient to /glance/registry/client.py
    
    Next steps:
    
    * Change GlanceClient.add_image() calls to insert metadata
      into HTTP headers and optionally send image data in the
      request body.

commit fba60c3a588ccbae61e3ba8cf6558efc36d116a5
Author: jaypipes@gmail.com <>
Date:   Mon Dec 13 22:22:13 2010 -0500

    Merges Glance API with the registry API:
    * Makes HEAD /images/<ID> return metadata in headers
    * Make GET /images/<ID> return image data with metadata
      in headers
    Updates docs some (more needed)
    
    Next steps:
    
    * Update main GlanceClient class to encapsulate entire Glance API
      and hide RegistryClient from normal usage
    * Refactor registry database API and schema

commit f45dc713d47be32e2f50c35200b4566d34878f24
Author: jaypipes@gmail.com <>
Date:   Mon Dec 13 21:23:42 2010 -0500

    Second step in simplifying the Glance API.
    
    * Removes the notion of Parallax
    * Renames parallax stuff to just "registry"
    
    Next steps:
    
    * Refactor the registry database API to not be so abstract
      and remove the Nova DB super-abstraction layer. Add more
      attributes to the registry database tables, including
      image size_in_bytes
    * Merge Glance API with the registry API:
      ** Make HEAD /images/<ID> return metadata in headers
      ** Make GET /images/<ID> return image data with metadata
         in headers
    * Update client classes to hide registry client fully within
      /glance/registry/
    * Update docs and tests

commit 45335fc86616463bea81ad097f4a4637e227843b
Author: jaypipes@gmail.com <>
Date:   Mon Dec 13 20:56:11 2010 -0500

    This is the first part of simplifying the Glance API and
    consolidating the Teller and Parallax APIs into a single,
    unified Glance API.
    
    The following changes were made:
    * Change the bin/teller-server to bin/glance-api
    * Remove the notion of Teller as something the user
      has to be aware of. Call the previous "Teller backends"
      simple "stores".
    * Moves /glance/teller/controllers.py to /glance/server.py
    * Break out the filesystem store into a separate file
    
    Next steps:
    * Hide Parallax behind a unified API
    * Update docs and wiki
    * Refactor image registry database to include more
      information about images
    * Refactor notion of an image identifier to be a Glance URI

commit 6bd7f30d1d9c7d7e6ff6efdc1bb4f3ffe0b50864
Merge: 6c4f77d 0d38357
Author: jaypipes@gmail.com <>
Date:   Sat Dec 11 20:17:00 2010 +0000

    Adds DELETE call to Teller API

commit 6c4f77d472442f9a77032c99e2cd76f9ac43a66f
Merge: 8f4010a b460679
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Thu Dec 9 16:07:36 2010 +0000

    Fixes Swift URL Parsing in Python 2.6.5 by adding back netloc.

commit 8f4010a5c277d54cb635dff6820e0d180824de50
Merge: c2ec2b6 b39bfa4
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Thu Dec 9 16:07:00 2010 +0000

    Moving imports into main which will only be executed after we daemonize thus avoiding the premature initialization of epoll.

commit b39bfa40b0dce26b7168d11ae78a7cf1285fa383
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Dec 8 23:49:36 2010 -0600

    Delaying eventlet import until after daemonization

commit b460679820d48f5b256de9436aa11d080761995e
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Dec 8 23:19:49 2010 -0600

    Fix Swift URL parsing for Python 2.6.5

commit 0d38357433e0e0f32abcc4ff8a29526326766097
Author: jaypipes@gmail.com <>
Date:   Wed Dec 8 13:07:31 2010 -0500

    Don't leak implementation details in Swift backend. Return None on successful delete_object call

commit 1c240b86d17dd84b03660b773c3a47ad8e6dc0ab
Author: jaypipes@gmail.com <>
Date:   Mon Dec 6 12:57:03 2010 -0500

    Adds call to Swift's DELETE

commit 4b6922dfaec9dc667a7e1856f74cb53130c73138
Author: jaypipes@gmail.com <>
Date:   Mon Dec 6 12:42:05 2010 -0500

    Typo fixed and tiny cleanups

commit c1d66d2bdb05e2db1fea3faf84ea56c4442cc5a2
Author: jaypipes@gmail.com <>
Date:   Mon Dec 6 12:28:30 2010 -0500

    Adds DELETE to Teller's API.

commit 9d80a0d73cf09967b15dea83de1149da8f154ec0
Merge: 06de757 c2ec2b6
Author: jaypipes@gmail.com <>
Date:   Mon Dec 6 10:51:13 2010 -0500

    Merge trunk

commit c2ec2b6984406c3e2e7c975046e2d78c1f9d7c19
Merge: 43bbf01 f6b9baf
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Sun Dec 5 17:22:07 2010 +0000

    Just some small cleanups, fixing:
      * Swapped port numbers (Parallax Port <=> Teller port)
      * Removing extraneous routes in Teller API
      * Adding required slashes to do_request
    
    Ran unit-tests and they passed.
    
    Tested functionally using curl and tests/test_data.py, everything worked.

commit 43bbf01126772d547ed1c9b4598774796c4863c7
Merge: f9462be 06de757
Author: jaypipes@gmail.com <>
Date:   Sun Dec 5 16:57:24 2010 +0000

        * Changes Teller API to use REST with opaque ID sent in
          API calls instead of a "parallax URI". This hides the
          URI stuff behind the API layer in communication between
          Parallax and Teller.
        * Adds unit tests for the only complete Teller API call so
          far: GET images/<ID>, which returns a gzip'd string of
          image data
    
          I want to get feedback on these new unit tests and the
          changes to the Teller API to remove the parallax URI from
          the API calls.

commit f6b9baff0d0ec7065e2412a368c9275bf774dc8b
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Thu Dec 2 14:19:26 2010 -0600

    Fixing swapped port numbers, removing extraneous routes in Teller controller, adding required slash for do_request calls

commit 06de7577b59ae6686f1be72e91b253eae66f7bb5
Author: jaypipes@gmail.com <>
Date:   Wed Dec 1 12:10:25 2010 -0500

    * Changes Teller API to use REST with opaque ID sent in
      API calls instead of a "parallax URI".  This hides the
      URI stuff behind the API layer in communication between
      Parallax and Teller.
    * Adds unit tests for the only complete Teller API call so
      far: GET images/<ID>, which returns a gzip'd string of
      image data
    
      I want to get feedback on these new unit tests and the
      changes to the Teller API to remove the parallax URI from
      the API calls.

commit 677a9777ecbeef4a0bfb6abc5d0a6c571d07cd42
Author: jaypipes@gmail.com <>
Date:   Mon Nov 29 11:00:10 2010 -0500

    Add files attribute to Parallax client tests

commit f9462be46496c0ad18a35dd9a217c91eb3c1f926
Merge: f5984a2 0e73f2e
Author: jaypipes@gmail.com <>
Date:   Wed Nov 24 19:42:06 2010 +0000

    Adds client classes for Parallax and Teller and fixes some issues where our controller was not returning proper HTTP response codes on errors...

commit 0e73f2e0cdc3cc8e5b31f5c87f97dd6f032d7637
Author: jaypipes@gmail.com <>
Date:   Tue Nov 23 13:12:11 2010 -0500

    Cleanup/fixes for Rick review

commit 3516f14efb2e463f484b30ae6a5ab4ad32037927
Author: jaypipes@gmail.com <>
Date:   Mon Nov 22 13:35:28 2010 -0500

    Adds client classes ParallaxClient and (stubbed) TellerClient
    to new glance.client module.
    
    Updates test cases for Parallax API to properly raise HTTP
    exceptions (which the client classes convert to Nova/Glance
    exception classes)

commit f5984a271b345447f6709847b4ec1519b157fc89
Merge: a6962d6 83cfeb5
Author: jaypipes@gmail.com <>
Date:   Thu Oct 21 20:46:50 2010 +0000

    packaging fixups preparing for release candidate

commit 83cfeb562038954f11581dd15b230fc4c33d10d6
Author: jaypipes@gmail.com <>
Date:   Thu Oct 21 16:34:53 2010 -0400

    Remove symlinks in bin/

commit 6b220dbea1c8cf21c17eeb7e2466047c0aa92bff
Author: jaypipes@gmail.com <>
Date:   Thu Oct 21 15:51:44 2010 -0400

    Packaging fixups

commit a6962d618e7e0056899c8839e1f875719723aaff
Merge: b335ff2 98dc44c
Author: jaypipes@gmail.com <>
Date:   Mon Oct 18 14:36:46 2010 +0000

    awesomeness. merging into trunk since my parallax-api is already in trunk I believe. :)

commit 98dc44c10e6db4dc0079883e8b88cfa9ab34febe
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Sun Oct 17 11:43:19 2010 -0500

    Moving ATTR helpers into db module

commit 9382efb8498b40628753698367d11ea517799a87
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Sun Oct 17 11:31:04 2010 -0500

    PUTing and POSTing using image key

commit 86ed4327900bf3108629038ea63c6b3c505fdde5
Author: jaypipes@gmail.com <>
Date:   Fri Oct 15 16:03:13 2010 -0400

    Quick fix...gives base Model an update() method to make it behave like a dict.

commit 381afa40bd9b50be821f5c531dec236cb7e7d9c5
Merge: 20749d8 b335ff2
Author: jaypipes@gmail.com <>
Date:   Fri Oct 15 16:00:47 2010 -0400

    Merge trunk:

commit 20749d8f3040460f0fbacf55de050df3d0c886ac
Author: jaypipes@gmail.com <>
Date:   Fri Oct 15 15:59:52 2010 -0400

    Make returned mapping have an 'image' key to help in XML serialization

commit da2142a7f655e4a7c03178d4d4a46248487e02b8
Author: jaypipes@gmail.com <>
Date:   Fri Oct 15 15:46:21 2010 -0400

    Ignore virtualenv directory in bzr

commit b335ff2a87f05db46e161326915cbbf5e2075ac9
Merge: 543911e bfbc211
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Fri Oct 15 17:16:50 2010 +0000

    This patch removes unique index on the 'key' column of image_metadatum and replaces it with a compound UniqueConstraint on 'image_id' and 'key'. The 'key' column remains indexed.
    
    Adds tests to ensure that two different images can use the same key, while preventing a single image from having two keys with the same name.

commit 543911e581b3515e2415c6341a26c5ce97f5a1eb
Merge: ae51a14 854c906
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Fri Oct 15 15:26:41 2010 +0000

    Fixes lp653358
    
    Using swift.common.client rather than python-cloudfiles for Teller's Swift backend.

commit 854c906f587bf8c67eedacf7f3cc7795b93e279b
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Fri Oct 15 01:03:42 2010 -0500

    Renaming is_cloudfiles_available -> is_swift_available

commit bfbc211bb69773ca8e2c3df7f01b835942112d1b
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Fri Oct 15 00:35:15 2010 -0500

    Adds compound unique constraint to ImageMetadatum

commit 8009d5230581c812fea730092a4525396cdd285e
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Thu Oct 14 18:17:16 2010 -0500

    Using swift.common.client rather than python-cloudfiles in Teller's Swift backend

commit 728b4e5f5f24db398e44d233b992ca0bc38fe763
Author: jaypipes@gmail.com <>
Date:   Thu Oct 14 13:23:37 2010 -0400

    Adds DELETE to the Parallax REST API.

commit 19a653c984d457d311fac4588a972295320feb7b
Author: jaypipes@gmail.com <>
Date:   Thu Oct 14 13:16:09 2010 -0400

    Implements the REST call for updating image metadata in the Parallax API

commit ae51a143a10e78ef375676c6751355f1be66b421
Merge: 6ba2353 fa66de6
Author: jaypipes@gmail.com <>
Date:   Wed Oct 13 21:36:57 2010 +0000

    Implements Parallax API call to register a new image
    
    * Adds unit test for Parallax API controller
    * Adds stubouts for glance.parallax.db.sqlalchemy.api calls
      regarding images
    * Adds unittest for bad status on image creation
    * Adds --logging-clear-handlers arg to nosetests in run_tests.sh to
      prevent extra output in running tests when tests complete successfully

commit fa66de6d9a24ef74176535ac9f6feaedb193617c
Author: jaypipes@gmail.com <>
Date:   Wed Oct 13 13:47:05 2010 -0400

    Adds a /images/detail route to the Parallax controller, adds a unit test for it, and cleans up Michael's suggestions.

commit 6ba23534c811c7320dec3c91178aa6cfd57e7618
Merge: 4c5a45f 2d8dfd2
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Tue Oct 12 20:01:44 2010 +0000

    Works around non-RFC compliance in Python (< 2.6.5) urlparse library.

commit 2d8dfd2d4257fe7d89205f7dc593a38f1b9bf89e
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Tue Oct 12 14:47:38 2010 -0500

    Workaround for bug in Python 2.6.1 urlparse library

commit bee23da1c69c94021fc0d72d0933ad9a144ec9e9
Author: jaypipes@gmail.com <>
Date:   Tue Oct 12 14:26:02 2010 -0400

    Adds tests for bad status set on image

commit d59d1f1ca10233fd18fb5ad7ebade0e58dd88c0b
Author: jaypipes@gmail.com <>
Date:   Tue Oct 12 14:01:12 2010 -0400

    Implements Parallax API call to register a new image
    
    * Adds unit test for Parallax API controller
    * Adds stubouts for glance.parallax.db.sqlalchemy.api calls
      regarding images
    * Adds --logging-clear-handlers arg to nosetests in run_tests.sh to
      prevent extra output in running tests when tests complete successfully

commit 4c5a45f42d7dcd86225bf59e01de7128b357661a
Merge: f8b1b31 3cb8642
Author: jaypipes@gmail.com <>
Date:   Mon Oct 11 19:56:54 2010 +0000

    This patch overhauls the testing in Glance:
    
    * Adds Nova-like run_tests.sh and tools/* files to automatically run unit tests in a virtual environment.  Just do ./run_tests.sh -V from project root.  All required dependencies will be installed into a new virtual environment at .glance-venv.
    * Adds proper mocking and stubouts using pymox.  This removes the need for all the FakeParallaxAdapter and similar code.  Unit tests now call stubs.stub_out_parallax(), etc instead of having swiftfakehttp.py and similar code.

commit 3cb8642af4ad44bf47721e6911765fbe14e76fcc
Author: jaypipes@gmail.com <>
Date:   Mon Oct 11 15:34:10 2010 -0400

    unittest2 -> unittest. For now, since not using unittest2 features yet.

commit ab8de9fe7348468f36211ad3fe4749bc20f3ed0c
Author: jaypipes@gmail.com <>
Date:   Mon Oct 11 14:28:35 2010 -0400

    Fixes up test_teller_api.py to use stubout correctly. Fixes a few bugs that showed up in the process, and remove the now-unnecessary FakeParallaxAdapter.

commit 63fe51eab5a7fbd5d3b6392c8dc36601c0937309
Author: jaypipes@gmail.com <>
Date:   Fri Oct 8 16:42:13 2010 -0400

    First round of cleaning up the unittests. Adds test suite runner, support for virtualenv setup and library dependencies, resolves issues with ImportErrors on cloudfiles, adds pymox/stubout support and splits the backend testing into distinct unittest cases.

commit f8b1b31707ab99186090e41fd853f3070ef56b42
Merge: ddc056e 2535f4f
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Tue Oct 5 16:16:42 2010 +0000

    With this patch Parallax and teller now work end-to-end with the Swift backend.
    
    bash-3.2$ curl localhost:9292/image?uri=http://localhost:9191/images/2 > testimg.tar.gz
      % Total % Received % Xferd Average Speed Time Time Time Current
                                     Dload Upload Total Spent Left Speed
    100 189M 0 189M 0 0 203k 0 --:--:-- 0:15:52 --:--:-- 214k
    
    bash-3.2$ md5 testimg.tar.gz
    MD5 (testimg.tar.gz) = ef6c5db4f55b0030828b71dd253a2384

commit 2535f4f5bd8dc22846615ae75d5844c91305784f
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Mon Oct 4 17:18:12 2010 -0500

    Adding missing backend files, fixing typos in comments

commit ddc056e4bec96a6062292d988c508b70d541c941
Merge: 346d5f0 acf4012
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Mon Oct 4 19:06:48 2010 +0000

    This patch:
      * Decouples Controller for ParallaxAdapter implementation by adding generic RegistryAdapter and providing a lookup function
      * Adds base model attributes to Parallax's JSON (created_at, etc)

commit c0d0451aa2a79f61c5e303791a54aaac984e2350
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Fri Oct 1 22:36:15 2010 -0500

    Improving symmetry between teller and parallax

commit 2a90df69e96c86eeffd418bac9afb75baeaa9d6c
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Fri Oct 1 21:24:29 2010 -0500

    Fixing swift authurl

commit acf40127986b2441ccfc78ee8c4f9fc717475251
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Fri Oct 1 18:07:46 2010 -0500

    Add RegistryAdapter, include ModelBase attributes

commit 00afd1dd9380455f54434a41775d13f9c5eb405f
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Fri Oct 1 16:51:42 2010 -0500

    Fixing Teller image tests

commit 5e2ce8dbedb5fbf4f4aaa6b90408d6f74bc34983
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Fri Oct 1 16:41:53 2010 -0500

    Created teller-server.py in bin/

commit 32d184e34e7711931c2ef035a4cc20d0740ab638
Merge: bc11926 346d5f0
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Fri Oct 1 15:54:22 2010 -0500

    Merge trunk

commit bc119260505016ec51b881f871aa48e484d5d781
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Fri Oct 1 15:41:54 2010 -0500

    Cleaning up Teller backend

commit 346d5f0312863726b3ec0cee2297661e199ee285
Merge: 8ce1d05 3cebcb0
Author: Christopher MacGown <chris@slicehost.com>
Date:   Fri Oct 1 20:31:50 2010 +0000

    Rewrote ImageController to inherit from the work Rick Harris did in glance.common. Moved it into teller/api/images.py to make teller match parallax. Fixed tests. Renamed them to distinguish if any parallax tests ever get written.

commit 6c2c7b2c24fe276a0fbe672ec44c14097f0c2260
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Fri Oct 1 15:27:48 2010 -0500

    Adding Image index call, nesting the Image show dict to facilitate XML serialization

commit 93ec338f1717dabc0c49963e5c701f5f8970f426
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Fri Oct 1 14:51:29 2010 -0500

    Moving parallax models out of common and into the parallax module

commit 3cebcb065295245928c1558395954e375cc22ba9
Author: Christopher MacGown <chris@slicehost.com>
Date:   Thu Sep 30 18:16:15 2010 -0700

    Updated tests

commit 226cebf66b9f61f4108711b73564b00a221534fd
Author: Christopher MacGown <chris@slicehost.com>
Date:   Thu Sep 30 17:52:50 2010 -0700

    Reimplements server.py as a wsgi api inheriting from glance.common

commit 8ce1d057d12411da655252122c45830e01a15bbc
Merge: e994a6c a9cd0bc
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Thu Sep 30 21:02:24 2010 +0000

    This patch:
      * pulls in a number of useful libraries from Nova under the common/ path (we can factor those out to a shared library in Bexar-release)
      * Defines the models in common.db.sqlalchemy.models.py (this should be factored out into the parallax package soon)
      * Adds the parallax api-server under /bin (if PyPI was used to pull python-daemon and python-lockfile, you may need to apply a patch I have against it)

commit e994a6c56aaffd98f8146ac749dd6953ec6c099f
Merge: 5dfb38f 61b1951
Author: Christopher MacGown <chris@slicehost.com>
Date:   Thu Sep 30 21:01:45 2010 +0000

    Changes the obj['uri'] to obj['location'] to better sync with the representation within Nova. Adds the image_lookup_fn = ParallaxAdapter.lookup to teller.server

commit a9cd0bc4ea408ad5b72b41cdfd74dd85ec503650
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Sep 29 15:51:21 2010 -0500

    ImageChunk -> ImageFile, merging APIRouter into API for now

commit ce92e8132d539d40599b3b5daa0f88db3fb91456
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Sep 29 11:49:17 2010 -0500

    Adding Apache header to test_data.py

commit 185410b957840c2cb40360e1ce34ac678ef42fe7
Merge: d827767 5dfb38f
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Sep 29 11:47:13 2010 -0500

    Merge trunk

commit d8277674e9c1d90aa96a0a1595c8cb8af2e0ecf1
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Sep 29 11:25:55 2010 -0500

    Small cleanups

commit 61b1951dc757c3ff5e26342b4cd99fcea017db82
Author: Christopher MacGown <chris@slicehost.com>
Date:   Wed Sep 29 11:22:52 2010 -0500

    Parallax will return obj['location'] instead of obj['uri'], also maybe a parallax lookup fn would be nice?

commit 5dfb38fe41668cda85e7a2f8ad5255dcf82a4f13
Merge: d3a89b3 5f43ca1
Author: Christopher MacGown <chris@slicehost.com>
Date:   Wed Sep 29 16:21:52 2010 +0000

    Implements a Parallax adapter for looking up images requested from nova. Adds a size check to SwiftBackend to ensure that the chunks haven't been truncated or anything.

commit 4960fb60e4f60054678f03541923adcf7f1133fc
Merge: abaf040 d3a89b3
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Sep 29 00:14:03 2010 -0500

    Reconciling parallax modifications with modulization of glance

commit abaf040e3b7f9fd0b2909d51eb8a4fce09909a82
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Tue Sep 28 23:54:27 2010 -0500

    Adding Images controller

commit ecbed9f2291279101a7e22a7e284a9511c559139
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Tue Sep 28 19:20:11 2010 -0500

    Adding API directory and server.py

commit 5f43ca1a535f4d7640dc8eece8590ae9f99436d2
Author: Christopher MacGown <chris@slicehost.com>
Date:   Tue Sep 28 16:04:02 2010 -0500

    Modulify the imports

commit ff52b2cdb1447f8d5a0257eac6a9fce491508456
Merge: d1b108a d3a89b3
Author: Christopher MacGown <chris@slicehost.com>
Date:   Tue Sep 28 15:34:06 2010 -0500

    Merge with trunk

commit d1b108a6533790de015c4f801cb0d11dab034656
Author: Christopher MacGown <chris@slicehost.com>
Date:   Tue Sep 28 15:18:30 2010 -0500

    Implements Parallax adapter for lookups from Teller, also adds size expectations to the backend adapters.

commit 41da7c03643dbef472a0ea033d38ac38e9d2b45e
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Tue Sep 28 11:59:01 2010 -0500

    Adding files from Nova

commit d3a89b36610045c79bf4990fbfa9c3c3f8dbb58a
Merge: 74e5e01 2d922a5
Author: jaypipes@gmail.com <>
Date:   Tue Sep 28 15:16:48 2010 +0000

    Makes glance a module, containing teller and parallax sub-modules.
    
    Makes tests and tests.unit packages so nosetests will find the unit tests.

commit 2d922a5e5cd2764d8603a464c141d8156e6667af
Author: jaypipes@gmail.com <>
Date:   Mon Sep 27 18:43:04 2010 -0400

    libify glance into teller and parallax modules. Make nosetests work by making tests and tests/unit/ into packages.

commit 74e5e01885eb026f9d407c166d4af76c43660f39
Merge: ce49d94 3d69f40
Author: Monty Taylor <mordred@inaugust.com>
Date:   Mon Sep 27 15:46:52 2010 +0000

    Rearranged the code a little. Added a setup.py. Added sphinx doc skeleton.

commit 3d69f40135977b0e21a6e32f5e906c6b20ff4f2b
Author: Monty Taylor <mordred@inaugust.com>
Date:   Sun Sep 26 00:25:34 2010 -0700

    Added setup.py and sphinx docs.

commit acd7cf916dba337713311c36a014ceac547f6c1f
Author: Monty Taylor <mordred@inaugust.com>
Date:   Sun Sep 26 00:17:54 2010 -0700

    Reorg to make Monty's build pedanticness side happier.

commit ce49d94f3ef5299334c287dfb30d249ca1c94cce
Merge: 149a12d 7035db0
Author: jaypipes@gmail.com <>
Date:   Fri Sep 24 16:49:17 2010 -0400

    Merge Chris' swift work.

commit 7035db08fa8f07f52ee7329bc3e436081b4e0fd0
Author: jaypipes@gmail.com <>
Date:   Fri Sep 24 16:36:31 2010 -0400

    Implements Swift backend for teller

commit 5fcedf01eb91063462e79ad1822c9c71b443217c
Author: jaypipes@gmail.com <>
Date:   Fri Sep 24 16:20:46 2010 -0400

    ignore all .pyc files

commit 149a12d776a0f382e81ea30b32650ea1e073af2e
Merge: 78b45ee 6d4ba15
Author: Rick Clark <rclark@chat-blanc>
Date:   Wed Sep 22 14:01:55 2010 -0500

    Merging ricks changes

commit 6d4ba15007e467780c031b0b4c3bbed6e9181407
Merge: 78b45ee e765b23
Author: Rick Harris <rick.harris@rackspace.com>
Date:   Wed Aug 25 13:49:40 2010 -0500

    Adding basic image controller and mock backends

commit e765b236a952d0cfc983efd002e020e12618d058
Author: Cory Wright <cory.wright@rackspace.com>
Date:   Mon Aug 23 23:32:57 2010 -0500

    Adding description of registry data structure

commit 545efb517a67c1e63220379cb266a216e1084388
Author: Cory Wright <cory.wright@rackspace.com>
Date:   Wed Aug 11 20:17:56 2010 -0500

    Adding teller_server

commit 80715f835259bae33974f532a992c92696313b1b
Author: Cory Wright <cory.wright@rackspace.com>
Date:   Wed Aug 11 17:54:34 2010 -0500

    adding filesystem and http backends

commit 78b45ee909994eef9fbdeba59bb91d9fc955272b
Author: Rick Harris <rick@quasar.racklabs.com>
Date:   Thu Aug 5 22:06:42 2010 -0500

    Initial check-in
